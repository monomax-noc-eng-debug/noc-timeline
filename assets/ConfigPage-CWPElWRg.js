import{c as ie,u as ae,e as re,a as oe,r,j as s,L as F,T as ce,d as le}from"./index-DK6B-WCw.js";import{c as $}from"./configService-CZgy8SXU.js";import{B as Y}from"./button-BbHS59sh.js";import{I as q,L as de}from"./input-DooheVIX.js";import{A as xe,T as _}from"./tag-DCXI9xhI.js";import{L as me}from"./lock-C3UL5Fch.js";import{S as pe}from"./save-BEoUYHgs.js";import{a as H,T as J}from"./tv-loOJGcyQ.js";import{G as Q}from"./globe-DPNg0oVo.js";import{L as W}from"./layers-qnb4Fv5D.js";import{P as X}from"./plus-CgBOjWeQ.js";import{T as Z}from"./trash-2-Bo3QcrYj.js";import"./firebaseConfig-BlIlsXYa.js";const ue=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ge=ie("circle-check-big",ue),k=r.memo(({items:S,onAdd:y,onRemove:A,onUpdate:L,title:T,icon:R,color:E,canEdit:i})=>{const[m,d]=r.useState(""),[j,p]=r.useState(null),[v,g]=r.useState(""),b=r.useCallback(()=>{m.trim()&&(y(m.trim()),d(""))},[m,y]);return s.jsxs("div",{className:"bg-white dark:bg-zinc-900/50 border border-zinc-100 dark:border-zinc-800 rounded-xl p-4 space-y-3",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${E}`,children:s.jsx(R,{size:14,className:"text-white"})}),s.jsx("span",{className:"text-xs font-bold text-zinc-700 dark:text-zinc-200",children:T}),s.jsx("span",{className:"text-[9px] font-medium text-zinc-400 bg-zinc-100 dark:bg-zinc-800 px-1.5 py-0.5 rounded",children:S.length})]})}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:S.map((f,n)=>s.jsxs("div",{className:"group flex items-center gap-1 px-2 py-1 bg-zinc-50 dark:bg-zinc-800 rounded-lg border border-zinc-100 dark:border-zinc-700",children:[i&&j===n?s.jsx("input",{autoFocus:!0,value:v,onChange:N=>g(N.target.value),onKeyDown:N=>{N.key==="Enter"&&(L(n,v),p(null)),N.key==="Escape"&&p(null)},onBlur:()=>{v.trim()&&L(n,v),p(null)},className:"w-20 h-5 px-1 text-[10px] font-bold bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-600 rounded outline-none"}):s.jsx("span",{onClick:()=>{i&&(p(n),g(f))},className:`text-[10px] font-bold text-zinc-600 dark:text-zinc-300 ${i?"cursor-pointer hover:text-blue-500":""}`,children:f}),i&&s.jsx("button",{onClick:()=>A(n),className:"opacity-0 group-hover:opacity-100 p-0.5 text-zinc-300 hover:text-red-500 transition-all",children:s.jsx(Z,{size:10})})]},n))}),i&&s.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-zinc-100 dark:border-zinc-800",children:[s.jsx("input",{value:m,onChange:f=>d(f.target.value),onKeyDown:f=>{f.key==="Enter"&&b()},placeholder:`Add ${T.toLowerCase()}...`,className:"flex-1 h-7 px-2 text-xs bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg outline-none focus:ring-1 focus:ring-blue-500"}),s.jsx("button",{onClick:b,className:"h-7 px-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-lg text-[10px] font-bold hover:opacity-90 transition-all",children:s.jsx(X,{size:12})})]})]})});k.displayName="SimpleListEditor";function Ae(){const S=ae(),{toast:y}=re(),{currentUser:A}=oe(),[L,T]=r.useState(!0),[R,E]=r.useState(!1),[i,m]=r.useState({leagues:[],channels:[],cdnOptions:[]}),[d,j]=r.useState({types:[],statuses:[],severities:[],categories:[],subCategories:[]}),[p,v]=r.useState("leagues"),[g,b]=r.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDanger:!1}),n=(typeof A=="object"?A?.role:null)==="NOC Lead";r.useEffect(()=>{const e=$.subscribeConfigs(a=>{m(a),T(!1)}),t=$.subscribeTicketOptions(a=>{j(a)});return()=>{e(),t()}},[]);const N=async()=>{if(n){E(!0);try{await $.updateConfigs(i),await $.updateTicketOptions(d),y({title:"Saved",description:"All settings saved to database"})}catch(e){y({variant:"destructive",title:"Error",description:e.message})}finally{E(!1)}}},V=(e,t)=>{!n||!t.trim()||m(e==="cdnOptions"?{...i,cdnOptions:[...i.cdnOptions,{id:t,label:t,color:"bg-zinc-500"}]}:{...i,[e]:[...i[e],t]})},M=(e,t)=>{if(!n)return;const a=i[e][t],o=typeof a=="string"?a:a.label;b({isOpen:!0,title:"Remove Item",message:`Are you sure you want to remove "${o}"?`,isDanger:!0,onConfirm:()=>{m({...i,[e]:i[e].filter((l,x)=>x!==t)}),b(l=>({...l,isOpen:!1}))}})},U=(e,t,a)=>{if(!n)return;const o={...i};e==="cdnOptions"?o.cdnOptions=i.cdnOptions.map((l,x)=>x===t?{...l,...a}:l):o[e]=i[e].map((l,x)=>x===t?a:l),m(o)},C=r.useCallback((e,t)=>{!n||!t.trim()||j(a=>({...a,[e]:[...a[e],t]}))},[n]),w=r.useCallback((e,t)=>{if(!n)return;const a=d[e][t];b({isOpen:!0,title:"Remove Option",message:`Remove "${a}" from ${e}?`,isDanger:!0,onConfirm:()=>{j(o=>({...o,[e]:o[e].filter((l,x)=>x!==t)})),b(o=>({...o,isOpen:!1}))}})},[n,d]),O=r.useCallback((e,t,a)=>{!n||!a.trim()||j(o=>({...o,[e]:o[e].map((l,x)=>x===t?a:l)}))},[n]);if(L)return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-zinc-50 dark:bg-black",children:[s.jsx(F,{className:"w-8 h-8 animate-spin text-zinc-500"}),s.jsx("p",{className:"mt-4 text-xs font-bold text-zinc-400",children:"Loading..."})]});const B=({items:e,onAdd:t,onRemove:a,onUpdate:o,icon:l,title:x,placeholder:se,isCdn:D=!1})=>{const[K,P]=r.useState(""),[te,I]=r.useState(null),[h,G]=r.useState(""),ne=["bg-zinc-500","bg-red-500","bg-orange-500","bg-amber-500","bg-emerald-500","bg-blue-500","bg-purple-500","bg-pink-500"];return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 bg-zinc-50 dark:bg-zinc-900/50 p-4 rounded-xl border border-zinc-100 dark:border-zinc-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-white dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700",children:s.jsx(l,{size:16,className:"text-zinc-600 dark:text-zinc-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold",children:x}),s.jsxs("p",{className:"text-[10px] text-zinc-400",children:[e.length," records"]})]})]}),n&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(q,{value:K,onChange:c=>P(c.target.value),onKeyDown:c=>{c.key==="Enter"&&(t(K),P(""))},placeholder:se,className:"h-8 w-48 text-xs"}),s.jsxs(Y,{onClick:()=>{t(K),P("")},className:"h-8 px-3 text-[10px] font-bold",children:[s.jsx(X,{size:14,className:"mr-1"})," Add"]})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:e.map((c,z)=>s.jsxs("div",{className:"group flex items-center justify-between p-3 bg-white dark:bg-zinc-900/50 border border-zinc-100 dark:border-zinc-800 rounded-lg hover:border-zinc-300 dark:hover:border-zinc-700 transition-all relative overflow-hidden",children:[D&&s.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${c.color||"bg-zinc-500"}`}),n&&te===z?s.jsx(q,{autoFocus:!0,value:h,onChange:u=>G(u.target.value),onKeyDown:u=>{u.key==="Enter"&&(o(z,D?{...c,label:h,id:h}:h),I(null)),u.key==="Escape"&&I(null)},onBlur:()=>{o(z,D?{...c,label:h,id:h}:h),I(null)},className:"h-6 text-xs"}):s.jsx("span",{className:`text-xs font-bold text-zinc-700 dark:text-zinc-200 truncate ${n?"cursor-pointer hover:text-blue-500":""}`,onClick:()=>{n&&(I(z),G(typeof c=="string"?c:c.label))},children:typeof c=="string"?c:c.label}),n&&s.jsx("button",{onClick:()=>a(z),className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-300 hover:text-red-500 transition-all",children:s.jsx(Z,{size:12})}),D&&n&&s.jsx("div",{className:"absolute bottom-1 left-2 flex gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:ne.map(u=>s.jsx("button",{onClick:()=>o(z,{...c,color:u}),className:`w-2 h-2 rounded-full ${u} ${c.color===u?"ring-1 ring-offset-1 ring-zinc-400":"opacity-40 hover:opacity-100"}`},u))})]},z))}),e.length===0&&s.jsxs("div",{className:"py-12 bg-zinc-50 dark:bg-zinc-900/20 border-2 border-dashed border-zinc-100 dark:border-zinc-800 rounded-xl flex flex-col items-center justify-center text-zinc-300",children:[s.jsx(de,{size:32,className:"mb-2 opacity-20"}),s.jsx("p",{className:"text-[10px] font-bold",children:"No entries"})]})]})},ee=[{id:"leagues",label:"Leagues",icon:H},{id:"channels",label:"Channels",icon:J},{id:"cdn",label:"CDNs",icon:Q},{id:"ticket",label:"Options",icon:_}];return s.jsxs("div",{className:"min-h-screen bg-white dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-white/90 dark:bg-zinc-950/90 backdrop-blur-sm border-b border-zinc-100 dark:border-zinc-800",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>S(-1),className:"p-1.5 rounded-lg text-zinc-400 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:s.jsx(xe,{size:18})}),s.jsx("h1",{className:"text-sm font-bold",children:"Master Registry"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!n&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-lg",children:[s.jsx(me,{size:10,className:"text-zinc-400"}),s.jsx("span",{className:"text-[9px] font-bold text-zinc-400",children:"READ ONLY"})]}),n&&s.jsxs(Y,{onClick:N,disabled:R,size:"sm",className:"h-8 text-xs font-bold gap-1.5",children:[R?s.jsx(F,{size:12,className:"animate-spin"}):s.jsx(pe,{size:12}),"Save All"]})]})]})}),s.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-6",children:[s.jsx("div",{className:"flex items-center gap-1 p-1 bg-zinc-100 dark:bg-zinc-900 rounded-lg w-fit mb-6",children:ee.map(e=>s.jsxs("button",{onClick:()=>v(e.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-bold transition-all ${p===e.id?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[s.jsx(e.icon,{size:12}),e.label]},e.id))}),s.jsxs("div",{className:"animate-in fade-in duration-200",children:[p==="leagues"&&s.jsx(B,{items:i.leagues,onAdd:e=>V("leagues",e),onRemove:e=>M("leagues",e),onUpdate:(e,t)=>U("leagues",e,t),icon:H,title:"League Registry",placeholder:"Add league..."}),p==="channels"&&s.jsx(B,{items:i.channels,onAdd:e=>V("channels",e),onRemove:e=>M("channels",e),onUpdate:(e,t)=>U("channels",e,t),icon:J,title:"Channel Map",placeholder:"Add channel..."}),p==="cdn"&&s.jsx(B,{items:i.cdnOptions,onAdd:e=>V("cdnOptions",e),onRemove:e=>M("cdnOptions",e),onUpdate:(e,t)=>U("cdnOptions",e,t),icon:Q,title:"CDN Providers",placeholder:"Add provider...",isCdn:!0}),p==="ticket"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-xl border border-blue-100 dark:border-blue-900/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(_,{size:16,className:"text-blue-500"}),s.jsx("h3",{className:"text-sm font-bold text-blue-700 dark:text-blue-300",children:"Options"})]}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Configure dropdown options for ticket management. Changes will sync to all users after saving."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(k,{items:d.types||[],onAdd:e=>C("types",e),onRemove:e=>w("types",e),onUpdate:(e,t)=>O("types",e,t),title:"Types",icon:_,color:"bg-blue-500",canEdit:n}),s.jsx(k,{items:d.statuses||[],onAdd:e=>C("statuses",e),onRemove:e=>w("statuses",e),onUpdate:(e,t)=>O("statuses",e,t),title:"Statuses",icon:ge,color:"bg-emerald-500",canEdit:n}),s.jsx(k,{items:d.severities||[],onAdd:e=>C("severities",e),onRemove:e=>w("severities",e),onUpdate:(e,t)=>O("severities",e,t),title:"Severities",icon:ce,color:"bg-amber-500",canEdit:n}),s.jsx(k,{items:d.categories||[],onAdd:e=>C("categories",e),onRemove:e=>w("categories",e),onUpdate:(e,t)=>O("categories",e,t),title:"Categories",icon:W,color:"bg-purple-500",canEdit:n}),s.jsx(k,{items:d.subCategories||[],onAdd:e=>C("subCategories",e),onRemove:e=>w("subCategories",e),onUpdate:(e,t)=>O("subCategories",e,t),title:"Sub Categories",icon:W,color:"bg-pink-500",canEdit:n})]})]})]})]}),s.jsx(le,{isOpen:g.isOpen,onClose:()=>b(e=>({...e,isOpen:!1})),title:g.title,message:g.message,onConfirm:g.onConfirm,isDanger:g.isDanger})]})}export{Ae as default};
