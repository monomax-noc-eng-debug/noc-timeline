import{e as N,r as m,q as f,w,f as b,o as v,l as z,g as S,h as j,b as M,u as D,j as e,C as E,A as C,i as A,L as T}from"./index-Q34mk0jU.js";import{s as I}from"./incidentService-DXlXT8ar.js";import{f as y}from"./format-_IVVRDDj.js";import{A as u}from"./arrow-right-DK_OLL0C.js";import{R as L}from"./radio-DdFQC4eq.js";import{S as R}from"./shield-check-DtcuAYQr.js";const U=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],G=N("calendar-days",U),H=()=>{const[p,i]=m.useState({incidents:{total:0,critical:0,open:0},matches:{total:0,live:0,upcoming:0},currentShift:{onDuty:[],status:"Normal",lastUpdate:null},loading:!0});return m.useEffect(()=>{const x=I(s=>{const t=s.filter(a=>a.status!=="Closed"&&a.status!=="Resolved"),d=t.filter(a=>a.priority==="Critical"||a.priority==="High").length;i(a=>({...a,incidents:{total:t.length,open:t.filter(r=>r.status==="Open").length,critical:d}}))},s=>console.error("Incidents Snapshot Error:",s)),h=y(new Date,"yyyy-MM-dd"),l=f(b(j,"schedules"),w("startDate","==",h)),n=v(l,s=>{const t=s.docs.map(r=>r.data()),d=new Date,a=t.filter(r=>{if(r.hasStartStat&&!r.hasEndStat)return!0;if(!r.startTime)return!1;try{const g=new Date(`${h}T${r.startTime}`),k=new Date(g.getTime()+7200*1e3);return d>=g&&d<=k}catch{return!1}}).length;i(r=>({...r,matches:{total:t.length,live:a,upcoming:Math.max(0,t.length-a)}}))},s=>console.error("Matches Snapshot Error:",s)),o=f(b(j,"shifts"),S("createdAt","desc"),z(1)),c=v(o,s=>{if(!s.empty){const t=s.docs[0].data();i(d=>({...d,currentShift:{onDuty:t.onDuty||[],status:t.status||"Normal",lastUpdate:t.updatedAt||t.createdAt}}))}},s=>console.error("Shift Snapshot Error:",s));return setTimeout(()=>{i(s=>({...s,loading:!1}))},500),()=>{typeof x=="function"&&x(),n&&n(),c&&c()}},[]),p};function P(){const{currentUser:p}=M(),i=D(),[x,h]=m.useState(new Date),{incidents:l,matches:n,currentShift:o,loading:c}=H();m.useEffect(()=>{const t=setInterval(()=>h(new Date),6e4);return()=>clearInterval(t)},[]);const s=()=>{const t=x.getHours();return t<12?"Good Morning":t<18?"Good Afternoon":"Good Evening"};return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-zinc-50 dark:bg-black p-6 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-indigo-500/5 rounded-full blur-3xl -mr-32 -mt-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-500/5 rounded-full blur-3xl -ml-32 -mb-32"})]}),e.jsxs("div",{className:"relative z-10 max-w-5xl w-full flex flex-col items-center gap-12 animate-in slide-in-from-bottom-8 fade-in duration-700",children:[e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl flex items-center justify-center font-black italic shadow-xl mb-4 text-xl",children:"N"}),e.jsx("div",{className:"inline-flex items-center px-4 py-1.5 rounded-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-sm",children:e.jsx("span",{className:"text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:y(x,"EEEE, dd MMMM yyyy")})})]}),e.jsxs("h1",{className:"text-5xl sm:text-7xl font-black text-zinc-900 dark:text-white tracking-tighter leading-[1.1]",children:[s(),", ",e.jsx("br",{className:"sm:hidden"}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-indigo-400 dark:from-indigo-400 dark:to-indigo-200",children:p?.name?.split(" ")[0]||"Engineer"}),e.jsx("span",{className:"text-zinc-300 dark:text-zinc-700",children:"."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full px-4 sm:px-0",children:[e.jsxs("div",{onClick:()=>i("/incidents"),className:"group relative overflow-hidden bg-white dark:bg-zinc-900/50 backdrop-blur-sm border-2 border-zinc-100 dark:border-zinc-800 rounded-2xl p-6 cursor-pointer hover:border-red-200 dark:hover:border-red-900/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(E,{size:80,className:"text-red-500"})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2.5 bg-red-100 dark:bg-red-900/30 rounded-xl text-red-600 dark:text-red-400",children:e.jsx(C,{size:20})}),e.jsx("span",{className:"text-sm font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"Incidents"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-1",children:[c?"-":l.open," Open"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-zinc-500",children:[l.critical>0&&e.jsxs("span",{className:"text-red-500",children:[l.critical," Critical"]}),l.critical>0&&e.jsx("span",{className:"w-1 h-1 bg-zinc-300 rounded-full"}),e.jsxs("span",{children:[l.total," Total Active"]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center text-xs font-bold text-red-600 dark:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0",children:["Manage Incidents ",e.jsx(u,{size:14,className:"ml-1"})]})]})]}),e.jsxs("div",{onClick:()=>i("/schedule/today"),className:"group relative overflow-hidden bg-white dark:bg-zinc-900/50 backdrop-blur-sm border-2 border-zinc-100 dark:border-zinc-800 rounded-2xl p-6 cursor-pointer hover:border-indigo-200 dark:hover:border-indigo-900/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(G,{size:80,className:"text-indigo-500"})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2.5 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:e.jsx(L,{size:20,className:n.live>0?"animate-pulse":""})}),e.jsx("span",{className:"text-sm font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"Matches"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-1",children:[c?"-":n.total," Today"]}),e.jsx("div",{className:"flex items-center gap-2 text-xs font-bold text-zinc-500",children:n.live>0?e.jsxs("span",{className:"text-indigo-500 animate-pulse",children:[n.live," Live Now"]}):e.jsxs("span",{children:[n.upcoming," Upcoming"]})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-xs font-bold text-indigo-600 dark:text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0",children:["View Schedule ",e.jsx(u,{size:14,className:"ml-1"})]})]})]}),e.jsxs("div",{onClick:()=>i("/handover"),className:"group relative overflow-hidden bg-white dark:bg-zinc-900/50 backdrop-blur-sm border-2 border-zinc-100 dark:border-zinc-800 rounded-2xl p-6 cursor-pointer hover:border-emerald-200 dark:hover:border-emerald-900/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(R,{size:80,className:"text-emerald-500"})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2.5 bg-emerald-100 dark:bg-emerald-900/30 rounded-xl text-emerald-600 dark:text-emerald-400",children:e.jsx(A,{size:20})}),e.jsx("span",{className:"text-sm font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"On Duty"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-1 line-clamp-2 min-h-[3.5rem]",children:c?e.jsx(T,{className:"animate-spin text-zinc-400",size:20}):o.onDuty.length>0?o.onDuty.join(", "):"No Shift Logged"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-zinc-500",children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${o.status==="Normal"?"bg-emerald-500":"bg-amber-500"}`}),e.jsxs("span",{children:["Status: ",o.status]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center text-xs font-bold text-emerald-600 dark:text-emerald-400 opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0",children:["Shift Handover ",e.jsx(u,{size:14,className:"ml-1"})]})]})]})]})]})]})}export{P as default};
