import{c as g,r as l,K as D}from"./index-DAanvQcz.js";import{c as M,t as p,m as k,a as w,i as S,f as q}from"./format-B568ns5f.js";import{i as I}from"./isSameMonth-CRYCS6Ki.js";import{u as v,Q as F}from"./useBaseQuery-DFxn4vC0.js";import{g as $,a as L,q as m,n as y,o as d,l as _,i as T}from"./firebaseConfig-CyCI-yMF.js";const E=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],R=g("file-spreadsheet",E);const Q=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],V=g("radio",Q);function b(t,a){return v(t,F)}function j(t,a,s){return M(t,+p(t)+a)}function P(t,a,s){return j(t,a*k)}function x(t){return M(t,Date.now())}function z(t){return a=>{const r=(t?Math[t]:Math.trunc)(a);return r===0?0:r}}function B(t,a){return+p(t)-+p(a)}function W(t,a,s){const r=B(t,a)/w;return z(s?.roundingMethod)(r)}function G(t,a){return I(M(t,t),x(t))}const N=async({queryKey:t})=>{const[a,{dateFilter:s,dateRange:r,limit:f}]=t,n=$(L,"schedules");let o;try{if(s){let i=s;if(s instanceof Date)if(S(s))i=q(s,"yyyy-MM-dd");else return[];o=m(n,y("startDate","==",i),d("startTime","asc"))}else r?.start&&r?.end?o=m(n,y("startDate",">=",r.start),y("startDate","<=",r.end),d("startDate","asc"),d("startTime","asc")):o=m(n,d("startDate","desc"),d("startTime","asc"),_(f));return(await T(o)).docs.map(i=>{const e=i.data();return{id:i.id,...e,hasStartStat:!!e.hasStartStat,hasEndStat:!!e.hasEndStat,_searchString:`${e.teamA||""} ${e.teamB||""} ${e.match||""} ${e.title||""} ${e.league||""} ${e.channel||""}`.toLowerCase()}})}catch(c){throw console.error("Error fetching matches:",c),c}},J=(t,a,s=!1)=>{const[r,f]=l.useState(100),n=b({queryKey:["matches",{dateFilter:t,dateRange:a,limit:r}],queryFn:N,placeholderData:D,staleTime:s?1e3*20:1e3*60*5,refetchInterval:s?1e3*30:!1,refetchOnWindowFocus:s}),o=l.useMemo(()=>n.data||[],[n.data]),c=l.useMemo(()=>{if(!o.length)return[];const e={};for(const h of o){const u=h.startDate;e[u]||(e[u]=[]),e[u].push(h)}return Object.entries(e).sort((h,u)=>new Date(h[0])-new Date(u[0]))},[o]),i=()=>{!t&&!a&&f(e=>e+50)};return{matches:o,groupedData:c,loading:n.isLoading,isFetching:n.isFetching,loadMore:i,hasMore:!0,refetch:n.refetch}};export{R as F,V as R,P as a,W as d,G as i,J as u};
