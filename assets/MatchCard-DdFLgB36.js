import{c as h,r as g,E as v,j as e}from"./index-DWA64BFG.js";import{u as z}from"./useQuery-B6n27Du0.js";import{c as S,d as M,q as f,o as u,w as N,l as D,g as E}from"./firebaseConfig-B-I4EWGW.js";import{f as I}from"./format-B2edJEpO.js";import{C as O}from"./search-U_EXvX-8.js";import{C as $,P as L,T}from"./trash-2-S0m1smMe.js";import{E as j}from"./eye-CBXqocav.js";const V=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ee=h("eye-off",V);const F=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],q=h("radio",F);const C=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],_=h("timer",C);const H=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],P=h("trophy",H);const U=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],A=h("tv",U),B=async({queryKey:t})=>{const[p,{dateFilter:i,dateRange:o,limit:b}]=t,d=S(M,"schedules");let l;if(i){const c=i instanceof Date?I(i,"yyyy-MM-dd"):i;l=f(d,N("startDate","==",c),u("startTime","asc"))}else o?.start&&o?.end?l=f(d,N("startDate",">=",o.start),N("startDate","<=",o.end),u("startDate","asc"),u("startTime","asc")):l=f(d,u("startDate","desc"),u("startTime","asc"),D(b));return(await E(l)).docs.map(c=>{const a=c.data();return{id:c.id,...a,hasStartStat:!!a.hasStartStat,hasEndStat:!!a.hasEndStat,_searchString:`${a.teamA||""} ${a.teamB||""} ${a.match||""} ${a.title||""} ${a.league||""} ${a.startDate||""}`.toLowerCase()}})},te=(t,p,i=!0)=>{const[o,b]=g.useState(100),{data:d=[],isLoading:l,isFetching:s,refetch:c}=z({queryKey:["matches",{dateFilter:t,dateRange:p,limit:o}],queryFn:B,placeholderData:v,staleTime:1e3*60*5,gcTime:1e3*60*30,enabled:i}),a=g.useMemo(()=>{if(d.length===0)return[];const n={};for(const m of d){const x=m.startDate;n[x]||(n[x]=[]),n[x].push(m)}return Object.entries(n).sort((m,x)=>new Date(m[0])-new Date(x[0]))},[d]);return{matches:d,groupedData:a,loading:l,isFetching:s,loadMore:()=>{!t&&!p&&b(n=>n+50)},hasMore:!0,refetch:c}},R=g.memo(({match:t,onClick:p,onEdit:i,onDelete:o,selectable:b,selected:d,onSelect:l})=>{const s=g.useMemo(()=>{if(t.isLiveTime)return"LIVE";if(t.statusDisplay?.includes("Finished"))return"FINISHED";if(t.countdown&&t.countdown.toString().includes("m"))return"SOON";if(t.hasEndStat)return"FINISHED";if(t.hasStartStat&&!t.hasEndStat)return"LIVE";if(t.startTime&&t.startDate){const r=new Date,n=r.toLocaleDateString("en-CA");if(t.startDate===n){const[x,w]=t.startTime.split(":").map(Number),k=new Date;k.setHours(x,w,0,0);const y=(k-r)/(1e3*60);if(y>0&&y<=15)return"SOON"}}return"UPCOMING"},[t]),c=g.useMemo(()=>t.endStats?.muxViewerUniq?t.endStats.muxViewerUniq:t.startStats?.muxViewerUniq?t.startStats.muxViewerUniq:0,[t.endStats,t.startStats]),a=r=>{if(!r)return"0";const n=parseFloat(r.toString().replace(/,/g,""));return isNaN(n)?r:Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1}).format(n)};return e.jsxs("div",{onClick:p,className:`
        group relative bg-white dark:bg-zinc-900 rounded-2xl border-2 transition-all duration-300 
        hover:shadow-2xl hover:scale-[1.02] cursor-pointer overflow-hidden
        ${s==="LIVE"?"border-red-500 shadow-lg shadow-red-500/20":""}
        ${s==="SOON"?"border-orange-400 shadow-lg shadow-orange-500/10":""}
        ${s==="FINISHED"?"border-emerald-500/30 dark:border-emerald-500/20":""}
        ${s==="UPCOMING"?"border-zinc-200 dark:border-zinc-800":""}
      `,children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${s==="LIVE"?"bg-red-500 animate-pulse":s==="SOON"?"bg-orange-500":s==="FINISHED"?"bg-emerald-500":"bg-zinc-300 dark:bg-zinc-700"}`}),(s==="LIVE"||s==="SOON")&&e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r pointer-events-none ${s==="LIVE"?"from-red-500/5 via-orange-500/5":"from-orange-500/5 via-yellow-500/5"} to-transparent`}),e.jsxs("div",{className:"p-6 pl-8 relative",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s==="LIVE"&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-red-500 text-white rounded-lg shadow-lg shadow-red-500/30",children:[e.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-white"})]}),e.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:"LIVE"})]}),s==="SOON"&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-orange-500 text-white rounded-lg shadow-md shadow-orange-500/20 animate-pulse",children:[e.jsx(_,{size:14,className:"stroke-[3]"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:t.countdown&&t.countdown.includes("m")?`Starts in ${t.countdown}`:"Starting Soon"})]}),s==="FINISHED"&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-emerald-500 text-white rounded-lg shadow-md",children:[e.jsx(O,{size:14}),e.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:"Finished"})]}),s==="UPCOMING"&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[e.jsx($,{size:14}),e.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:"Scheduled"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[i&&e.jsx("button",{onClick:r=>{r.stopPropagation(),i(t)},className:"p-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-blue-50 hover:text-blue-600 dark:hover:bg-blue-900/30 dark:hover:text-blue-400 transition-colors",title:"Edit",children:e.jsx(L,{size:14})}),o&&e.jsx("button",{onClick:r=>{r.stopPropagation(),o(t.id)},className:"p-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/30 dark:hover:text-red-400 transition-colors",title:"Delete",children:e.jsx(T,{size:14})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.league&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-zinc-500 dark:text-zinc-400",children:[e.jsx(P,{size:12,className:"text-zinc-400"}),e.jsx("span",{className:"font-semibold",children:t.league})]}),t.channel&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded text-xs font-bold border border-indigo-100 dark:border-indigo-800",children:[e.jsx(A,{size:10}),t.channel]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`shrink-0 flex flex-col items-center justify-center w-16 h-16 rounded-xl border transition-colors ${s==="SOON"?"bg-orange-50 dark:bg-orange-900/10 border-orange-200 dark:border-orange-800":"bg-zinc-100 dark:bg-zinc-800/50 border-zinc-200 dark:border-zinc-700"}`,children:s==="LIVE"?e.jsxs(e.Fragment,{children:[e.jsx(q,{size:16,className:"text-red-500 mb-1 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-red-500 uppercase",children:"Live"})]}):s==="SOON"&&t.countdown&&t.countdown.includes("m")?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl font-black font-mono leading-none text-orange-500",children:t.countdown.replace("m","")}),e.jsx("span",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"mins"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`text-xl font-black font-mono leading-none ${s==="SOON"?"text-orange-500":"text-zinc-900 dark:text-white"}`,children:t.startTime?.split(":")[0]||"--"}),e.jsx("span",{className:`text-xs font-mono ${s==="SOON"?"text-orange-400":"text-zinc-400"}`,children:t.startTime?.split(":")[1]||"--"})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:t.teamA&&t.teamB?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-base font-black text-zinc-900 dark:text-white truncate",children:t.teamA}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px flex-1 bg-zinc-200 dark:bg-zinc-700"}),e.jsx("span",{className:"text-xs font-bold text-zinc-400",children:"VS"}),e.jsx("div",{className:"h-px flex-1 bg-zinc-200 dark:bg-zinc-700"})]}),e.jsx("div",{className:"text-base font-black text-zinc-900 dark:text-white truncate",children:t.teamB})]}):e.jsx("div",{className:"text-base font-black text-zinc-900 dark:text-white truncate",children:t.title||t.match||"Match Event"})})]}),(s==="LIVE"||s==="FINISHED")&&c>0&&e.jsx("div",{className:"flex items-center gap-2 pt-2 border-t border-zinc-100 dark:border-zinc-800",children:e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg text-xs font-semibold text-zinc-600 dark:text-zinc-400",children:[e.jsx(j,{size:14,className:"text-violet-500"}),e.jsxs("span",{children:[a(c)," Viewers"]})]})})]})]}),e.jsx("button",{onClick:p,className:"absolute bottom-4 right-4 p-2 rounded-lg bg-zinc-900 dark:bg-white text-white dark:text-black opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",title:"View Details",children:e.jsx(j,{size:16})})]})});R.displayName="MatchCard";export{ee as E,R as M,q as R,_ as T,P as a,A as b,te as u};
