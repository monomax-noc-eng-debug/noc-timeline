import{e as L,r as d,j as e,f as u,J as B,u as H,a as M,b as J,G as Q,c as k,L as R,B as p,D as E,K as G,H as K,F}from"./index-DeB0UNQi.js";import{I as z}from"./input-hRjRQo2p.js";import{C as W}from"./chevron-down-C0MtzhZK.js";import{A as X}from"./arrow-left-BnDC8UDn.js";import{P as T,S as Y,T as Z}from"./trash-2-I2HcWu5d.js";import{F as ee}from"./funnel-0qDYKk2D.js";import{M as S}from"./mail-BwAdBj3I.js";import{E as se}from"./eye-KLuNDX0O.js";import{S as te}from"./save-C3fkMG-Q.js";const ae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],re=L("pen",ae);const le=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],U=L("user-check",le),A={"NOC Lead":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 border-purple-200 dark:border-purple-800","NOC Engineer":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-200 dark:border-blue-800",Support:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800",Viewer:"bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700"},ie=["NOC Lead","NOC Engineer","Support","Viewer"];function ne({value:a,onChange:o,disabled:l=!1}){const[t,c]=d.useState(!1),i=r=>{o(r),c(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>!l&&c(!t),disabled:l,className:u("inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold border transition-all",A[a],!l&&"cursor-pointer hover:shadow-md",l&&"opacity-50 cursor-not-allowed"),children:[a,!l&&e.jsx(W,{size:14,className:u("transition-transform",t&&"rotate-180")})]}),t&&!l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),e.jsx("div",{className:"absolute top-full mt-2 left-0 z-50 w-48 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-2xl overflow-hidden animate-in fade-in zoom-in-95",children:ie.map(r=>e.jsxs("button",{type:"button",onClick:()=>i(r),className:u("w-full px-4 py-2.5 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",a===r&&"bg-zinc-50 dark:bg-zinc-800/50"),children:[e.jsx("span",{className:u("inline-flex px-2.5 py-1 rounded-full text-xs font-bold border",A[r]),children:r}),a===r&&e.jsx(B,{size:16,className:"text-primary"})]},r))})]})]})}const D={"NOC Lead":"bg-purple-50 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 border-purple-200 dark:border-purple-800","NOC Engineer":"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border-blue-200 dark:border-blue-800",Support:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800",Viewer:"bg-zinc-50 text-zinc-700 dark:bg-zinc-800/50 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700"},O=["NOC Lead","NOC Engineer","Support","Viewer"];function Ne(){const a=H(),{toast:o}=M(),{currentUser:l}=J(),[t,c]=d.useState([]),[i,r]=d.useState(!0),[m,n]=d.useState(""),[h,P]=d.useState("All"),[I,w]=d.useState(!1),[oe,_]=d.useState(null),[f,b]=d.useState(null),g=Q(l,[K.LEAD]);d.useEffect(()=>{j()},[]);const j=async()=>{try{r(!0);const s=await k.getAllUsers();c(s.filter(x=>x.isActive))}catch(s){o({variant:"destructive",title:"Failed to load users",description:s.message})}finally{r(!1)}},[N,y]=d.useState(null),V=s=>{g&&y(s)},$=async()=>{if(N)try{await k.deleteUser(N.uid),o({title:"User Deactivated",description:"User has been deactivated successfully",className:"bg-emerald-600 text-white border-none"}),j()}catch(s){o({variant:"destructive",title:"Failed to deactivate user",description:s.message})}finally{y(null)}},q=async(s,x)=>{if(g)try{await k.updateUser(s,x),o({title:"User Updated",description:"User profile has been updated",className:"bg-emerald-600 text-white border-none"}),_(null),j()}catch(C){o({variant:"destructive",title:"Failed to update user",description:C.message})}},v=t.filter(s=>{const x=s.name.toLowerCase().includes(m.toLowerCase())||s.email.toLowerCase().includes(m.toLowerCase()),C=h==="All"||s.role===h;return x&&C});return i?e.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"animate-spin text-primary mx-auto mb-4",size:48}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading team members..."})]})}):e.jsxs("div",{className:"h-full bg-zinc-50 dark:bg-black flex flex-col",children:[e.jsx("header",{className:"shrink-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-md border-b border-zinc-200 dark:border-zinc-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-2 -ml-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(X,{size:20,className:"text-zinc-500 dark:text-zinc-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-zinc-900 dark:text-white uppercase tracking-tight",children:"Team Management"}),e.jsx("p",{className:"text-[10px] font-medium uppercase text-zinc-500 dark:text-zinc-400 tracking-widest leading-none mt-0.5 hidden sm:block",children:"NOC Staff Directory & Access Control"})]})]}),g&&e.jsxs(p,{onClick:()=>w(!0),className:"bg-[#0078D4] hover:bg-[#106EBE] text-white font-semibold rounded-md shadow-sm h-9 sm:h-9",children:[e.jsx(T,{size:16,className:"mr-0 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Member"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(z,{value:m,onChange:s=>n(s.target.value),placeholder:"Search by name or email...",className:"pl-10 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 h-9 rounded-md"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{size:18,className:"text-muted-foreground"}),e.jsxs("select",{value:h,onChange:s=>P(s.target.value),className:"h-9 px-4 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-md text-sm font-medium outline-none focus:ring-1 focus:ring-[#0078D4] transition-shadow",children:[e.jsx("option",{children:"All"}),O.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-zinc-500 tracking-widest",children:"Total"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-zinc-900 dark:text-white mt-1",children:t.length})]}),O.map(s=>e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-zinc-500 tracking-widest truncate",children:s}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-zinc-900 dark:text-white mt-1",children:t.filter(x=>x.role===s).length})]},s))]}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-zinc-100/50 dark:bg-zinc-800/50 border-b border-zinc-200 dark:border-zinc-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-200 dark:divide-zinc-800",children:v.length>0?v.map(s=>e.jsxs("tr",{onClick:()=>b(s),className:"hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#0078D4]/10 text-[#0078D4] flex items-center justify-center text-xs font-bold shadow-sm",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-zinc-900 dark:text-white",children:s.name}),e.jsxs("p",{className:"text-[10px] text-zinc-500 dark:text-zinc-400",children:["ID: ",s.uid.substring(0,8)]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(S,{size:14}),s.email]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:u("inline-flex px-2.5 py-0.5 rounded text-[10px] font-semibold border",D[s.role]),children:s.role})}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(U,{size:14,className:"text-emerald-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-emerald-600 dark:text-emerald-400",children:"Active"})]})})]},s.uid)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 text-muted-foreground",children:[e.jsx(E,{size:48,className:"opacity-20"}),e.jsx("p",{className:"text-sm font-medium",children:"No members found"})]})})})})]})}),e.jsx("div",{className:"lg:hidden space-y-3",children:v.length>0?v.map(s=>e.jsx("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-md p-4 hover:shadow-sm transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#0078D4]/10 text-[#0078D4] flex items-center justify-center text-sm font-bold shadow-sm shrink-0",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-bold text-foreground truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 truncate flex items-center gap-1 mt-0.5",children:[e.jsx(S,{size:12}),s.email]})]}),g&&e.jsx("button",{onClick:()=>b(s),className:"p-1.5 text-[#0078D4] hover:bg-[#0078D4]/10 rounded-md transition-colors shrink-0",children:e.jsx(se,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:u("inline-flex px-2 py-0.5 rounded text-[10px] font-semibold border",D[s.role]),children:s.role}),e.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400",children:[e.jsx(U,{size:12}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Active"})]})]})]})]})},s.uid)):e.jsxs("div",{className:"bg-card border border-border rounded-md p-12 text-center",children:[e.jsx(E,{size:48,className:"opacity-20 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No members found"})]})})]})}),I&&e.jsx(de,{onClose:()=>w(!1),onSuccess:()=>{w(!1),j()}}),f&&e.jsx(ce,{user:f,onClose:()=>b(null),onUpdate:s=>{q(f.uid,s),b(null)},onDelete:()=>{V(f.uid),b(null)}}),e.jsx(G,{isOpen:!!N,onClose:()=>y(null),onConfirm:$,title:"Deactivate User",message:`Are you sure you want to deactivate ${N?.name}? They will no longer be able to log in.`,isDanger:!0,confirmText:"Deactivate"})]})}function de({onClose:a,onSuccess:o}){const{toast:l}=M(),[t,c]=d.useState({name:"",email:"",password:"",role:"NOC Engineer"}),[i,r]=d.useState(!1),m=async n=>{if(n.preventDefault(),!t.name||!t.email||!t.password){l({variant:"destructive",title:"Missing Information",description:"Please fill in all required fields"});return}if(t.password.length<6){l({variant:"destructive",title:"Weak Password",description:"Password must be at least 6 characters"});return}try{r(!0),await k.register(t),l({title:"Member Added",description:`${t.name} has been added to the team`,className:"bg-emerald-600 text-white border-none"}),o()}catch(h){l({variant:"destructive",title:"Registration Failed",description:h.message})}finally{r(!1)}};return e.jsx(F,{isOpen:!0,onClose:a,title:"Add New Member",description:"Create a new team member account",size:"sm",children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-zinc-900 dark:text-white mb-2",children:"Full Name *"}),e.jsx(z,{value:t.name,onChange:n=>c({...t,name:n.target.value}),placeholder:"John Doe",className:"bg-zinc-100/50 dark:bg-zinc-800/50",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Email Address *"}),e.jsx(z,{type:"email",value:t.email,onChange:n=>c({...t,email:n.target.value}),placeholder:"john@example.com",className:"bg-zinc-100/50 dark:bg-zinc-800/50",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Password *"}),e.jsx(z,{type:"password",value:t.password,onChange:n=>c({...t,password:n.target.value}),placeholder:"Minimum 6 characters",className:"bg-muted/50",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Role *"}),e.jsx("select",{value:t.role,onChange:n=>c({...t,role:n.target.value}),className:"w-full h-10 px-3 bg-muted/50 border border-border rounded-lg text-sm font-medium outline-none focus:ring-2 focus:ring-primary",disabled:i,children:O.map(n=>e.jsx("option",{value:n,children:n},n))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(p,{type:"button",onClick:a,variant:"outline",className:"flex-1",disabled:i,children:"Cancel"}),e.jsx(p,{type:"submit",className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{size:16,className:"animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:16,className:"mr-2"}),"Add Member"]})})]})]})})}function ce({user:a,onClose:o,onUpdate:l,onDelete:t}){const[c,i]=d.useState(!1),[r,m]=d.useState(a.role);return e.jsx(F,{isOpen:!0,onClose:o,title:"Member Details",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 text-primary flex items-center justify-center text-xl font-black shadow-sm",children:a.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:["ID: ",a.uid.substring(0,8)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-500 dark:text-zinc-400 tracking-widest mb-2",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground",children:[e.jsx(S,{size:16,className:"text-muted-foreground"}),a.email]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-muted-foreground tracking-widest mb-2",children:"Role"}),c?e.jsx(ne,{value:r,onChange:m}):e.jsx("span",{className:u("inline-flex px-3 py-1.5 rounded-full text-xs font-bold border",D[a.role]),children:a.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-muted-foreground tracking-widest mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:16,className:"text-emerald-500"}),e.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:"Active"})]})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-800",children:c?e.jsxs(e.Fragment,{children:[e.jsx(p,{onClick:()=>{i(!1),m(a.role)},variant:"outline",className:"flex-1",children:"Cancel"}),e.jsxs(p,{onClick:()=>{l({role:r}),i(!1)},className:"flex-1 bg-emerald-600 text-white hover:bg-emerald-700",children:[e.jsx(te,{size:16,className:"mr-2"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(p,{onClick:()=>i(!0),variant:"outline",className:"flex-1",children:[e.jsx(re,{size:16,className:"mr-2"}),"Edit Role"]}),e.jsxs(p,{onClick:t,variant:"destructive",className:"flex-1",children:[e.jsx(Z,{size:16,className:"mr-2"}),"Deactivate"]})]})})]})})}export{Ne as default};
