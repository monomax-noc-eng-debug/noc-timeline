import{d as je,r as a,z as Wt,a as Gt,j as e,F as ot,X as kt,b as yt,e as H,H as Kn,T as qe,x as Kt,C as Qt,L as Yt,o as Pe,m as It,h as Qn,i as Yn,l as ue,P as K,k as ne,I as fe,q as Xn,f as Xt,V as Zn,n as Jn,D as er,S as tr,g as nr,t as rr,R as sr,v as Et}from"./index-DG8grUyn.js";import{u as ar,i as Rt,F as ir,R as or}from"./useMatches-j8cES2bd.js";import{e as Zt,d as he,a as le,u as lt,f as lr,g as Je,q as At,o as et,n as cr,h as dr,j as Dt,s as tt,k as ur}from"./firebaseConfig-Cp-1Ewx5.js";import{c as pr,t as Ue,m as mr,a as xr,f as ce}from"./format-B568ns5f.js";import{b as ct}from"./addYears-RECKJz7f.js";import{i as hr}from"./isSameMonth-CRYCS6Ki.js";import{p as Fe}from"./parse-Bk6ren_S.js";import{G as fr}from"./gauge-B3agchTH.js";import{C as jt}from"./clock-DWjRkW9L.js";import{A as gr}from"./useBaseQuery-ruIVqelk.js";import{C as _e}from"./check-B3eG3M7V.js";import{G as br}from"./globe-DHBEBFPC.js";import{S as vr}from"./settings-Bdd_4xUN.js";import{T as Ke}from"./trash-2-CREMUFDH.js";import{P as St}from"./plus-B2FRZknz.js";import{C as wr}from"./copy-B3fOTsZv.js";import{f as me,a as nt,p as kr,c as yr,D as jr}from"./DataPreviewPanel-vxnF0fhm.js";import{C as dt}from"./circle-check-BEXeFYoG.js";import{S as Jt}from"./server-D04bux3N.js";import{c as en}from"./configService-CpUaQNct.js";import{L as Sr}from"./layers-C96pBT6a.js";import{S as tn}from"./save-B93v77qj.js";import{c as Nr,B as Re}from"./button-ELzcrGy8.js";import{I as Be}from"./input-CwLelRK2.js";import{R as zr,e as Cr,O as Mr,f as Tr,D as Pr,c as Ir,d as Er,g as Rr,P as ut,a as pt,b as mt,p as _t,C as nn,h as Ar}from"./dialog-D-wP6VTx.js";import{u as Dr,C as rn,P as _r}from"./index-DpJJjFfk.js";import{c as sn,R as Lr,u as xe,A as Or,h as qr,a as Fr,b as Br,F as Vr,C as Hr,d as $r}from"./Combination-BHEGN5e3.js";import{u as Ur}from"./index-DubdEhvx.js";import{C as Nt}from"./chevron-down-DdT0IlJb.js";import{S as an}from"./search-U53RAdtz.js";import{Z as Wr}from"./zap-LTmMFBcD.js";import{T as on,a as ln}from"./tv-DmCSxwSA.js";import{C as Lt}from"./chevron-left-DfFDGi4H.js";import{C as Ot}from"./chevron-right-D-O6HriP.js";import{R as Gr}from"./rotate-ccw-Bqy3VFO0.js";import{E as Kr}from"./eye-off-b4hmqAjG.js";import{E as Qr}from"./eye-CBDQPo72.js";import{L as Yr}from"./layout-grid-D2kJlId3.js";import{F as Xr}from"./funnel-DQyhgKUM.js";import"./addMonths-BfoHT1ak.js";import"./cloud-download-E8KNxlG4.js";import"./index-DenzHOQf.js";const Zr=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],Jr=je("arrow-left-right",Zr);const es=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ts=je("bell",es);const ns=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],rs=je("chevrons-up-down",ns);const ss=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],as=je("eraser",ss);const is=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],os=je("monitor-play",is);const ls=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],zt=je("wand-sparkles",ls);const cs=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],cn=je("wifi",cs);function ds(t,r,n){return pr(t,+Ue(t)+r)}function us(t,r,n){return ds(t,r*mr)}function ps(t){return r=>{const i=(t?Math[t]:Math.trunc)(r);return i===0?0:i}}function ms(t,r){return+Ue(t)-+Ue(r)}function qt(t,r,n){const i=ms(t,r)/xr;return ps(n?.roundingMethod)(i)}function We(t,r){const n=Ue(t,r?.in);return n.setSeconds(0,0),n}function xs(t,r){return+We(t)==+We(r)}function hs(t,r,n){return ct(t,-1,n)}const rt={subscribeMatches:(t,r)=>{let n=At(Je(le,"schedules"),et("startDate","desc"),et("startTime","asc"));return t&&(n=At(Je(le,"schedules"),cr("startDate","==",t),et("startTime","asc"))),dr(n,i=>{const s=i.docs.map(l=>({id:l.id,...l.data()}));r(s)})},createMatch:async t=>{try{const r={...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),hasStartStat:!1,hasEndStat:!1};return await lr(Je(le,"schedules"),r)}catch(r){throw console.error("Error creating match:",r),r}},updateMatch:async(t,r)=>{try{const n=he(le,"schedules",t);await lt(n,{...r,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error updating match:",n),n}},deleteMatch:async t=>{try{await Zt(he(le,"schedules",t))}catch(r){throw console.error("Error deleting match:",r),r}}},fs=(t=new Date)=>{const[r,n]=a.useState(t),i=ce(r,"yyyy-MM-dd"),s=hr(r,new Date),l=ct(r,1),u=a.useMemo(()=>({start:ce(r,"yyyy-MM-dd"),end:ce(l,"yyyy-MM-dd")}),[r,l]),{matches:o,loading:d}=ar(null,u,s),c=a.useMemo(()=>{if(!o.length)return[];const b=ce(r,"yyyy-MM-dd"),P=ce(l,"yyyy-MM-dd");return o.filter(f=>{if(f.startDate===b)return!0;if(f.startDate===P){const[k]=f.startTime.split(":");return parseInt(k,10)<9}return!1})},[o,r,l]),p=Wt(),{toast:m}=Gt(),[x,j]=a.useState(null),[S,h]=a.useState(!1),[g,M]=a.useState(null),[N,A]=a.useState(!1),[O,I]=a.useState({isOpen:!1,id:null}),[E,D]=a.useState(!1),[W,te]=a.useState(""),[U,Q]=a.useState("ALL"),[q,Z]=a.useState(We(new Date)),[_,B]=a.useState(!1),V=a.useRef(new Set);a.useEffect(()=>{const P=setInterval(()=>{const f=new Date;Z(k=>xs(k,f)?k:We(f))},1e3);return()=>clearInterval(P)},[]),a.useEffect(()=>{"Notification"in window&&Notification.permission==="granted"&&B(!0)},[]);const $=async()=>{if(!("Notification"in window))return;await Notification.requestPermission()==="granted"&&B(!0)};a.useEffect(()=>{!_||!s||c.length===0||c.forEach(b=>{if(!b.startTime||b.hasStartStat||V.current.has(b.id))return;const P=b.startDate?Fe(b.startDate,"yyyy-MM-dd",new Date):r,f=Fe(b.startTime,"HH:mm",P),k=qt(f,q);k<=15&&k>=0&&(new Notification("Match Alert",{body:`${b.teamA} vs ${b.teamB} starts in ${k} mins!`,icon:"/vite.svg"}),V.current.add(b.id))})},[c,_,q,r,s]);const G=()=>n(b=>hs(b)),Y=()=>n(b=>ct(b,1)),ie=()=>n(new Date),se=async b=>{A(!0);try{g?(await rt.updateMatch(g.id,b),m({title:"Success",description:"Match updated successfully."})):(await rt.createMatch({...b,startDate:i}),m({title:"Success",description:"Match created successfully."})),p.invalidateQueries({queryKey:["matches"]}),h(!1),M(null)}catch(P){m({variant:"destructive",title:"Error",description:P.message||"Something went wrong."})}finally{A(!1)}},w=async()=>{if(O.id)try{await rt.deleteMatch(O.id),p.invalidateQueries({queryKey:["matches"]}),m({title:"Success",description:"Match deleted successfully."})}catch(b){m({variant:"destructive",title:"Error",description:b.message||"Failed to delete match."})}finally{I({isOpen:!1,id:null})}},T=a.useDeferredValue(W),y=a.useMemo(()=>c.map(b=>{let P="Upcoming",f=null,k=!1,v=!1;if(b.startTime){let C;try{const R=b.startDate?Fe(b.startDate,"yyyy-MM-dd",new Date):r;C=Fe(b.startTime,"HH:mm",R)}catch{C=new Date("Invalid")}if(!isNaN(C)){const R=us(C,2),X=qt(C,q);b.hasEndStat?(P="Finished",v=!0):b.hasStartStat?(P="Live",k=!0):q>=C&&q<=R?(P="Live (Time)",k=!0):q>R?(P="Finished (Time)",v=!0):X<=60&&X>0?f=`${X}m`:f=ce(C,"HH:mm")}}return{...b,statusDisplay:P,countdown:f,isLiveTime:k,isFinished:v}}),[c,q,r]),z=a.useMemo(()=>({total:y.length,live:y.filter(b=>b.isLiveTime).length,finished:y.filter(b=>b.isFinished).length,pending:y.filter(b=>!b.isLiveTime&&!b.isFinished).length}),[y]),L=a.useMemo(()=>y.filter(b=>{const P=T.toLowerCase().trim(),f=!P||(b._searchString||"").includes(P);let k=!0;return U==="LIVE"?k=b.isLiveTime:U==="FINISHED"?k=b.isFinished:U==="UPCOMING"&&(k=!b.isLiveTime&&!b.isFinished),f&&k}),[y,T,U]);return{selectedDate:r,setSelectedDate:n,dateStr:i,matches:L,allMatches:c,stats:z,loading:d,searchQuery:W,setSearchQuery:te,filterType:U,setFilterType:Q,selectedMatch:x,setSelectedMatch:j,isManualModalOpen:S,setIsManualModalOpen:h,editingMatch:g,setEditingMatch:M,saving:N,deleteConfirm:O,setDeleteConfirm:I,isDataPreviewOpen:E,setIsDataPreviewOpen:D,notificationEnabled:_,handlePrevDay:G,handleNextDay:Y,handleGoToday:ie,handleSaveMatch:se,handleDeleteMatch:w,requestNotifyPermission:$}};function gs({form:t,setForm:r,isMultiCdnMode:n,toggleCdnMode:i,cdnList:s,onAdd:l,onRemove:u,onUpdate:o,onAutoFix:d,statType:c,masterConfigs:p={channels:[],cdnOptions:[]},canEdit:m=!0}){const[x,j]=a.useState(!1),S=h=>t.cdn===h;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400",children:[e.jsx(fr,{size:14,className:"text-orange-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Configuration"})]})}),e.jsxs("div",{className:"group bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-sm overflow-hidden flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-zinc-100 dark:divide-zinc-800",children:[e.jsxs("div",{className:"flex-1 p-2 flex items-center gap-3 relative",children:[e.jsx(jt,{size:14,className:"text-zinc-400 shrink-0"}),e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none mb-0.5",children:"Start"}),e.jsx("input",{type:"time",value:t.rangeStart,onChange:h=>r({...t,rangeStart:h.target.value}),disabled:!m,className:"bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none focus:ring-0 w-[60px] h-4 leading-none disabled:opacity-50"})]}),e.jsx(gr,{size:12,className:"text-zinc-300 dark:text-zinc-700"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none mb-0.5",children:["End ",c==="START"?"(+15m)":"(+2h)"]}),e.jsx("input",{type:"time",value:t.rangeEnd,onChange:h=>r({...t,rangeEnd:h.target.value}),disabled:!m,className:"bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none focus:ring-0 w-[60px] h-4 leading-none disabled:opacity-50"})]})]}),d&&m&&e.jsx("button",{onClick:d,title:"Auto Calculate Time",className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-md text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors",children:e.jsx(zt,{size:12})})]}),e.jsxs("div",{className:"flex-[1.5] p-2 flex items-center gap-3 relative",children:[e.jsx(os,{size:14,className:"text-zinc-400 shrink-0"}),e.jsxs("div",{className:"w-full relative",children:[e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none block mb-0.5",children:"Channel Source"}),e.jsx("input",{type:"text",value:t.liveChannel,onChange:h=>r({...t,liveChannel:h.target.value}),onFocus:()=>m&&j(!0),onBlur:()=>setTimeout(()=>j(!1),200),disabled:!m,placeholder:"Select Channel...",className:"w-full bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none focus:ring-0 h-4 leading-none placeholder:text-zinc-300 dark:placeholder:text-zinc-700 disabled:opacity-50"}),x&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-3 max-h-40 overflow-y-auto bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-xl z-50 py-1",children:p.channels.length>0?p.channels.filter(h=>h.toLowerCase().includes((t.liveChannel||"").toLowerCase())).map(h=>e.jsxs("div",{onMouseDown:()=>r({...t,liveChannel:h}),className:"px-3 py-2 hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer text-xs font-medium text-zinc-700 dark:text-zinc-300 flex items-center justify-between group/item",children:[h,t.liveChannel===h&&e.jsx(_e,{size:12,className:"text-orange-500"})]},h)):e.jsx("div",{className:"px-3 py-2 text-xs text-zinc-400 italic",children:"No channels found"})})]})]})]}),e.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-xl p-2 border border-zinc-200/50 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wide pl-1",children:"CDN Distribution"}),e.jsxs("div",{className:"flex bg-zinc-200 dark:bg-zinc-800 rounded-lg p-0.5",children:[e.jsx("button",{onClick:()=>m&&n&&i(),disabled:!m,className:`px-3 py-1 rounded-md text-[10px] font-bold transition-all flex items-center gap-1.5 ${n?"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400":"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm"} ${!m&&"cursor-not-allowed opacity-50"}`,children:"Single"}),e.jsx("button",{onClick:()=>m&&!n&&i(),disabled:!m,className:`px-3 py-1 rounded-md text-[10px] font-bold transition-all flex items-center gap-1.5 ${n?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400"} ${!m&&"cursor-not-allowed opacity-50"}`,children:"Multi-CDN"})]})]}),n?e.jsxs("div",{className:"space-y-1.5",children:[s.map(h=>e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 shadow-sm group",children:[e.jsx("div",{className:"w-[120px] shrink-0 border-r border-zinc-100 dark:border-zinc-700 pr-2",children:e.jsxs("select",{value:h.provider,onChange:g=>o(h.id,"provider",g.target.value),className:"w-full bg-transparent text-[11px] font-bold text-zinc-700 dark:text-zinc-200 outline-none cursor-pointer py-1",children:[e.jsx("option",{value:"Select Provider",children:"Select Provider"}),p.cdnOptions.filter(g=>g.id!=="Multi CDN").map(g=>e.jsx("option",{value:g.id,children:g.label},g.id))]})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(vr,{size:10,className:"absolute left-0 top-1/2 -translate-y-1/2 text-zinc-300 pointer-events-none"}),e.jsx("input",{type:"text",placeholder:"Enter Config Key...",value:h.key||"",onChange:g=>o(h.id,"key",g.target.value),className:"w-full pl-4 bg-transparent text-[11px] font-medium text-zinc-600 dark:text-zinc-300 placeholder:text-zinc-300 outline-none border-none p-0 focus:ring-0"})]}),s.length>1&&e.jsx("button",{onClick:()=>u(h.id),className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-300 hover:text-red-500 transition-all",children:e.jsx(Ke,{size:12})})]},h.id)),e.jsxs("button",{onClick:l,className:"w-full py-1.5 mt-2 rounded-lg border border-dashed border-zinc-300 dark:border-zinc-700 hover:border-orange-300 dark:hover:border-orange-900/50 text-[10px] font-bold text-zinc-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/10 transition-all flex items-center justify-center gap-1",children:[e.jsx(St,{size:10})," Add Provider Layer"]})]}):e.jsx("div",{className:"flex flex-wrap gap-2",children:p.cdnOptions.filter(h=>h.id!=="Multi CDN").map(h=>e.jsxs("button",{onClick:()=>r({...t,cdn:h.id}),className:`group relative px-3 py-1.5 rounded-lg border text-[11px] font-bold transition-all flex items-center gap-2 ${S(h.id)?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 border-zinc-900 dark:border-zinc-100 shadow-md transform scale-[1.02]":"bg-white dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700 hover:border-zinc-300 dark:hover:border-zinc-600 hover:bg-white"}`,children:[e.jsx(br,{size:12,className:S(h.id)?"opacity-100":"opacity-50 group-hover:opacity-100"}),h.label,S(h.id)&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-orange-500 rounded-full border-2 border-white dark:border-zinc-900"})]},h.id))})]})]})}function bs({isOpen:t,onClose:r,data:n,headers:i}){const[s,l]=a.useState(!1);if(!t)return null;const u=async()=>{if(n)try{const o=i.join("	"),d=n.map(p=>Object.values(p).join("	")).join(`
`),c=`${o}
${d}`;await navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)}catch(o){console.error("Failed to copy:",o)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[200] bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:r}),e.jsx("div",{className:"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none",children:e.jsxs("div",{className:"pointer-events-auto bg-white dark:bg-[#0c0c0e] w-full max-w-6xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-slate-100 dark:border-zinc-800 animate-in zoom-in-95 duration-200",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-zinc-800 flex justify-between items-center bg-white dark:bg-zinc-900",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 rounded-xl",children:e.jsx(ot,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Data Preview"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Review data before exporting"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:u,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${s?"bg-emerald-500 text-white shadow-lg shadow-emerald-200":"bg-slate-900 text-white hover:bg-slate-800 shadow-md"}`,children:[s?e.jsx(_e,{size:16}):e.jsx(wr,{size:16}),s?"Copied!":"Copy Data"]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 dark:hover:bg-zinc-800 rounded-lg text-slate-400 hover:text-rose-500 transition-colors",children:e.jsx(kt,{size:20})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar bg-slate-50 dark:bg-[#0c0c0e]",children:!n||n.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 gap-3 min-h-[300px]",children:[e.jsx(ot,{size:48,className:"opacity-20"}),e.jsx("p",{children:"No data available to preview"})]}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-zinc-900/50 sticky top-0 z-10 shadow-sm",children:e.jsx("tr",{children:i.map((o,d)=>e.jsx("th",{className:"px-4 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider whitespace-nowrap border-b border-slate-200 dark:border-zinc-800",children:o},d))})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-zinc-800/50 bg-white dark:bg-zinc-900",children:n.map((o,d)=>e.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-zinc-800/50 transition-colors",children:Object.values(o).map((c,p)=>e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300 whitespace-nowrap border-r border-transparent last:border-0",children:c===null||c===""?e.jsx("span",{className:"text-slate-300",children:"-"}):c},p))},d))})]})}),e.jsxs("div",{className:"px-6 py-3 bg-slate-50 dark:bg-zinc-900 border-t border-slate-200 dark:border-zinc-800 text-xs text-slate-400 flex justify-between",children:[e.jsxs("span",{children:["Total Rows: ",n?n.length:0]}),e.jsx("span",{children:"Tab-separated format ready for Excel/Sheets"})]})]})})]})}const Ne="schedules",ee=(t,r="")=>{if(!t&&t!==0)return{val:"",unit:r};if(typeof t=="object"&&t.val!==void 0)return t;const n=String(t).toLowerCase();let i=parseFloat(n),s=r;return n.endsWith("m")?s="m":n.endsWith("k")?s="k":n.endsWith("gb")?s="GB":n.endsWith("tb")?s="TB":n.endsWith("mb")&&(s="MB"),{val:isNaN(i)?"":i,unit:s}},Ft={ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:"",rangeStart:"",rangeEnd:"",reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},cdn:"AWS",liveChannel:""};function vs(t,r){const[n,i]=a.useState("START"),[s,l]=a.useState(!0),[u,o]=a.useState(!1),[d,c]=a.useState(!1),[p,m]=a.useState(!1),[x,j]=a.useState(Ft),[S,h]=a.useState([]),[g,M]=a.useState(!1),[N,A]=a.useState("Unknown"),O=a.useRef(null),[I,E]=a.useState({isOpen:!1,title:"",message:"",onConfirm:null}),[D,W]=a.useState({show:!1,data:[]}),[te,U]=a.useState({isOpen:!1,data:[]}),Q=Wt(),{currentUser:q}=yt(),{toast:Z}=Gt(),_=a.useCallback((f,k="success")=>{f&&Z({description:f,variant:k})},[Z]),B=t?.id?`draft_stats_${t.id}_${n}`:null,V=a.useCallback(async()=>{if(t?.id){o(!0),O.current=null;try{const f=he(le,Ne,t.id),k=n==="START"?"start_stat":"end_stat",v=he(le,Ne,t.id,"statistics",k),[C,R]=await Promise.all([Dt(f),Dt(v)]),X=C.exists()?C.data():{};let ae={...Ft},J=[],re=!1;if(R.exists()){const F=R.data();ae={...ae,...F,liveChannel:F.liveChannel||X.liveChannel||X.channel||t.channel||"",requestPeak:ee(F.requestPeak,""),muxViewerUniq:ee(F.muxViewerUniq,""),reqPeakMin:ee(F.reqPeakMin,""),reqTotal:ee(F.reqTotal,""),bwPeakGbps:ee(F.bwPeakGbps,""),bandwidth:ee(F.bandwidth,"")},F.cdnDetails?.length>0?(J=F.cdnDetails.map(pe=>({...pe,requestPeak:ee(pe.requestPeak,""),reqPeakMin:ee(pe.reqPeakMin,""),reqTotal:ee(pe.reqTotal,""),bwPeakGbps:ee(pe.bwPeakGbps,""),bandwidth:ee(pe.bandwidth,""),muxViewerUniq:ee(pe.muxViewerUniq,"")})),re=!0):re=F.cdn==="Multi CDN",A(F.reporter||"Unknown")}else{const F=X.cdn||"AWS";re=F==="Multi CDN",ae.cdn=F,ae.liveChannel=X.liveChannel||X.channel||t.channel||"",re?J=[{id:Date.now(),provider:"Select Provider",key:"",reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:""}]:J=[]}const Se=localStorage.getItem(B);if(Se)try{const F=JSON.parse(Se);F.matchId===t.id&&(F.form&&(ae={...ae,...F.form}),F.cdnList&&(J=F.cdnList),F.isMultiCdnMode!==void 0&&(re=F.isMultiCdnMode))}catch(F){console.error("Draft load error",F)}R.exists()||A("Unknown"),j(ae),h(J),M(re),O.current=t.id}catch(f){console.error("Fetch Error:",f),_("โหลดข้อมูลไม่สำเร็จ","error")}finally{o(!1),l(!1)}}},[t,n,_,B]);a.useEffect(()=>{V()},[V]),a.useEffect(()=>{if(!s&&!u&&B&&O.current===t?.id){const f={matchId:t.id,form:x,cdnList:S,isMultiCdnMode:g,timestamp:Date.now()};localStorage.setItem(B,JSON.stringify(f))}},[x,S,g,B,s,u,t?.id]),a.useEffect(()=>{g&&x.liveChannel&&S.length>0&&(!S[0].key||S[0].key.trim()==="")&&h(f=>f.map((k,v)=>v===0?{...k,key:x.liveChannel}:k))},[x.liveChannel,g,S]);const $=()=>{M(f=>!f),!g&&S.length===0&&h([{id:Date.now(),provider:"AWS",key:x.liveChannel||"",reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:""}]),j(f=>({...f,cdn:g?"AWS":"Multi CDN"}))},G=()=>h(f=>[...f,{id:Date.now(),provider:"Select Provider",key:"",reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:""}]),Y=f=>S.length>1&&h(k=>k.filter(v=>v.id!==f)),ie=(f,k,v)=>h(C=>C.map(R=>R.id!==f?R:typeof R[k]=="object"&&R[k]!==null?{...R,[k]:{...R[k],...v}}:{...R,[k]:v})),se=()=>{if(S.length<2)return;const f=S[0];h(k=>k.map((v,C)=>C===0?v:{...v,ecsSport:f.ecsSport,ecsEntitlement:f.ecsEntitlement,apiHuawei:f.apiHuawei})),_("Autofilled System Health values","success")},w=f=>{h(k=>k.map(v=>v.id!==f?v:{...v,ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:""})),_("Cleared row data","default")},T=f=>{if(!f||!Array.isArray(f)||f.length===0)return;const k=f.map(v=>({id:Date.now()+Math.random(),provider:v.provider||"Select Provider",key:v.key||"",ecsSport:v.ecsSport||"",ecsEntitlement:v.ecsEntitlement||"",apiHuawei:v.apiHuawei||"",requestPeak:ee(v.requestPeak),reqPeakMin:ee(v.reqPeakMin),reqTotal:ee(v.reqTotal),bwPeakGbps:ee(v.bwPeakGbps),bandwidth:ee(v.bandwidth),muxViewerUniq:ee(v.muxViewerUniq),muxScore:v.muxScore||""}));k.length>0&&(h(k),M(!0),U({isOpen:!1,data:[]}),_(`Imported ${k.length} rows successfully`,"success"))},y=a.useCallback((f=!1)=>{let k=t?.startTime||t?.start_time||t?.time;if(!k){f&&_("Time not found","error");return}try{const C=(J=>{let re=String(J).toLowerCase().trim().replace(".",":"),Se=re.replace(/[a-z]/g,"").trim(),[F,pe]=Se.split(":"),Oe=parseInt(F,10),Gn=parseInt(pe||"0",10);return isNaN(Oe)?null:(re.includes("pm")&&Oe<12&&(Oe+=12),{h:Oe,m:Gn})})(k);if(!C)return;const R=(J,re,Se)=>{let F=J*60+re+Se;return F=(F%1440+1440)%1440,`${String(Math.floor(F/60)).padStart(2,"0")}:${String(F%60).padStart(2,"0")}`},X=R(C.h,C.m,0),ae=R(C.h,C.m,n==="START"?15:120);O.current===t?.id&&j(J=>J.rangeStart&&J.rangeEnd?J:{...J,rangeStart:X,rangeEnd:ae})}catch{}},[t,n,_]);a.useEffect(()=>{!u&&!s&&t&&y()},[u,s,t,n,y]);const z=a.useCallback(()=>{const f=[];(!x.rangeStart||!x.rangeEnd)&&f.push("กรุณาระบุเวลา Start/End"),x.liveChannel||f.push("กรุณาระบุ Channel");const k=v=>{const C=typeof v=="object"?v?.val:v;return C===""||C===null||C===void 0};return g?(S.length===0&&f.push("At least one CDN provider is required"),S.forEach((v,C)=>{const R=`CDN #${C+1}`;(!v.provider||v.provider==="Select Provider")&&f.push(`${R}: Provider required`),k(v.ecsSport)&&f.push(`${R}: ECS Sport required`),k(v.muxScore)&&f.push(`${R}: Score required`)})):(k(x.ecsSport)&&f.push("ECS Sport required"),k(x.muxScore)&&f.push("Smoothness Score required")),f.length>0?(_(f[0],"error"),!1):!0},[x,S,g,_]);return{state:{statType:n,loading:s,fetching:u,saving:d,isSuccess:p,form:x,cdnList:S,isMultiCdnMode:g,reporterName:N,confirmModal:I,preview:D,importModal:te},actions:{setStatType:i,setForm:j,toggleCdnMode:$,handleAddCdn:G,handleRemoveCdn:Y,handleUpdateCdnRow:ie,handleAutoFixTime:()=>y(!0),handleSmartSave:async f=>{if(t?.id&&z()){c(!0);try{const k=n==="START"?"start_stat":"end_stat",v={...x,cdn:g?"Multi CDN":x.cdn,cdnDetails:g?S:null,updatedAt:tt(),statType:n,reporter:typeof q=="object"?q?.name:q||"Unknown"};await ur(he(le,Ne,t.id,"statistics",k),v),await lt(he(le,Ne,t.id),{[n==="START"?"hasStartStat":"hasEndStat"]:!0,[n==="START"?"startStats":"endStats"]:v,liveChannel:x.liveChannel,channel:x.liveChannel,updatedAt:tt()}),localStorage.removeItem(B),Q.invalidateQueries({queryKey:["matches"]}),_("บันทึกข้อมูลเรียบร้อยแล้ว","success"),m(!0),setTimeout(()=>m(!1),2e3),f&&f()}catch{_("บันทึกข้อมูลล้มเหลว","error")}finally{c(!1)}}},requestDelete:()=>{E({isOpen:!0,title:`Reset ${n}?`,message:"Sure to delete?",isDanger:!0,onConfirm:async()=>{E(f=>({...f,isOpen:!1})),c(!0);try{const f=n==="START"?"start_stat":"end_stat";await Zt(he(le,Ne,t.id,"statistics",f)),await lt(he(le,Ne,t.id),{[n==="START"?"hasStartStat":"hasEndStat"]:!1,[n==="START"?"startStats":"endStats"]:null,updatedAt:tt()}),localStorage.removeItem(B),Q.invalidateQueries({queryKey:["matches"]}),_("Reset Success","success"),setTimeout(r,1e3)}catch{_("Reset Failed","error")}finally{c(!1)}}})},handlePreview:()=>{const f=v=>{if(!v)return 0;if(typeof v=="object"&&v.val!==void 0){const C=parseFloat(v.val||0),R=(v.unit||"").toLowerCase();return R==="m"?C*1e6:R==="b"?C*1e9:R==="k"?C*1e3:C}return kr(v)},k=v=>{const C=v?.val||0,R=v?.unit||"";return yr(C,R===""?"GB":R)?.toLocaleString("en-US",{maximumFractionDigits:4})};try{const v={no:"1",league:t?.league||"-",title:t?.title||t?.match||"-",time:t?.startTime||"-",ecsSport:nt(x.ecsSport,2),ecsEnt:nt(x.ecsEntitlement,2),api:nt(x.apiHuawei,2),reqPeak:me(f(x.requestPeak)),viewers:me(f(x.muxViewerUniq)),score:x.muxScore,start:x.rangeStart||"-",end:x.rangeEnd||"-"},C=g&&S.length>0?S.map(R=>[v.no,v.league,v.title,v.time,v.ecsSport,v.ecsEnt,v.api,me(f(R.requestPeak)),R.provider||"-",R.key||"-",me(f(R.reqPeakMin)),me(f(R.reqTotal)),k(R.bwPeakGbps),k(R.bandwidth),me(f(R.muxViewerUniq)),v.score,v.start,v.end]):[[v.no,v.league,v.title,v.time,v.ecsSport,v.ecsEnt,v.api,me(f(x.requestPeak)),x.cdn||"-",x.liveChannel||"-",me(f(x.reqPeakMin)),me(f(x.reqTotal)),k(x.bwPeakGbps),k(x.bandwidth),v.viewers,v.score,v.start,v.end]];W({show:!0,data:C})}catch{_("Preview Error","error")}},closeConfirm:()=>E(f=>({...f,isOpen:!1})),closePreview:()=>W(f=>({...f,show:!1})),handleAutofillSystemHealth:se,handleClearCdnRow:w,openImportModal:f=>U({isOpen:!0,data:f}),closeImportModal:()=>U({isOpen:!1,data:[]}),handleApplyImport:T}}}function de({label:t,value:r,unit:n,onChange:i,onUnitChange:s,placeholder:l,color:u="blue",type:o="text",tooltip:d,compact:c=!1,max:p,readOnly:m=!1,thresholds:x,thresholdType:j="lower-is-bad"}){let S=u,h=null;if(x&&r!==""&&r!==null&&r!==void 0){const I=parseFloat(r);isNaN(I)||(j==="higher-is-bad"?I>=x.critical?(S="red",h=qe):I>=x.warning?(S="orange",h=qe):(S="emerald",h=dt):I<=x.critical?(S="red",h=qe):I<=x.warning?(S="orange",h=qe):(S="emerald",h=dt))}const g=I=>{if(!m){if(p!==void 0&&I!==""){const E=parseFloat(I);if(!isNaN(E)&&E>p){i(p.toString());return}if(E<0){i("0");return}}i(I)}},M={blue:{bg:"bg-blue-50/50 dark:bg-blue-900/10",border:"border-blue-100/50 dark:border-blue-900/30",text:"text-blue-600 dark:text-blue-400",accent:"bg-blue-500",glow:"shadow-blue-500/10"},emerald:{bg:"bg-emerald-50/50 dark:bg-emerald-900/10",border:"border-emerald-100/50 dark:border-emerald-900/30",text:"text-emerald-600 dark:text-emerald-400",accent:"bg-emerald-500",glow:"shadow-emerald-500/10"},orange:{bg:"bg-orange-50/50 dark:bg-orange-900/10",border:"border-orange-100/50 dark:border-orange-900/30",text:"text-orange-600 dark:text-orange-400",accent:"bg-orange-500",glow:"shadow-orange-500/10"},purple:{bg:"bg-purple-50/50 dark:bg-purple-900/10",border:"border-purple-100/50 dark:border-purple-900/30",text:"text-purple-600 dark:text-purple-400",accent:"bg-purple-500",glow:"shadow-purple-500/10"},violet:{bg:"bg-violet-50/50 dark:bg-violet-900/10",border:"border-violet-100/50 dark:border-violet-900/30",text:"text-violet-600 dark:text-violet-400",accent:"bg-violet-500",glow:"shadow-violet-500/10"},pink:{bg:"bg-pink-50/50 dark:bg-pink-900/10",border:"border-pink-100/50 dark:border-pink-900/30",text:"text-pink-600 dark:text-pink-400",accent:"bg-pink-500",glow:"shadow-pink-500/10"},cyan:{bg:"bg-cyan-50/50 dark:bg-cyan-900/10",border:"border-cyan-100/50 dark:border-cyan-900/30",text:"text-cyan-600 dark:text-cyan-400",accent:"bg-cyan-500",glow:"shadow-cyan-500/10"},red:{bg:"bg-red-50/50 dark:bg-red-900/10",border:"border-red-100/50 dark:border-red-900/30",text:"text-red-600 dark:text-red-400",accent:"bg-red-500",glow:"shadow-red-500/10"}},N=M[S]||M.blue,O=(()=>{if(!r||isNaN(r))return null;const I=parseFloat(r);if(s){if(!n||n==="raw")return I.toLocaleString();let E=I,D="";switch(n){case"TB":E=I*1024,D="GB";break;case"MB":E=I/1024,D="GB";break;case"KB":E=I/(1024*1024),D="GB";break;case"GB":E=I,D="GB";break;case"k":E=I*1e3,D="";break;case"m":E=I*1e6,D="";break;default:E=I}return D?`${E.toLocaleString(void 0,{maximumFractionDigits:2})} ${D}`:E.toLocaleString()}return null})();return e.jsxs("div",{className:H("relative group rounded-2xl border transition-all duration-300",N.border,N.bg,c?"p-3":"p-4","hover:ring-1 hover:ring-current/10 shadow-sm",N.glow,m&&"opacity-80 grayscale-[0.3]"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:H("font-black uppercase tracking-[0.15em] leading-none truncate pr-2 flex items-center gap-1.5",c?"text-[8px]":"text-[9px]","text-zinc-500 dark:text-zinc-400"),children:[h&&e.jsx(h,{size:10,className:N.text}),t]}),d&&e.jsx(Kn,{size:10,className:"text-zinc-300 cursor-help"})]}),e.jsxs("div",{className:H("flex items-center rounded-xl overflow-hidden bg-white dark:bg-zinc-950 border border-zinc-100 dark:border-zinc-800/50 transition-all",!m&&"focus-within:ring-2 focus-within:ring-offset-1 dark:focus-within:ring-offset-zinc-950",!m&&N.text.replace("text-","focus-within:ring-"),c?"h-10":"h-12"),children:[e.jsx("input",{type:o==="percentage"?"number":o,step:"any",value:r,onChange:I=>g(I.target.value),readOnly:m,placeholder:l||"0",className:H("flex-1 bg-transparent border-none outline-none px-3 font-mono font-black tabular-nums transition-colors min-w-0","placeholder:text-zinc-300 dark:placeholder:text-zinc-800",c?"text-sm":"text-base","dark:text-white",m&&"cursor-not-allowed text-zinc-500",x&&S!=="emerald"&&N.text)}),s?e.jsxs("select",{value:n||"",onChange:I=>!m&&s(I.target.value),disabled:m,className:"h-full w-[60px] shrink-0 bg-zinc-50 dark:bg-zinc-900 border-l border-zinc-100 dark:border-zinc-800 px-1 text-[9px] font-black uppercase text-zinc-500 dark:text-zinc-400 outline-none cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-center disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Raw"}),e.jsxs("optgroup",{label:"Count",className:"dark:bg-zinc-900",children:[e.jsx("option",{value:"k",children:"k"}),e.jsx("option",{value:"m",children:"m"})]}),e.jsxs("optgroup",{label:"Data",className:"dark:bg-zinc-900",children:[e.jsx("option",{value:"GB",children:"GB"}),e.jsx("option",{value:"TB",children:"TB"}),e.jsx("option",{value:"MB",children:"MB"}),e.jsx("option",{value:"KB",children:"KB"})]})]}):o==="percentage"?e.jsx("div",{className:"h-full px-3 flex items-center bg-zinc-50 dark:bg-zinc-900 border-l border-zinc-100 dark:border-zinc-800 shrink-0",children:e.jsx("span",{className:"text-[10px] font-black text-zinc-400",children:"%"})}):null]}),O&&e.jsxs("div",{className:"mt-1.5 flex items-center justify-end gap-1 px-1",children:[e.jsx("span",{className:"text-[7px] font-black text-zinc-300 uppercase",children:"Val"}),e.jsx("span",{className:H("text-[9px] font-black tracking-tight",N.text),children:O})]})]})}const Ct=({item:t,index:r,icon:n,onRemove:i,onClear:s,isRemovable:l})=>{const u=n;return e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-zinc-100 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-zinc-900 dark:bg-zinc-100 dark:text-black text-white flex items-center justify-center shadow-lg",children:e.jsx(u,{size:14})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-zinc-900 dark:text-white uppercase tracking-[0.2em]",children:t.provider||`Provider ${r+1}`}),e.jsx("p",{className:"text-[9px] text-zinc-400 font-bold uppercase tracking-widest",children:t.key||"Universal Node"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsx("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-all",title:"Clear Data",children:e.jsx(as,{size:14})}),l&&e.jsx("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-all",children:e.jsx(Ke,{size:16})})]})]})},Mt=({onClick:t})=>e.jsxs("button",{onClick:t,className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800/50 rounded-2xl flex justify-center items-center gap-2 text-zinc-400 font-black text-[10px] uppercase tracking-[0.2em] hover:text-blue-500 hover:border-blue-400 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all active:scale-[0.98]",children:[e.jsx(St,{size:14})," Add Provider Layer"]}),Me=(t,r)=>({...t,val:r}),Te=(t,r)=>({...t,unit:r}),dn="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",ws=({data:t,onChange:r,isMulti:n,cdnList:i,onUpdateCdn:s,onRemoveCdn:l,onAddCdn:u,onAutofill:o,onClearRow:d,canEdit:c=!0})=>{const p=(m,x)=>e.jsxs("div",{className:dn,children:[e.jsx(de,{label:"ECS Sport",value:m.ecsSport,onChange:j=>x("ecsSport",j),type:"percentage",color:"blue",max:100,thresholdType:"higher-is-bad",thresholds:{warning:80,critical:95},readOnly:!c}),e.jsx(de,{label:"ECS Entitlement",value:m.ecsEntitlement,onChange:j=>x("ecsEntitlement",j),type:"percentage",color:"purple",max:100,thresholdType:"higher-is-bad",thresholds:{warning:80,critical:95},readOnly:!c}),e.jsx(de,{label:"API Huawei",value:m.apiHuawei,onChange:j=>x("apiHuawei",j),type:"percentage",color:"orange",max:100,thresholdType:"higher-is-bad",thresholds:{warning:80,critical:95},readOnly:!c}),e.jsx(de,{label:"WWW & API REQ",value:m.requestPeak?.val,unit:m.requestPeak?.unit,onChange:j=>x("requestPeak",Me(m.requestPeak,j)),onUnitChange:j=>x("requestPeak",Te(m.requestPeak,j)),type:"number",color:"emerald",compact:!0,readOnly:!c})]});return n?e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.length>1&&c&&e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition-colors",children:[e.jsx(zt,{size:12})," Autofill System Health"]})}),i.map((m,x)=>e.jsxs("div",{className:"group",children:[e.jsx(Ct,{item:m,index:x,icon:Jt,onRemove:c?()=>l(m.id):null,onClear:c?()=>d(m.id):null,isRemovable:c&&i.length>1}),p(m,(j,S)=>s(m.id,j,S))]},m.id)),c&&e.jsx(Mt,{onClick:u})]}):e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:p(t,r)})},ks=({data:t,onChange:r,isMulti:n,cdnList:i,onUpdateCdn:s,onRemoveCdn:l,onAddCdn:u,onClearRow:o,canEdit:d=!0})=>{const c=(p,m)=>e.jsxs("div",{className:dn,children:[e.jsx(de,{label:"Req Peak",value:p.reqPeakMin?.val,unit:p.reqPeakMin?.unit,onChange:x=>m("reqPeakMin",Me(p.reqPeakMin,x)),onUnitChange:x=>m("reqPeakMin",Te(p.reqPeakMin,x)),type:"number",color:"blue",compact:!0,readOnly:!d}),e.jsx(de,{label:"Req Total",value:p.reqTotal?.val,unit:p.reqTotal?.unit,onChange:x=>m("reqTotal",Me(p.reqTotal,x)),onUnitChange:x=>m("reqTotal",Te(p.reqTotal,x)),type:"number",color:"cyan",compact:!0,readOnly:!d}),e.jsx(de,{label:"BW Peak",value:p.bwPeakGbps?.val,unit:p.bwPeakGbps?.unit,onChange:x=>m("bwPeakGbps",Me(p.bwPeakGbps,x)),onUnitChange:x=>m("bwPeakGbps",Te(p.bwPeakGbps,x)),type:"number",color:"red",compact:!0,readOnly:!d}),e.jsx(de,{label:"BW Total",value:p.bandwidth?.val,unit:p.bandwidth?.unit,onChange:x=>m("bandwidth",Me(p.bandwidth,x)),onUnitChange:x=>m("bandwidth",Te(p.bandwidth,x)),type:"number",color:"orange",compact:!0,readOnly:!d})]});return n?e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.map((p,m)=>e.jsxs("div",{className:"group",children:[e.jsx(Ct,{item:p,index:m,icon:cn,onRemove:d?()=>l(p.id):null,onClear:d?()=>o(p.id):null,isRemovable:d&&i.length>1}),c(p,(x,j)=>s(p.id,x,j))]},p.id)),d&&e.jsx(Mt,{onClick:u})]}):e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:c(t,r)})},ys=({data:t,onChange:r,isMulti:n,cdnList:i,onUpdateCdn:s,onRemoveCdn:l,onAddCdn:u,onClearRow:o,canEdit:d=!0})=>{const c=(p,m)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(de,{label:"Live Viewers",value:p.muxViewerUniq?.val,unit:p.muxViewerUniq?.unit,onChange:x=>m("muxViewerUniq",Me(p.muxViewerUniq,x)),onUnitChange:x=>m("muxViewerUniq",Te(p.muxViewerUniq,x)),type:"number",color:"purple",compact:!0,readOnly:!d}),e.jsx(de,{label:"Smoothness Score",value:p.muxScore,onChange:x=>m("muxScore",x),type:"number",color:"pink",max:100,thresholdType:"lower-is-bad",thresholds:{warning:80,critical:60},readOnly:!d})]});return n?e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.map((p,m)=>e.jsxs("div",{className:"group bg-zinc-50 dark:bg-zinc-900/40 p-5 rounded-3xl border border-zinc-100 dark:border-zinc-800/50",children:[e.jsx(Ct,{item:p,index:m,icon:Kt,onRemove:d?()=>l(p.id):null,onClear:d?()=>o(p.id):null,isRemovable:d&&i.length>1}),c(p,(x,j)=>s(p.id,x,j))]},p.id)),d&&e.jsx(Mt,{onClick:u})]}):e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:c(t,r)})},js=()=>e.jsxs("div",{className:"w-full max-w-7xl mx-auto space-y-6 animate-pulse p-6",children:[e.jsx("div",{className:"h-40 rounded-[2rem] bg-zinc-100 dark:bg-zinc-800/50"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64 rounded-[2rem] bg-zinc-100 dark:bg-zinc-800/50"}),e.jsx("div",{className:"h-64 rounded-[2rem] bg-zinc-100 dark:bg-zinc-800/50"})]})]}),Ve=({icon:t,title:r,iconColor:n,children:i,className:s=""})=>e.jsxs("div",{className:`bg-white dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800/50 rounded-[2rem] shadow-sm overflow-hidden transition-all hover:shadow-md ${s}`,children:[(t||r)&&e.jsx("div",{className:"px-6 py-5 border-b border-zinc-50 dark:border-zinc-800/50 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[t&&e.jsx("div",{className:`p-2 rounded-xl bg-zinc-50 dark:bg-zinc-800 ${n}`,children:e.jsx(t,{size:18})}),e.jsx("h3",{className:"text-sm font-black text-zinc-900 dark:text-zinc-100 uppercase tracking-widest",children:r})]})}),e.jsx("div",{className:"p-6",children:i})]});function Ss({isOpen:t,onClose:r,matchData:n,canEdit:i}){const{state:s,actions:l}=vs(n,r),[u,o]=a.useState({channels:[],cdnOptions:[]});if(a.useEffect(()=>t?en.subscribeConfigs(o):void 0,[t]),!t)return null;const d=n?.isLiveTime||n?.hasStartStat&&!n?.hasEndStat;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed z-[200]",children:e.jsx(Qt,{isOpen:s.confirmModal.isOpen,onClose:l.closeConfirm,...s.confirmModal})}),e.jsx(bs,{isOpen:s.preview.show,onClose:l.closePreview,data:s.preview.data,headers:["#","League","Match","Time","ECS Sport","ECS Entitlement","API Huawei","WWW & API Request","CDN","Key","Req Peak","Req Total","BW Peak","BW Total","Viewers","Score","Start","End"]}),e.jsx("div",{className:"fixed inset-0 z-[100] bg-zinc-950/60 backdrop-blur-md transition-opacity duration-300",onClick:s.loading?void 0:r}),e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-0 sm:p-6 pointer-events-none",children:e.jsxs("div",{className:"pointer-events-auto w-full h-full sm:h-[90vh] sm:max-w-7xl bg-white dark:bg-[#050505] sm:rounded-[2.5rem] shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-300 border border-zinc-200 dark:border-zinc-800",onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:"shrink-0 bg-white dark:bg-zinc-900/50 border-b border-zinc-50 dark:border-zinc-800/50 z-20 backdrop-blur-md",children:e.jsxs("div",{className:"px-6 py-5 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1.5",children:[d?e.jsxs("span",{className:"inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-rose-500 text-white shadow-lg shadow-rose-500/30",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]})," LIVE"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-zinc-100 text-zinc-500 dark:bg-zinc-800 dark:text-zinc-400 border border-zinc-200 dark:border-zinc-700",children:[e.jsx(jt,{size:12})," ",n?.startTime||"--:--"]}),e.jsxs("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${s.statType==="START"?"bg-blue-50 text-blue-600 border-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800/50":"bg-purple-50 text-purple-600 border-purple-100 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800/50"}`,children:[s.statType," Phase"]})]}),e.jsx("h2",{className:"text-xl font-black text-zinc-900 dark:text-white tracking-tight truncate",children:n?.teamA&&n?.teamB?e.jsxs("span",{className:"flex items-center gap-2",children:[n.teamA," ",e.jsx("span",{className:"text-zinc-300 dark:text-zinc-800 italic font-medium",children:"vs"})," ",n.teamB]}):n?.title||"Match Operational Record"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:l.toggleCdnMode,className:"hidden md:flex h-11 px-5 items-center gap-2 bg-zinc-50 dark:bg-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-700 border border-zinc-100 dark:border-zinc-700 rounded-xl text-[10px] font-black uppercase tracking-widest text-zinc-600 dark:text-zinc-300 transition-all active:scale-95",children:[e.jsx(Sr,{size:14,className:s.isMultiCdnMode?"text-blue-500":"text-zinc-400"}),e.jsx("span",{children:s.isMultiCdnMode?"Multi-CDN":"Single"})]}),e.jsx("button",{onClick:()=>l.setStatType(s.statType==="START"?"END":"START"),className:"h-11 w-11 flex items-center justify-center rounded-xl bg-zinc-50 dark:bg-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-700 text-zinc-500 border border-zinc-100 dark:border-zinc-700 transition-all active:scale-95",title:"Switch Phase",children:e.jsx(Jr,{size:18})})]}),e.jsx("div",{className:"w-px h-6 bg-zinc-200 dark:bg-zinc-800 mx-1"}),e.jsx("button",{onClick:r,className:"h-11 w-11 flex items-center justify-center rounded-xl bg-zinc-900 dark:bg-white text-white dark:text-black shadow-lg hover:scale-105 active:scale-90 transition-all",children:e.jsx(kt,{size:20,strokeWidth:2.5})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-[#fafafa] dark:bg-[#050505] space-y-8",children:s.fetching?e.jsx(js,{}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx(Ve,{className:"shadow-sm border-none bg-zinc-50 dark:bg-zinc-900/30",children:e.jsx(gs,{form:s.form,setForm:l.setForm,isMultiCdnMode:s.isMultiCdnMode,toggleCdnMode:l.toggleCdnMode,cdnList:s.cdnList,onAdd:l.handleAddCdn,onRemove:l.handleRemoveCdn,onUpdate:l.handleUpdateCdnRow,onAutoFix:l.handleAutoFixTime,statType:s.statType,masterConfigs:u,canEdit:i})}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(Ve,{title:"System Health",icon:Jt,iconColor:"text-blue-500 bg-blue-50 dark:bg-blue-900/30",children:e.jsx(ws,{data:s.form,onChange:(c,p)=>l.setForm({...s.form,[c]:p}),isMulti:s.isMultiCdnMode,cdnList:s.cdnList,onUpdateCdn:l.handleUpdateCdnRow,onAddCdn:l.handleAddCdn,onRemoveCdn:l.handleRemoveCdn,canEdit:i})}),e.jsx(Ve,{title:"Traffic & Bandwidth",icon:cn,iconColor:"text-rose-500 bg-rose-50 dark:bg-rose-900/30",children:e.jsx(ks,{data:s.form,onChange:(c,p)=>l.setForm({...s.form,[c]:p}),isMulti:s.isMultiCdnMode,cdnList:s.cdnList,onUpdateCdn:l.handleUpdateCdnRow,onAddCdn:l.handleAddCdn,onRemoveCdn:l.handleRemoveCdn,canEdit:i})}),e.jsx(Ve,{title:"Audience & Engagement",icon:Kt,iconColor:"text-violet-500 bg-violet-50 dark:bg-violet-900/30",children:e.jsx(ys,{data:s.form,onChange:(c,p)=>l.setForm({...s.form,[c]:p}),isMulti:s.isMultiCdnMode,cdnList:s.cdnList,onUpdateCdn:l.handleUpdateCdnRow,onAddCdn:l.handleAddCdn,onRemoveCdn:l.handleRemoveCdn,canEdit:i})})]})]})}),e.jsx("div",{className:"shrink-0 p-6 bg-white dark:bg-[#0a0a0a] border-t border-zinc-100 dark:border-zinc-900 transition-all",children:e.jsxs("div",{className:"flex justify-between items-center max-w-7xl mx-auto gap-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:l.requestDelete,disabled:s.loading,className:"group flex items-center gap-2 px-4 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest text-zinc-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all disabled:opacity-30",children:[e.jsx(Ke,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Flush Data"})]}),e.jsxs("button",{onClick:l.handlePreview,disabled:s.loading,className:"group flex items-center gap-2 px-4 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all disabled:opacity-30",children:[e.jsx(ot,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Preview"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-1 justify-end",children:[e.jsx("button",{onClick:r,disabled:s.loading,className:"px-8 py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"Dismiss"}),i&&e.jsxs("button",{onClick:()=>l.handleSmartSave(),disabled:s.loading||s.isSuccess,className:`flex-1 sm:flex-none h-14 px-10 rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 shadow-2xl transition-all active:scale-95 ${s.isSuccess?"bg-emerald-500 text-white shadow-emerald-500/30":"bg-zinc-900 dark:bg-white text-white dark:text-black shadow-zinc-900/20 dark:shadow-white/10"} ${s.loading?"opacity-50 cursor-not-allowed cursor-wait":""}`,children:[s.loading?e.jsx(Yt,{size:18,className:"animate-spin"}):s.isSuccess?e.jsx(_e,{size:18,strokeWidth:3}):e.jsx(tn,{size:18}),e.jsx("span",{children:s.loading?"Executing...":s.isSuccess?"Finalized":"Commit Changes"})]})]})]})})]})})]})}var Ns=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zs=Ns.reduce((t,r)=>{const n=Nr(`Primitive.${r}`),i=a.forwardRef((s,l)=>{const{asChild:u,...o}=s,d=u?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...o,ref:l})});return i.displayName=`Primitive.${r}`,{...t,[r]:i}},{}),Cs="Label",un=a.forwardRef((t,r)=>e.jsx(zs.label,{...t,ref:r,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));un.displayName=Cs;var Ms=un;function pn({className:t,...r}){return e.jsx(Ms,{"data-slot":"label",className:H("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}function Bt(t,[r,n]){return Math.min(n,Math.max(r,t))}function Ts(t){const r=Ps(t),n=a.forwardRef((i,s)=>{const{children:l,...u}=i,o=a.Children.toArray(l),d=o.find(Es);if(d){const c=d.props.children,p=o.map(m=>m===d?a.Children.count(c)>1?a.Children.only(null):a.isValidElement(c)?c.props.children:null:m);return e.jsx(r,{...u,ref:s,children:a.isValidElement(c)?a.cloneElement(c,void 0,p):null})}return e.jsx(r,{...u,ref:s,children:l})});return n.displayName=`${t}.Slot`,n}function Ps(t){const r=a.forwardRef((n,i)=>{const{children:s,...l}=n;if(a.isValidElement(s)){const u=As(s),o=Rs(l,s.props);return s.type!==a.Fragment&&(o.ref=i?Pe(i,u):u),a.cloneElement(s,o)}return a.Children.count(s)>1?a.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Is=Symbol("radix.slottable");function Es(t){return a.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Is}function Rs(t,r){const n={...r};for(const i in r){const s=t[i],l=r[i];/^on[A-Z]/.test(i)?s&&l?n[i]=(...o)=>{const d=l(...o);return s(...o),d}:s&&(n[i]=s):i==="style"?n[i]={...s,...l}:i==="className"&&(n[i]=[s,l].filter(Boolean).join(" "))}return{...t,...n}}function As(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ds=[" ","Enter","ArrowUp","ArrowDown"],_s=[" ","Enter"],we="Select",[Qe,Ye,Ls]=Yn(we),[Ie]=Qn(we,[Ls,sn]),Xe=sn(),[Os,be]=Ie(we),[qs,Fs]=Ie(we),mn=t=>{const{__scopeSelect:r,children:n,open:i,defaultOpen:s,onOpenChange:l,value:u,defaultValue:o,onValueChange:d,dir:c,name:p,autoComplete:m,disabled:x,required:j,form:S}=t,h=Xe(r),[g,M]=a.useState(null),[N,A]=a.useState(null),[O,I]=a.useState(!1),E=Dr(c),[D,W]=It({prop:i,defaultProp:s??!1,onChange:l,caller:we}),[te,U]=It({prop:u,defaultProp:o,onChange:d,caller:we}),Q=a.useRef(null),q=g?S||!!g.closest("form"):!0,[Z,_]=a.useState(new Set),B=Array.from(Z).map(V=>V.props.value).join(";");return e.jsx(Lr,{...h,children:e.jsxs(Os,{required:j,scope:r,trigger:g,onTriggerChange:M,valueNode:N,onValueNodeChange:A,valueNodeHasChildren:O,onValueNodeHasChildrenChange:I,contentId:xe(),value:te,onValueChange:U,open:D,onOpenChange:W,dir:E,triggerPointerDownPosRef:Q,disabled:x,children:[e.jsx(Qe.Provider,{scope:r,children:e.jsx(qs,{scope:t.__scopeSelect,onNativeOptionAdd:a.useCallback(V=>{_($=>new Set($).add(V))},[]),onNativeOptionRemove:a.useCallback(V=>{_($=>{const G=new Set($);return G.delete(V),G})},[]),children:n})}),q?e.jsxs(Dn,{"aria-hidden":!0,required:j,tabIndex:-1,name:p,autoComplete:m,value:te,onChange:V=>U(V.target.value),disabled:x,form:S,children:[te===void 0?e.jsx("option",{value:""}):null,Array.from(Z)]},B):null]})})};mn.displayName=we;var xn="SelectTrigger",hn=a.forwardRef((t,r)=>{const{__scopeSelect:n,disabled:i=!1,...s}=t,l=Xe(n),u=be(xn,n),o=u.disabled||i,d=ue(r,u.onTriggerChange),c=Ye(n),p=a.useRef("touch"),[m,x,j]=Ln(h=>{const g=c().filter(A=>!A.disabled),M=g.find(A=>A.value===u.value),N=On(g,h,M);N!==void 0&&u.onValueChange(N.value)}),S=h=>{o||(u.onOpenChange(!0),j()),h&&(u.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return e.jsx(Or,{asChild:!0,...l,children:e.jsx(K.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":_n(u.value)?"":void 0,...s,ref:d,onClick:ne(s.onClick,h=>{h.currentTarget.focus(),p.current!=="mouse"&&S(h)}),onPointerDown:ne(s.onPointerDown,h=>{p.current=h.pointerType;const g=h.target;g.hasPointerCapture(h.pointerId)&&g.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(S(h),h.preventDefault())}),onKeyDown:ne(s.onKeyDown,h=>{const g=m.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&x(h.key),!(g&&h.key===" ")&&Ds.includes(h.key)&&(S(),h.preventDefault())})})})});hn.displayName=xn;var fn="SelectValue",gn=a.forwardRef((t,r)=>{const{__scopeSelect:n,className:i,style:s,children:l,placeholder:u="",...o}=t,d=be(fn,n),{onValueNodeHasChildrenChange:c}=d,p=l!==void 0,m=ue(r,d.onValueNodeChange);return fe(()=>{c(p)},[c,p]),e.jsx(K.span,{...o,ref:m,style:{pointerEvents:"none"},children:_n(d.value)?e.jsx(e.Fragment,{children:u}):l})});gn.displayName=fn;var Bs="SelectIcon",bn=a.forwardRef((t,r)=>{const{__scopeSelect:n,children:i,...s}=t;return e.jsx(K.span,{"aria-hidden":!0,...s,ref:r,children:i||"▼"})});bn.displayName=Bs;var Vs="SelectPortal",vn=t=>e.jsx(Xn,{asChild:!0,...t});vn.displayName=Vs;var ke="SelectContent",wn=a.forwardRef((t,r)=>{const n=be(ke,t.__scopeSelect),[i,s]=a.useState();if(fe(()=>{s(new DocumentFragment)},[]),!n.open){const l=i;return l?Xt.createPortal(e.jsx(kn,{scope:t.__scopeSelect,children:e.jsx(Qe.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(yn,{...t,ref:r})});wn.displayName=ke;var oe=10,[kn,ve]=Ie(ke),Hs="SelectContentImpl",$s=Ts("SelectContent.RemoveScroll"),yn=a.forwardRef((t,r)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:l,onPointerDownOutside:u,side:o,sideOffset:d,align:c,alignOffset:p,arrowPadding:m,collisionBoundary:x,collisionPadding:j,sticky:S,hideWhenDetached:h,avoidCollisions:g,...M}=t,N=be(ke,n),[A,O]=a.useState(null),[I,E]=a.useState(null),D=ue(r,b=>O(b)),[W,te]=a.useState(null),[U,Q]=a.useState(null),q=Ye(n),[Z,_]=a.useState(!1),B=a.useRef(!1);a.useEffect(()=>{if(A)return qr(A)},[A]),Fr();const V=a.useCallback(b=>{const[P,...f]=q().map(C=>C.ref.current),[k]=f.slice(-1),v=document.activeElement;for(const C of b)if(C===v||(C?.scrollIntoView({block:"nearest"}),C===P&&I&&(I.scrollTop=0),C===k&&I&&(I.scrollTop=I.scrollHeight),C?.focus(),document.activeElement!==v))return},[q,I]),$=a.useCallback(()=>V([W,A]),[V,W,A]);a.useEffect(()=>{Z&&$()},[Z,$]);const{onOpenChange:G,triggerPointerDownPosRef:Y}=N;a.useEffect(()=>{if(A){let b={x:0,y:0};const P=k=>{b={x:Math.abs(Math.round(k.pageX)-(Y.current?.x??0)),y:Math.abs(Math.round(k.pageY)-(Y.current?.y??0))}},f=k=>{b.x<=10&&b.y<=10?k.preventDefault():A.contains(k.target)||G(!1),document.removeEventListener("pointermove",P),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",f,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",f,{capture:!0})}}},[A,G,Y]),a.useEffect(()=>{const b=()=>G(!1);return window.addEventListener("blur",b),window.addEventListener("resize",b),()=>{window.removeEventListener("blur",b),window.removeEventListener("resize",b)}},[G]);const[ie,se]=Ln(b=>{const P=q().filter(v=>!v.disabled),f=P.find(v=>v.ref.current===document.activeElement),k=On(P,b,f);k&&setTimeout(()=>k.ref.current.focus())}),w=a.useCallback((b,P,f)=>{const k=!B.current&&!f;(N.value!==void 0&&N.value===P||k)&&(te(b),k&&(B.current=!0))},[N.value]),T=a.useCallback(()=>A?.focus(),[A]),y=a.useCallback((b,P,f)=>{const k=!B.current&&!f;(N.value!==void 0&&N.value===P||k)&&Q(b)},[N.value]),z=i==="popper"?xt:jn,L=z===xt?{side:o,sideOffset:d,align:c,alignOffset:p,arrowPadding:m,collisionBoundary:x,collisionPadding:j,sticky:S,hideWhenDetached:h,avoidCollisions:g}:{};return e.jsx(kn,{scope:n,content:A,viewport:I,onViewportChange:E,itemRefCallback:w,selectedItem:W,onItemLeave:T,itemTextRefCallback:y,focusSelectedItem:$,selectedItemText:U,position:i,isPositioned:Z,searchRef:ie,children:e.jsx(Br,{as:$s,allowPinchZoom:!0,children:e.jsx(Vr,{asChild:!0,trapped:N.open,onMountAutoFocus:b=>{b.preventDefault()},onUnmountAutoFocus:ne(s,b=>{N.trigger?.focus({preventScroll:!0}),b.preventDefault()}),children:e.jsx(er,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:b=>b.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:e.jsx(z,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:b=>b.preventDefault(),...M,...L,onPlaced:()=>_(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...M.style},onKeyDown:ne(M.onKeyDown,b=>{const P=b.ctrlKey||b.altKey||b.metaKey;if(b.key==="Tab"&&b.preventDefault(),!P&&b.key.length===1&&se(b.key),["ArrowUp","ArrowDown","Home","End"].includes(b.key)){let k=q().filter(v=>!v.disabled).map(v=>v.ref.current);if(["ArrowUp","End"].includes(b.key)&&(k=k.slice().reverse()),["ArrowUp","ArrowDown"].includes(b.key)){const v=b.target,C=k.indexOf(v);k=k.slice(C+1)}setTimeout(()=>V(k)),b.preventDefault()}})})})})})})});yn.displayName=Hs;var Us="SelectItemAlignedPosition",jn=a.forwardRef((t,r)=>{const{__scopeSelect:n,onPlaced:i,...s}=t,l=be(ke,n),u=ve(ke,n),[o,d]=a.useState(null),[c,p]=a.useState(null),m=ue(r,D=>p(D)),x=Ye(n),j=a.useRef(!1),S=a.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:M,focusSelectedItem:N}=u,A=a.useCallback(()=>{if(l.trigger&&l.valueNode&&o&&c&&h&&g&&M){const D=l.trigger.getBoundingClientRect(),W=c.getBoundingClientRect(),te=l.valueNode.getBoundingClientRect(),U=M.getBoundingClientRect();if(l.dir!=="rtl"){const v=U.left-W.left,C=te.left-v,R=D.left-C,X=D.width+R,ae=Math.max(X,W.width),J=window.innerWidth-oe,re=Bt(C,[oe,Math.max(oe,J-ae)]);o.style.minWidth=X+"px",o.style.left=re+"px"}else{const v=W.right-U.right,C=window.innerWidth-te.right-v,R=window.innerWidth-D.right-C,X=D.width+R,ae=Math.max(X,W.width),J=window.innerWidth-oe,re=Bt(C,[oe,Math.max(oe,J-ae)]);o.style.minWidth=X+"px",o.style.right=re+"px"}const Q=x(),q=window.innerHeight-oe*2,Z=h.scrollHeight,_=window.getComputedStyle(c),B=parseInt(_.borderTopWidth,10),V=parseInt(_.paddingTop,10),$=parseInt(_.borderBottomWidth,10),G=parseInt(_.paddingBottom,10),Y=B+V+Z+G+$,ie=Math.min(g.offsetHeight*5,Y),se=window.getComputedStyle(h),w=parseInt(se.paddingTop,10),T=parseInt(se.paddingBottom,10),y=D.top+D.height/2-oe,z=q-y,L=g.offsetHeight/2,b=g.offsetTop+L,P=B+V+b,f=Y-P;if(P<=y){const v=Q.length>0&&g===Q[Q.length-1].ref.current;o.style.bottom="0px";const C=c.clientHeight-h.offsetTop-h.offsetHeight,R=Math.max(z,L+(v?T:0)+C+$),X=P+R;o.style.height=X+"px"}else{const v=Q.length>0&&g===Q[0].ref.current;o.style.top="0px";const R=Math.max(y,B+h.offsetTop+(v?w:0)+L)+f;o.style.height=R+"px",h.scrollTop=P-y+h.offsetTop}o.style.margin=`${oe}px 0`,o.style.minHeight=ie+"px",o.style.maxHeight=q+"px",i?.(),requestAnimationFrame(()=>j.current=!0)}},[x,l.trigger,l.valueNode,o,c,h,g,M,l.dir,i]);fe(()=>A(),[A]);const[O,I]=a.useState();fe(()=>{c&&I(window.getComputedStyle(c).zIndex)},[c]);const E=a.useCallback(D=>{D&&S.current===!0&&(A(),N?.(),S.current=!1)},[A,N]);return e.jsx(Gs,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:j,onScrollButtonChange:E,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:e.jsx(K.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});jn.displayName=Us;var Ws="SelectPopperPosition",xt=a.forwardRef((t,r)=>{const{__scopeSelect:n,align:i="start",collisionPadding:s=oe,...l}=t,u=Xe(n);return e.jsx(Hr,{...u,...l,ref:r,align:i,collisionPadding:s,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xt.displayName=Ws;var[Gs,Tt]=Ie(ke,{}),ht="SelectViewport",Sn=a.forwardRef((t,r)=>{const{__scopeSelect:n,nonce:i,...s}=t,l=ve(ht,n),u=Tt(ht,n),o=ue(r,l.onViewportChange),d=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Qe.Slot,{scope:n,children:e.jsx(K.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ne(s.onScroll,c=>{const p=c.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:x}=u;if(x?.current&&m){const j=Math.abs(d.current-p.scrollTop);if(j>0){const S=window.innerHeight-oe*2,h=parseFloat(m.style.minHeight),g=parseFloat(m.style.height),M=Math.max(h,g);if(M<S){const N=M+j,A=Math.min(S,N),O=N-A;m.style.height=A+"px",m.style.bottom==="0px"&&(p.scrollTop=O>0?O:0,m.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});Sn.displayName=ht;var Nn="SelectGroup",[Ks,Qs]=Ie(Nn),Ys=a.forwardRef((t,r)=>{const{__scopeSelect:n,...i}=t,s=xe();return e.jsx(Ks,{scope:n,id:s,children:e.jsx(K.div,{role:"group","aria-labelledby":s,...i,ref:r})})});Ys.displayName=Nn;var zn="SelectLabel",Xs=a.forwardRef((t,r)=>{const{__scopeSelect:n,...i}=t,s=Qs(zn,n);return e.jsx(K.div,{id:s.id,...i,ref:r})});Xs.displayName=zn;var Ge="SelectItem",[Zs,Cn]=Ie(Ge),Mn=a.forwardRef((t,r)=>{const{__scopeSelect:n,value:i,disabled:s=!1,textValue:l,...u}=t,o=be(Ge,n),d=ve(Ge,n),c=o.value===i,[p,m]=a.useState(l??""),[x,j]=a.useState(!1),S=ue(r,N=>d.itemRefCallback?.(N,i,s)),h=xe(),g=a.useRef("touch"),M=()=>{s||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Zs,{scope:n,value:i,disabled:s,textId:h,isSelected:c,onItemTextChange:a.useCallback(N=>{m(A=>A||(N?.textContent??"").trim())},[]),children:e.jsx(Qe.ItemSlot,{scope:n,value:i,disabled:s,textValue:p,children:e.jsx(K.div,{role:"option","aria-labelledby":h,"data-highlighted":x?"":void 0,"aria-selected":c&&x,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...u,ref:S,onFocus:ne(u.onFocus,()=>j(!0)),onBlur:ne(u.onBlur,()=>j(!1)),onClick:ne(u.onClick,()=>{g.current!=="mouse"&&M()}),onPointerUp:ne(u.onPointerUp,()=>{g.current==="mouse"&&M()}),onPointerDown:ne(u.onPointerDown,N=>{g.current=N.pointerType}),onPointerMove:ne(u.onPointerMove,N=>{g.current=N.pointerType,s?d.onItemLeave?.():g.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ne(u.onPointerLeave,N=>{N.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:ne(u.onKeyDown,N=>{d.searchRef?.current!==""&&N.key===" "||(_s.includes(N.key)&&M(),N.key===" "&&N.preventDefault())})})})})});Mn.displayName=Ge;var De="SelectItemText",Tn=a.forwardRef((t,r)=>{const{__scopeSelect:n,className:i,style:s,...l}=t,u=be(De,n),o=ve(De,n),d=Cn(De,n),c=Fs(De,n),[p,m]=a.useState(null),x=ue(r,M=>m(M),d.onItemTextChange,M=>o.itemTextRefCallback?.(M,d.value,d.disabled)),j=p?.textContent,S=a.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:j},d.value),[d.disabled,d.value,j]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=c;return fe(()=>(h(S),()=>g(S)),[h,g,S]),e.jsxs(e.Fragment,{children:[e.jsx(K.span,{id:d.textId,...l,ref:x}),d.isSelected&&u.valueNode&&!u.valueNodeHasChildren?Xt.createPortal(l.children,u.valueNode):null]})});Tn.displayName=De;var Pn="SelectItemIndicator",In=a.forwardRef((t,r)=>{const{__scopeSelect:n,...i}=t;return Cn(Pn,n).isSelected?e.jsx(K.span,{"aria-hidden":!0,...i,ref:r}):null});In.displayName=Pn;var ft="SelectScrollUpButton",En=a.forwardRef((t,r)=>{const n=ve(ft,t.__scopeSelect),i=Tt(ft,t.__scopeSelect),[s,l]=a.useState(!1),u=ue(r,i.onScrollButtonChange);return fe(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=d.scrollTop>0;l(c)};const d=n.viewport;return o(),d.addEventListener("scroll",o),()=>d.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?e.jsx(An,{...t,ref:u,onAutoScroll:()=>{const{viewport:o,selectedItem:d}=n;o&&d&&(o.scrollTop=o.scrollTop-d.offsetHeight)}}):null});En.displayName=ft;var gt="SelectScrollDownButton",Rn=a.forwardRef((t,r)=>{const n=ve(gt,t.__scopeSelect),i=Tt(gt,t.__scopeSelect),[s,l]=a.useState(!1),u=ue(r,i.onScrollButtonChange);return fe(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<c;l(p)};const d=n.viewport;return o(),d.addEventListener("scroll",o),()=>d.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?e.jsx(An,{...t,ref:u,onAutoScroll:()=>{const{viewport:o,selectedItem:d}=n;o&&d&&(o.scrollTop=o.scrollTop+d.offsetHeight)}}):null});Rn.displayName=gt;var An=a.forwardRef((t,r)=>{const{__scopeSelect:n,onAutoScroll:i,...s}=t,l=ve("SelectScrollButton",n),u=a.useRef(null),o=Ye(n),d=a.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return a.useEffect(()=>()=>d(),[d]),fe(()=>{o().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),e.jsx(K.div,{"aria-hidden":!0,...s,ref:r,style:{flexShrink:0,...s.style},onPointerDown:ne(s.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(i,50))}),onPointerMove:ne(s.onPointerMove,()=>{l.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(i,50))}),onPointerLeave:ne(s.onPointerLeave,()=>{d()})})}),Js="SelectSeparator",ea=a.forwardRef((t,r)=>{const{__scopeSelect:n,...i}=t;return e.jsx(K.div,{"aria-hidden":!0,...i,ref:r})});ea.displayName=Js;var bt="SelectArrow",ta=a.forwardRef((t,r)=>{const{__scopeSelect:n,...i}=t,s=Xe(n),l=be(bt,n),u=ve(bt,n);return l.open&&u.position==="popper"?e.jsx($r,{...s,...i,ref:r}):null});ta.displayName=bt;var na="SelectBubbleInput",Dn=a.forwardRef(({__scopeSelect:t,value:r,...n},i)=>{const s=a.useRef(null),l=ue(i,s),u=Ur(r);return a.useEffect(()=>{const o=s.current;if(!o)return;const d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(u!==r&&p){const m=new Event("change",{bubbles:!0});p.call(o,r),o.dispatchEvent(m)}},[u,r]),e.jsx(K.select,{...n,style:{...Zn,...n.style},ref:l,defaultValue:r})});Dn.displayName=na;function _n(t){return t===""||t===void 0}function Ln(t){const r=Jn(t),n=a.useRef(""),i=a.useRef(0),s=a.useCallback(u=>{const o=n.current+u;r(o),(function d(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>d(""),1e3))})(o)},[r]),l=a.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,s,l]}function On(t,r,n){const s=r.length>1&&Array.from(r).every(c=>c===r[0])?r[0]:r,l=n?t.indexOf(n):-1;let u=ra(t,Math.max(l,0));s.length===1&&(u=u.filter(c=>c!==n));const d=u.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function ra(t,r){return t.map((n,i)=>t[(r+i)%t.length])}var sa=mn,aa=hn,ia=gn,oa=bn,la=vn,ca=wn,da=Sn,ua=Mn,pa=Tn,ma=In,xa=En,ha=Rn;function fa({...t}){return e.jsx(sa,{"data-slot":"select",...t})}function ga({...t}){return e.jsx(ia,{"data-slot":"select-value",...t})}function ba({className:t,size:r="default",children:n,...i}){return e.jsxs(aa,{"data-slot":"select-trigger","data-size":r,className:H("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,e.jsx(oa,{asChild:!0,children:e.jsx(Nt,{className:"size-4 opacity-50"})})]})}function va({className:t,children:r,position:n="item-aligned",align:i="center",...s}){return e.jsx(la,{children:e.jsxs(ca,{"data-slot":"select-content",className:H("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,align:i,...s,children:[e.jsx(ka,{}),e.jsx(da,{className:H("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),e.jsx(ya,{})]})})}function wa({className:t,children:r,...n}){return e.jsxs(ua,{"data-slot":"select-item",className:H("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(ma,{children:e.jsx(_e,{className:"size-4"})})}),e.jsx(pa,{children:r})]})}function ka({className:t,...r}){return e.jsx(xa,{"data-slot":"select-scroll-up-button",className:H("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(rn,{className:"size-4"})})}function ya({className:t,...r}){return e.jsx(ha,{"data-slot":"select-scroll-down-button",className:H("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(Nt,{className:"size-4"})})}var Vt=1,ja=.9,Sa=.8,Na=.17,st=.1,at=.999,za=.9999,Ca=.99,Ma=/[\\\/_+.#"@\[\(\{&]/,Ta=/[\\\/_+.#"@\[\(\{&]/g,Pa=/[\s-]/,qn=/[\s-]/g;function vt(t,r,n,i,s,l,u){if(l===r.length)return s===t.length?Vt:Ca;var o=`${s},${l}`;if(u[o]!==void 0)return u[o];for(var d=i.charAt(l),c=n.indexOf(d,s),p=0,m,x,j,S;c>=0;)m=vt(t,r,n,i,c+1,l+1,u),m>p&&(c===s?m*=Vt:Ma.test(t.charAt(c-1))?(m*=Sa,j=t.slice(s,c-1).match(Ta),j&&s>0&&(m*=Math.pow(at,j.length))):Pa.test(t.charAt(c-1))?(m*=ja,S=t.slice(s,c-1).match(qn),S&&s>0&&(m*=Math.pow(at,S.length))):(m*=Na,s>0&&(m*=Math.pow(at,c-s))),t.charAt(c)!==r.charAt(l)&&(m*=za)),(m<st&&n.charAt(c-1)===i.charAt(l+1)||i.charAt(l+1)===i.charAt(l)&&n.charAt(c-1)!==i.charAt(l))&&(x=vt(t,r,n,i,c+1,l+2,u),x*st>m&&(m=x*st)),m>p&&(p=m),c=n.indexOf(d,c+1);return u[o]=p,p}function Ht(t){return t.toLowerCase().replace(qn," ")}function Ia(t,r,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,vt(t,r,Ht(t),Ht(r),0,0,{})}var Ae='[cmdk-group=""]',it='[cmdk-group-items=""]',Ea='[cmdk-group-heading=""]',Fn='[cmdk-item=""]',$t=`${Fn}:not([aria-disabled="true"])`,wt="cmdk-item-select",ze="data-value",Ra=(t,r,n)=>Ia(t,r,n),Bn=a.createContext(void 0),Le=()=>a.useContext(Bn),Vn=a.createContext(void 0),Pt=()=>a.useContext(Vn),Hn=a.createContext(void 0),$n=a.forwardRef((t,r)=>{let n=Ce(()=>{var w,T;return{search:"",value:(T=(w=t.value)!=null?w:t.defaultValue)!=null?T:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=Ce(()=>new Set),s=Ce(()=>new Map),l=Ce(()=>new Map),u=Ce(()=>new Set),o=Un(t),{label:d,children:c,value:p,onValueChange:m,filter:x,shouldFilter:j,loop:S,disablePointerSelection:h=!1,vimBindings:g=!0,...M}=t,N=xe(),A=xe(),O=xe(),I=a.useRef(null),E=$a();ye(()=>{if(p!==void 0){let w=p.trim();n.current.value=w,D.emit()}},[p]),ye(()=>{E(6,Z)},[]);let D=a.useMemo(()=>({subscribe:w=>(u.current.add(w),()=>u.current.delete(w)),snapshot:()=>n.current,setState:(w,T,y)=>{var z,L,b,P;if(!Object.is(n.current[w],T)){if(n.current[w]=T,w==="search")q(),U(),E(1,Q);else if(w==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let f=document.getElementById(O);f?f.focus():(z=document.getElementById(N))==null||z.focus()}if(E(7,()=>{var f;n.current.selectedItemId=(f=_())==null?void 0:f.id,D.emit()}),y||E(5,Z),((L=o.current)==null?void 0:L.value)!==void 0){let f=T??"";(P=(b=o.current).onValueChange)==null||P.call(b,f);return}}D.emit()}},emit:()=>{u.current.forEach(w=>w())}}),[]),W=a.useMemo(()=>({value:(w,T,y)=>{var z;T!==((z=l.current.get(w))==null?void 0:z.value)&&(l.current.set(w,{value:T,keywords:y}),n.current.filtered.items.set(w,te(T,y)),E(2,()=>{U(),D.emit()}))},item:(w,T)=>(i.current.add(w),T&&(s.current.has(T)?s.current.get(T).add(w):s.current.set(T,new Set([w]))),E(3,()=>{q(),U(),n.current.value||Q(),D.emit()}),()=>{l.current.delete(w),i.current.delete(w),n.current.filtered.items.delete(w);let y=_();E(4,()=>{q(),y?.getAttribute("id")===w&&Q(),D.emit()})}),group:w=>(s.current.has(w)||s.current.set(w,new Set),()=>{l.current.delete(w),s.current.delete(w)}),filter:()=>o.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:N,inputId:O,labelId:A,listInnerRef:I}),[]);function te(w,T){var y,z;let L=(z=(y=o.current)==null?void 0:y.filter)!=null?z:Ra;return w?L(w,n.current.search,T):0}function U(){if(!n.current.search||o.current.shouldFilter===!1)return;let w=n.current.filtered.items,T=[];n.current.filtered.groups.forEach(z=>{let L=s.current.get(z),b=0;L.forEach(P=>{let f=w.get(P);b=Math.max(f,b)}),T.push([z,b])});let y=I.current;B().sort((z,L)=>{var b,P;let f=z.getAttribute("id"),k=L.getAttribute("id");return((b=w.get(k))!=null?b:0)-((P=w.get(f))!=null?P:0)}).forEach(z=>{let L=z.closest(it);L?L.appendChild(z.parentElement===L?z:z.closest(`${it} > *`)):y.appendChild(z.parentElement===y?z:z.closest(`${it} > *`))}),T.sort((z,L)=>L[1]-z[1]).forEach(z=>{var L;let b=(L=I.current)==null?void 0:L.querySelector(`${Ae}[${ze}="${encodeURIComponent(z[0])}"]`);b?.parentElement.appendChild(b)})}function Q(){let w=B().find(y=>y.getAttribute("aria-disabled")!=="true"),T=w?.getAttribute(ze);D.setState("value",T||void 0)}function q(){var w,T,y,z;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=i.current.size;return}n.current.filtered.groups=new Set;let L=0;for(let b of i.current){let P=(T=(w=l.current.get(b))==null?void 0:w.value)!=null?T:"",f=(z=(y=l.current.get(b))==null?void 0:y.keywords)!=null?z:[],k=te(P,f);n.current.filtered.items.set(b,k),k>0&&L++}for(let[b,P]of s.current)for(let f of P)if(n.current.filtered.items.get(f)>0){n.current.filtered.groups.add(b);break}n.current.filtered.count=L}function Z(){var w,T,y;let z=_();z&&(((w=z.parentElement)==null?void 0:w.firstChild)===z&&((y=(T=z.closest(Ae))==null?void 0:T.querySelector(Ea))==null||y.scrollIntoView({block:"nearest"})),z.scrollIntoView({block:"nearest"}))}function _(){var w;return(w=I.current)==null?void 0:w.querySelector(`${Fn}[aria-selected="true"]`)}function B(){var w;return Array.from(((w=I.current)==null?void 0:w.querySelectorAll($t))||[])}function V(w){let T=B()[w];T&&D.setState("value",T.getAttribute(ze))}function $(w){var T;let y=_(),z=B(),L=z.findIndex(P=>P===y),b=z[L+w];(T=o.current)!=null&&T.loop&&(b=L+w<0?z[z.length-1]:L+w===z.length?z[0]:z[L+w]),b&&D.setState("value",b.getAttribute(ze))}function G(w){let T=_(),y=T?.closest(Ae),z;for(;y&&!z;)y=w>0?Va(y,Ae):Ha(y,Ae),z=y?.querySelector($t);z?D.setState("value",z.getAttribute(ze)):$(w)}let Y=()=>V(B().length-1),ie=w=>{w.preventDefault(),w.metaKey?Y():w.altKey?G(1):$(1)},se=w=>{w.preventDefault(),w.metaKey?V(0):w.altKey?G(-1):$(-1)};return a.createElement(K.div,{ref:r,tabIndex:-1,...M,"cmdk-root":"",onKeyDown:w=>{var T;(T=M.onKeyDown)==null||T.call(M,w);let y=w.nativeEvent.isComposing||w.keyCode===229;if(!(w.defaultPrevented||y))switch(w.key){case"n":case"j":{g&&w.ctrlKey&&ie(w);break}case"ArrowDown":{ie(w);break}case"p":case"k":{g&&w.ctrlKey&&se(w);break}case"ArrowUp":{se(w);break}case"Home":{w.preventDefault(),V(0);break}case"End":{w.preventDefault(),Y();break}case"Enter":{w.preventDefault();let z=_();if(z){let L=new Event(wt);z.dispatchEvent(L)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:W.inputId,id:W.labelId,style:Wa},d),Ze(t,w=>a.createElement(Vn.Provider,{value:D},a.createElement(Bn.Provider,{value:W},w))))}),Aa=a.forwardRef((t,r)=>{var n,i;let s=xe(),l=a.useRef(null),u=a.useContext(Hn),o=Le(),d=Un(t),c=(i=(n=d.current)==null?void 0:n.forceMount)!=null?i:u?.forceMount;ye(()=>{if(!c)return o.item(s,u?.id)},[c]);let p=Wn(s,l,[t.value,t.children,l],t.keywords),m=Pt(),x=ge(E=>E.value&&E.value===p.current),j=ge(E=>c||o.filter()===!1?!0:E.search?E.filtered.items.get(s)>0:!0);a.useEffect(()=>{let E=l.current;if(!(!E||t.disabled))return E.addEventListener(wt,S),()=>E.removeEventListener(wt,S)},[j,t.onSelect,t.disabled]);function S(){var E,D;h(),(D=(E=d.current).onSelect)==null||D.call(E,p.current)}function h(){m.setState("value",p.current,!0)}if(!j)return null;let{disabled:g,value:M,onSelect:N,forceMount:A,keywords:O,...I}=t;return a.createElement(K.div,{ref:Pe(l,r),...I,id:s,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!x,"data-disabled":!!g,"data-selected":!!x,onPointerMove:g||o.getDisablePointerSelection()?void 0:h,onClick:g?void 0:S},t.children)}),Da=a.forwardRef((t,r)=>{let{heading:n,children:i,forceMount:s,...l}=t,u=xe(),o=a.useRef(null),d=a.useRef(null),c=xe(),p=Le(),m=ge(j=>s||p.filter()===!1?!0:j.search?j.filtered.groups.has(u):!0);ye(()=>p.group(u),[]),Wn(u,o,[t.value,t.heading,d]);let x=a.useMemo(()=>({id:u,forceMount:s}),[s]);return a.createElement(K.div,{ref:Pe(o,r),...l,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},n&&a.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Ze(t,j=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},a.createElement(Hn.Provider,{value:x},j))))}),_a=a.forwardRef((t,r)=>{let{alwaysRender:n,...i}=t,s=a.useRef(null),l=ge(u=>!u.search);return!n&&!l?null:a.createElement(K.div,{ref:Pe(s,r),...i,"cmdk-separator":"",role:"separator"})}),La=a.forwardRef((t,r)=>{let{onValueChange:n,...i}=t,s=t.value!=null,l=Pt(),u=ge(c=>c.search),o=ge(c=>c.selectedItemId),d=Le();return a.useEffect(()=>{t.value!=null&&l.setState("search",t.value)},[t.value]),a.createElement(K.input,{ref:r,...i,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":o,id:d.inputId,type:"text",value:s?t.value:u,onChange:c=>{s||l.setState("search",c.target.value),n?.(c.target.value)}})}),Oa=a.forwardRef((t,r)=>{let{children:n,label:i="Suggestions",...s}=t,l=a.useRef(null),u=a.useRef(null),o=ge(c=>c.selectedItemId),d=Le();return a.useEffect(()=>{if(u.current&&l.current){let c=u.current,p=l.current,m,x=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let j=c.offsetHeight;p.style.setProperty("--cmdk-list-height",j.toFixed(1)+"px")})});return x.observe(c),()=>{cancelAnimationFrame(m),x.unobserve(c)}}},[]),a.createElement(K.div,{ref:Pe(l,r),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":i,id:d.listId},Ze(t,c=>a.createElement("div",{ref:Pe(u,d.listInnerRef),"cmdk-list-sizer":""},c)))}),qa=a.forwardRef((t,r)=>{let{open:n,onOpenChange:i,overlayClassName:s,contentClassName:l,container:u,...o}=t;return a.createElement(zr,{open:n,onOpenChange:i},a.createElement(Cr,{container:u},a.createElement(Mr,{"cmdk-overlay":"",className:s}),a.createElement(Tr,{"aria-label":t.label,"cmdk-dialog":"",className:l},a.createElement($n,{ref:r,...o}))))}),Fa=a.forwardRef((t,r)=>ge(n=>n.filtered.count===0)?a.createElement(K.div,{ref:r,...t,"cmdk-empty":"",role:"presentation"}):null),Ba=a.forwardRef((t,r)=>{let{progress:n,children:i,label:s="Loading...",...l}=t;return a.createElement(K.div,{ref:r,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ze(t,u=>a.createElement("div",{"aria-hidden":!0},u)))}),Ee=Object.assign($n,{List:Oa,Item:Aa,Input:La,Group:Da,Separator:_a,Dialog:qa,Empty:Fa,Loading:Ba});function Va(t,r){let n=t.nextElementSibling;for(;n;){if(n.matches(r))return n;n=n.nextElementSibling}}function Ha(t,r){let n=t.previousElementSibling;for(;n;){if(n.matches(r))return n;n=n.previousElementSibling}}function Un(t){let r=a.useRef(t);return ye(()=>{r.current=t}),r}var ye=typeof window>"u"?a.useEffect:a.useLayoutEffect;function Ce(t){let r=a.useRef();return r.current===void 0&&(r.current=t()),r}function ge(t){let r=Pt(),n=()=>t(r.snapshot());return a.useSyncExternalStore(r.subscribe,n,n)}function Wn(t,r,n,i=[]){let s=a.useRef(),l=Le();return ye(()=>{var u;let o=(()=>{var c;for(let p of n){if(typeof p=="string")return p.trim();if(typeof p=="object"&&"current"in p)return p.current?(c=p.current.textContent)==null?void 0:c.trim():s.current}})(),d=i.map(c=>c.trim());l.value(t,o,d),(u=r.current)==null||u.setAttribute(ze,o),s.current=o}),s}var $a=()=>{let[t,r]=a.useState(),n=Ce(()=>new Map);return ye(()=>{n.current.forEach(i=>i()),n.current=new Map},[t]),(i,s)=>{n.current.set(i,s),r({})}};function Ua(t){let r=t.type;return typeof r=="function"?r(t.props):"render"in r?r.render(t.props):t}function Ze({asChild:t,children:r},n){return t&&a.isValidElement(r)?a.cloneElement(Ua(r),{ref:r.ref},n(r.props.children)):n(r)}var Wa={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Ga({className:t,...r}){return e.jsx(Ee,{"data-slot":"command",className:H("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...r})}function Ka({className:t,...r}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(an,{className:"size-4 shrink-0 opacity-50"}),e.jsx(Ee.Input,{"data-slot":"command-input",className:H("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...r})]})}function Qa({className:t,...r}){return e.jsx(Ee.List,{"data-slot":"command-list",className:H("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...r})}function Ya({...t}){return e.jsx(Ee.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function Xa({className:t,...r}){return e.jsx(Ee.Group,{"data-slot":"command-group",className:H("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...r})}function Za({className:t,...r}){return e.jsx(Ee.Item,{"data-slot":"command-item",className:H("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}const He=({label:t,icon:r,children:n})=>{const i=r;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(pn,{className:"text-[10px] font-black uppercase tracking-[0.1em] text-zinc-400 flex items-center gap-2 ml-1",children:[i&&e.jsx(i,{size:12,className:"text-zinc-400"}),t]}),n]})};function Ja({isOpen:t,onClose:r,onSubmit:n,initialData:i,selectedDate:s,saving:l}){const{currentUser:u}=yt(),[o,d]=a.useState({league:"",match:"",teamA:"",teamB:"",startTime:"",startDate:"",channel:"",cdn:"AWS"}),[c,p]=a.useState({leagues:[],channels:[],cdnOptions:[]}),[m,x]=a.useState(!1);a.useEffect(()=>{const g=en.subscribeConfigs(M=>p(M));return()=>g()},[]),a.useEffect(()=>{let g=!0;return t&&setTimeout(()=>{g&&d(i?{league:i.league||"",match:i.match||i.title||"",teamA:i.teamA||"",teamB:i.teamB||"",startTime:i.startTime||"",startDate:i.startDate||"",channel:i.channel||i.liveChannel||"",cdn:i.cdn||"AWS"}:{league:"",match:"",teamA:"",teamB:"",startTime:ce(new Date,"HH:mm"),startDate:s||new Date().toISOString().split("T")[0],channel:"",cdn:"AWS"})},0),()=>{g=!1}},[t,i,s]);const j=g=>{let M={...o,match:g};const A=[" vs "," VS "," Vs "," - "," v "].find(O=>g.includes(O));if(A){const O=g.split(A);O.length>=2&&(M.teamA=O[0].trim(),M.teamB=O.slice(1).join(A).trim())}d(M)},S=g=>{g.preventDefault();const N=(typeof u=="object"?u?.name:u)||"System",A={...o,...i?{updatedBy:N}:{createdBy:N}};n(A)},h=o.teamA&&o.teamB&&o.startDate&&o.startTime;return e.jsx(Pr,{open:t,onOpenChange:r,children:e.jsx(Ir,{showCloseButton:!1,className:"max-w-[95vw] sm:max-w-[650px] p-0 gap-0 overflow-hidden bg-white dark:bg-[#09090b] border-zinc-200 dark:border-zinc-800 sm:rounded-[1.5rem] rounded-t-[1.5rem] shadow-2xl block animate-in zoom-in-95 duration-200 focus:outline-none",children:e.jsxs("form",{id:"match-form",onSubmit:S,className:"flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"shrink-0 px-5 py-3 bg-zinc-50/80 dark:bg-zinc-900/50 border-b border-zinc-100 dark:border-zinc-800 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs(Er,{className:"text-sm font-bold tracking-tight text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[i?e.jsx(tr,{size:16,className:"text-indigo-500"}):e.jsx(zt,{size:16,className:"text-indigo-500"}),i?"Update Match":"New Match"]}),e.jsx(Rr,{asChild:!0,children:e.jsx(Re,{variant:"ghost",size:"icon",className:"w-6 h-6 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-800 -mr-1",children:e.jsx(kt,{size:14})})})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-2.5 flex items-center pointer-events-none",children:e.jsx(Wr,{size:12,className:"text-amber-500 fill-amber-500"})}),e.jsx(Be,{placeholder:"Smart Paste: 'Man Utd vs Liverpool'",value:o.match,onChange:g=>j(g.target.value),className:"pl-8 h-8 bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 rounded-lg shadow-sm focus:ring-1 focus:ring-indigo-500/20 text-xs font-medium transition-all w-full placeholder:text-zinc-400"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-5 py-4 space-y-4",children:[e.jsx("div",{className:"bg-zinc-50 dark:bg-zinc-900/30 rounded-xl p-3 border border-zinc-100 dark:border-zinc-800/50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{value:o.teamA,onChange:g=>d({...o,teamA:g.target.value}),placeholder:"Home Team",className:"h-9 text-center text-sm font-bold bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 rounded-lg shadow-sm focus:ring-1 focus:ring-indigo-500"}),e.jsx("div",{className:"shrink-0 text-[10px] font-black text-zinc-400 px-1",children:"VS"}),e.jsx(Be,{value:o.teamB,onChange:g=>d({...o,teamB:g.target.value}),placeholder:"Away Team",className:"h-9 text-center text-sm font-bold bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 rounded-lg shadow-sm focus:ring-1 focus:ring-indigo-500"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(He,{label:"League",icon:on,children:e.jsxs(fa,{value:o.league,onValueChange:g=>d({...o,league:g}),children:[e.jsx(ba,{className:"h-9 bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 rounded-lg text-xs font-bold pl-3",children:e.jsx(ga,{placeholder:"League"})}),e.jsx(va,{className:"max-h-56 rounded-lg shadow-xl",align:"start",children:c.leagues.map(g=>e.jsx(wa,{value:g,className:"text-xs",children:g},g))})]})}),e.jsx(He,{label:"Channel",icon:ln,children:e.jsxs(ut,{open:m,onOpenChange:x,children:[e.jsx(pt,{asChild:!0,children:e.jsxs(Re,{variant:"outline",role:"combobox",className:"w-full h-9 justify-between rounded-lg border-zinc-200 dark:border-zinc-800 px-3 text-xs font-bold bg-white dark:bg-black",children:[e.jsx("span",{className:"truncate",children:o.channel||"Channel"}),e.jsx(rs,{className:"ml-2 h-3 w-3 opacity-50"})]})}),e.jsx(mt,{className:"w-[180px] p-0 rounded-lg",align:"end",children:e.jsxs(Ga,{children:[e.jsx(Ka,{placeholder:"...",className:"h-8 text-xs"}),e.jsxs(Qa,{className:"max-h-[180px]",children:[e.jsx(Ya,{className:"py-2 text-xs text-center text-zinc-500",children:"No results"}),e.jsx(Xa,{children:c.channels.map(g=>e.jsxs(Za,{value:g,className:"text-xs py-1.5",onSelect:M=>{d({...o,channel:M===o.channel?"":M}),x(!1)},children:[e.jsx(_e,{className:H("mr-2 h-3 w-3",o.channel===g?"opacity-100":"opacity-0")}),g]},g))})]})]})})]})}),e.jsx(He,{label:"Date",icon:nr,children:e.jsxs(ut,{children:[e.jsx(pt,{asChild:!0,children:e.jsx(Re,{variant:"outline",className:H("w-full h-9 justify-start rounded-lg border-zinc-200 dark:border-zinc-800 px-3 text-xs font-bold bg-white dark:bg-black",!o.startDate&&"text-muted-foreground"),children:o.startDate?ce(_t(o.startDate),"dd MMM"):"Date"})}),e.jsx(mt,{className:"w-auto p-0 rounded-lg shadow-xl",align:"start",children:e.jsx(nn,{mode:"single",selected:o.startDate?_t(o.startDate):void 0,onSelect:g=>g&&d({...o,startDate:ce(g,"yyyy-MM-dd")}),initialFocus:!0,className:"rounded-lg scale-90 origin-top-left"})})]})}),e.jsx(He,{label:"Time",icon:jt,children:e.jsx(Be,{type:"time",value:o.startTime,onChange:g=>d({...o,startTime:g.target.value}),className:"h-9 rounded-lg border-zinc-200 dark:border-zinc-800 bg-white dark:bg-black text-xs font-bold text-center"})})]}),e.jsxs("div",{className:"space-y-1.5 pt-1",children:[e.jsx(pn,{className:"text-[9px] font-black uppercase tracking-wider text-zinc-400 ml-1",children:"CDN"}),e.jsx("div",{className:"flex gap-1.5 p-1 bg-zinc-100 dark:bg-zinc-900 rounded-lg overflow-x-auto no-scrollbar",children:c.cdnOptions.map(g=>e.jsxs("button",{type:"button",onClick:()=>d({...o,cdn:g.id}),className:H("flex-1 flex items-center justify-center gap-1.5 px-2 py-1.5 rounded-md text-[10px] font-bold transition-all min-w-[60px]",o.cdn===g.id?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 shadow-sm ring-1 ring-zinc-200 dark:ring-zinc-700":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300"),children:[e.jsx("div",{className:H("w-1.5 h-1.5 rounded-full",g.color||"bg-zinc-400")}),g.label]},g.id))})]})]}),e.jsxs(Ar,{className:"shrink-0 px-5 py-3 bg-white dark:bg-black border-t border-zinc-100 dark:border-zinc-800 flex items-center justify-between gap-3",children:[e.jsx(Re,{type:"button",variant:"ghost",size:"sm",onClick:r,className:"h-8 text-xs text-zinc-500 hover:text-zinc-900 dark:hover:text-white",children:"Cancel"}),e.jsxs(Re,{type:"submit",size:"sm",disabled:l||!h,className:H("h-8 rounded-lg text-xs font-bold transition-all shadow-sm active:scale-95 px-6",i?"bg-emerald-500 hover:bg-emerald-600":"bg-indigo-600 hover:bg-indigo-700"),children:[l?e.jsx(Yt,{className:"h-3 w-3 animate-spin mr-2"}):e.jsx(tn,{className:"h-3 w-3 mr-2"}),l?"Saving...":i?"Update":"Save"]})]})]})})})}const ei=({className:t})=>{const[r,n]=a.useState(new Date);return a.useEffect(()=>{const i=setInterval(()=>n(new Date),1e3);return()=>clearInterval(i)},[]),e.jsxs("div",{className:H("flex items-center gap-2 px-3 py-1.5 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-sm font-mono text-zinc-700 dark:text-zinc-300 font-bold",t),children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"min-w-[64px] text-center",children:ce(r,"HH:mm:ss")})]})},ti=a.memo(({match:t,onClick:r,onEdit:n,onDelete:i,canEdit:s})=>{const[l,u]=a.useState(!1),o=t.isLiveTime,d=t.isFinished,c=o?"bg-red-500":d?"bg-zinc-400 dark:bg-zinc-600":"bg-emerald-500",p=o?"bg-red-50 dark:bg-red-950/30":d?"bg-zinc-50 dark:bg-zinc-900/70":"bg-white dark:bg-zinc-900",m=d?"text-zinc-500 dark:text-zinc-500":"text-zinc-900 dark:text-zinc-50",x=o?"text-red-600 dark:text-red-500":d?"text-zinc-500 dark:text-zinc-500":"text-zinc-900 dark:text-zinc-50";return e.jsxs("div",{onClick:r,className:`relative group rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-[1.005] hover:border-zinc-300 dark:hover:border-zinc-700 ${p}`,children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${c}`}),e.jsx("div",{className:"p-4 pl-5",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center min-w-[3.5rem] pt-1",children:[e.jsx("span",{className:`text-xl font-black tracking-tight ${x}`,children:t.startTime}),e.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${o?"bg-red-500 animate-pulse":d?"bg-zinc-400 dark:bg-zinc-600":"bg-emerald-500"}`}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-zinc-500 dark:text-zinc-400",children:o?"LIVE":d?"END":"SOON"})]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-sm md:text-base font-bold truncate pr-2 ${m}`,children:t.teamA}),(o||d)&&e.jsx("span",{className:"text-lg font-black font-mono w-8 text-center bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-900 dark:text-zinc-100",children:t.scoreA})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm md:text-base font-bold truncate pr-2 ${m}`,children:t.teamB}),(o||d)&&e.jsx("span",{className:"text-lg font-black font-mono w-8 text-center bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-900 dark:text-zinc-100",children:t.scoreB})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("button",{onClick:j=>{j.stopPropagation(),u(!l)},className:"md:hidden p-1 text-zinc-500 dark:text-zinc-400",children:l?e.jsx(rn,{size:20}):e.jsx(Nt,{size:20})}),e.jsx("div",{className:"hidden md:flex items-center gap-1",children:s&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j=>{j.stopPropagation(),n(t)},className:"p-1.5 text-zinc-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 rounded-md hover:bg-blue-50 dark:hover:bg-blue-950/30 transition-colors",children:e.jsx(_r,{size:14})}),e.jsx("button",{onClick:j=>{j.stopPropagation(),i(t.id)},className:"p-1.5 text-zinc-500 dark:text-zinc-400 hover:text-red-600 dark:hover:text-red-400 rounded-md hover:bg-red-50 dark:hover:bg-red-950/30 transition-colors",children:e.jsx(Ke,{size:14})})]})})]})]})}),e.jsxs("div",{className:`bg-zinc-50/80 dark:bg-zinc-900/70 border-t border-zinc-100 dark:border-zinc-800 px-4 py-2 text-xs text-zinc-600 dark:text-zinc-400 flex flex-wrap items-center gap-x-4 gap-y-2 ${l?"block":"hidden md:flex"}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 max-w-[40%]",children:[e.jsx(on,{size:12,className:"shrink-0"}),e.jsx("span",{className:"truncate font-medium",children:t.league})]}),e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 max-w-[40%]",children:[e.jsx(ln,{size:12,className:"shrink-0"}),e.jsx("span",{className:"truncate font-medium",children:t.channel||"No Channel"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-3 shrink-0",children:[e.jsx(Ut,{active:t.hasStartStat,label:"S",title:"Start Stats"}),e.jsx(Ut,{active:t.hasEndStat,label:"E",title:"End Stats"})]}),l&&s&&e.jsxs("div",{className:"w-full flex justify-end gap-3 pt-2 mt-2 border-t border-zinc-200 dark:border-zinc-700 md:hidden",children:[e.jsx("button",{onClick:j=>{j.stopPropagation(),n(t)},className:"text-[10px] font-bold uppercase text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950/30 px-3 py-1.5 rounded-md",children:"Edit"}),e.jsx("button",{onClick:j=>{j.stopPropagation(),i(t.id)},className:"text-[10px] font-bold uppercase text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950/30 px-3 py-1.5 rounded-md",children:"Delete"})]})]})]})}),Ut=({active:t,label:r,title:n})=>e.jsxs("div",{className:"flex items-center gap-1",title:n,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-zinc-300 dark:bg-zinc-600"}`}),e.jsx("span",{className:"text-[9px] font-black text-zinc-500 dark:text-zinc-400",children:r})]}),$e=a.memo(({label:t,icon:r,count:n,active:i,onClick:s,isLive:l})=>{const u=r;return e.jsxs("button",{onClick:s,className:H("flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all whitespace-nowrap border select-none",i?l?"bg-red-500 text-white border-red-500 shadow-sm":"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 border-zinc-900 dark:border-zinc-100 shadow-sm":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-300 border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700"),children:[e.jsx(u,{size:14,className:l&&i?"animate-pulse":""}),e.jsx("span",{className:"hidden sm:inline",children:t}),e.jsx("span",{className:H("px-1.5 py-0.5 rounded-md text-[9px] min-w-[18px] text-center font-bold",i?"bg-white/20 dark:bg-black/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300"),children:n})]})});function $i(){const{currentUser:t}=yt(),r=rr(t,[Et.LEAD,Et.ENGINEER]),{selectedDate:n,setSelectedDate:i,matches:s,allMatches:l,loading:u,stats:o,searchQuery:d,setSearchQuery:c,filterType:p,setFilterType:m,selectedMatch:x,setSelectedMatch:j,isManualModalOpen:S,setIsManualModalOpen:h,editingMatch:g,setEditingMatch:M,saving:N,deleteConfirm:A,setDeleteConfirm:O,isDataPreviewOpen:I,setIsDataPreviewOpen:E,handlePrevDay:D,handleNextDay:W,handleGoToday:te,handleSaveMatch:U,handleDeleteMatch:Q}=fs(),[q,Z]=a.useState(!0),_=q?s.filter(y=>!y.isFinished):s,B=q?s.filter(y=>y.isFinished).length:0,V=12,[$,G]=a.useState(1);sr.useEffect(()=>{G(1)},[p,d,q,n]);const Y=Math.ceil(_.length/V),ie=_.slice(($-1)*V,$*V),se=a.useCallback(y=>j(y),[j]),w=a.useCallback(y=>{M(y),h(!0)},[M,h]),T=a.useCallback(y=>{O({isOpen:!0,id:y})},[O]);return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-50 dark:bg-black overflow-hidden relative",children:[e.jsx("header",{className:"shrink-0 sticky top-0 z-10 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-xl border-b border-zinc-200 dark:border-zinc-800 px-4 py-3 md:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ei,{className:"text-xs md:text-sm text-zinc-700 dark:text-zinc-200"}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-zinc-200 dark:bg-zinc-800"}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("h1",{className:"text-lg font-black tracking-tight text-zinc-900 dark:text-zinc-50 uppercase leading-none",children:"Match Stat"})})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-zinc-100 dark:bg-zinc-900 p-1 rounded-xl border border-zinc-200 dark:border-zinc-800",children:[e.jsx("button",{onClick:D,className:"p-1.5 hover:bg-white dark:hover:bg-zinc-800 rounded-lg text-zinc-500 transition-all",children:e.jsx(Lt,{size:16})}),e.jsxs(ut,{children:[e.jsx(pt,{asChild:!0,children:e.jsx("button",{className:"px-3 py-1.5 hover:bg-white dark:hover:bg-zinc-800 rounded-lg text-xs font-black uppercase tracking-wider dark:text-zinc-300 transition-all",children:Rt(n)?"Today":ce(n,"dd MMM yyyy")})}),e.jsx(mt,{className:"w-auto p-0 border-zinc-200 dark:border-zinc-800",align:"center",children:e.jsx(nn,{mode:"single",selected:n,onSelect:y=>y&&i(y),initialFocus:!0,className:"bg-white dark:bg-zinc-950"})})]}),e.jsx("button",{onClick:W,className:"p-1.5 hover:bg-white dark:hover:bg-zinc-800 rounded-lg text-zinc-500 transition-all",children:e.jsx(Ot,{size:16})}),!Rt(n)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-4 bg-zinc-300 dark:bg-zinc-700 mx-1"}),e.jsx("button",{onClick:te,className:"p-1.5 hover:bg-white dark:hover:bg-zinc-800 text-blue-500 hover:text-blue-600 rounded-lg transition-all",title:"Go to Today",children:e.jsx(Gr,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>Z(!q),className:H("h-9 px-4 items-center gap-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg active:scale-95 flex",q?"bg-orange-500 hover:bg-orange-600 text-white shadow-orange-500/20":"bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-800 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-300 shadow-zinc-500/10"),title:q?`${B} matches hidden`:"Show all matches including finished",children:[q?e.jsx(Kr,{size:16}):e.jsx(Qr,{size:16}),e.jsx("span",{className:"hidden md:inline",children:q?`Hidden (${B})`:"Show All"})]}),e.jsxs("button",{onClick:()=>E(!0),disabled:u||l?.length===0,className:"h-9 px-4 items-center gap-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-emerald-500/20 active:scale-95 flex disabled:opacity-50 disabled:pointer-events-none",children:[e.jsx(ir,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Data Preview"})]}),r&&e.jsxs("button",{onClick:()=>{M(null),h(!0)},className:"h-9 px-4 items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-indigo-500/20 active:scale-95 flex",children:[e.jsx(St,{size:16})," ",e.jsx("span",{className:"hidden md:inline",children:"Manual Add"})]})]})]})}),e.jsx("div",{className:"shrink-0 bg-white dark:bg-zinc-950 border-b border-zinc-100 dark:border-zinc-900 px-4 py-2",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 overflow-x-auto no-scrollbar",children:[e.jsx($e,{label:"All Matches",icon:Yr,count:o.total,active:p==="ALL",onClick:()=>m("ALL")}),e.jsx($e,{label:"Live Now",icon:or,count:o.live,active:p==="LIVE",onClick:()=>m("LIVE"),isLive:!0}),e.jsx($e,{label:"Upcoming",icon:ts,count:o.pending,active:p==="UPCOMING",onClick:()=>m("UPCOMING")}),e.jsx($e,{label:"Finished",icon:dt,count:o.finished,active:p==="FINISHED",onClick:()=>m("FINISHED")}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs("div",{className:"relative group",children:[e.jsx(an,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-500 transition-colors",size:14}),e.jsx("input",{type:"text",placeholder:"Search...",value:d,onChange:y=>c(y.target.value),className:"h-9 pl-9 pr-4 bg-zinc-100 dark:bg-zinc-900 border-transparent rounded-xl text-xs font-medium outline-none focus:bg-white dark:focus:bg-zinc-950 focus:ring-2 focus:ring-indigo-500/20 transition-all w-32 md:w-48 placeholder:text-zinc-400"})]})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 md:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto h-full",children:u?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(y=>e.jsx("div",{className:"h-28 bg-zinc-100 dark:bg-zinc-900 rounded-xl animate-pulse"},y))}):_.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] gap-4 opacity-60",children:[e.jsx(Xr,{size:48,className:"text-zinc-300",strokeWidth:1}),e.jsx("p",{className:"text-sm font-medium text-zinc-500",children:"No matches found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-8",children:ie.map(y=>e.jsx("div",{className:"match-card-wrapper will-change-transform",style:{contentVisibility:"auto",containIntrinsicSize:"100px"},children:e.jsx(ti,{match:y,onClick:()=>se(y),onEdit:w,onDelete:T,canEdit:r})},y.id))}),Y>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 pb-20",children:[e.jsx("button",{onClick:()=>G(y=>Math.max(y-1,1)),disabled:$===1,className:"p-2 rounded-lg border border-zinc-200 dark:border-zinc-800 text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900 disabled:opacity-30 disabled:pointer-events-none transition-all",children:e.jsx(Lt,{size:16})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Y},(y,z)=>z+1).map(y=>e.jsx("button",{onClick:()=>G(y),className:H("w-8 h-8 rounded-lg text-xs font-bold transition-all",$===y?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30 scale-110":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800"),children:y},y))}),e.jsx("button",{onClick:()=>G(y=>Math.min(y+1,Y)),disabled:$===Y,className:"p-2 rounded-lg border border-zinc-200 dark:border-zinc-800 text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900 disabled:opacity-30 disabled:pointer-events-none transition-all",children:e.jsx(Ot,{size:16})})]})]})})}),e.jsx(Ss,{isOpen:!!x,onClose:()=>j(null),matchData:x,canEdit:r}),e.jsx(Ja,{isOpen:S,onClose:()=>h(!1),onSubmit:U,initialData:g,saving:N}),e.jsx(jr,{data:l||[],isOpen:I,onClose:()=>E(!1)}),e.jsx(Qt,{isOpen:A.isOpen,onClose:()=>O({isOpen:!1,id:null}),title:"Delete Match",message:"Are you sure you want to remove this match? This cannot be undone.",onConfirm:Q,isDanger:!0})]})}export{$i as default};
