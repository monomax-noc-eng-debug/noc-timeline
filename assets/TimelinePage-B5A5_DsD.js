import{c as U,r as m,a as X,R as B,j as e,X as V,F as O,C as se,L as ee,A as q,T as K,b as ue,d as me}from"./index-DWA64BFG.js";import{i as A,U as ge}from"./incidentService-B0qlhSI8.js";import{T as W,C as R,a as be,P as pe}from"./trash-2-S0m1smMe.js";import{H as ae}from"./hash-BCN94bK9.js";import{C as P}from"./circle-alert-BXaywNIs.js";import{C as F,S as te}from"./search-U_EXvX-8.js";import{D as ne}from"./download-fUowSIlf.js";import{R as he}from"./refresh-cw-DWxZeJPL.js";import{C as fe,E as ke,a as ze,S as je}from"./settings-CHahPkVX.js";import"./firebaseConfig-B-I4EWGW.js";import{C as ve,S as ie,P as we}from"./save-KGG0oDst.js";import{C as ye}from"./check-2dv4-_mv.js";import{Z as Ne}from"./zap-YaKY7r4q.js";import{A as Ce}from"./arrow-right-COGEyzWU.js";const Se=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ee=U("arrow-left",Se);const $e=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ce=U("circle-play",$e);const Ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Q=U("circle-x",Ie);const De=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Te=U("cloud-upload",De);const Ue=[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]],Me=U("file-plus-corner",Ue);const Le=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],Ae=U("folder-kanban",Le);const Re=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],_e=U("image-plus",Re);const Pe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],oe=U("image",Pe);const Oe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Fe=U("layout-dashboard",Oe);const He=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],re=U("link",He);const Be=[["path",{d:"M5 12h14",key:"1ays0h"}]],J=U("minus",Be);const qe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ve=U("tag",qe);const We=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Ge=U("workflow",We);const Ze=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Je=U("wrench",Ze),Ke=()=>{const[t,a]=m.useState([]),[i,n]=m.useState(null),[l,c]=m.useState(!0),[g,k]=m.useState(""),[d,z]=m.useState("All"),[o,s]=m.useState("All"),b=X(u=>u.currentUser);m.useEffect(()=>{if(!b){a([]),c(!1);return}c(!0);const u=A.subscribeIncidents(p=>{a(p),c(!1)});return()=>u()},[b]);const j=m.useMemo(()=>t.filter(u=>{const p=g.toLowerCase(),$=!p||(u.subject||"").toLowerCase().includes(p)||(u.project||"").toLowerCase().includes(p)||(u.ticket||"").toLowerCase().includes(p)||(u.createdBy||"").toLowerCase().includes(p),S=d==="All"||u.status===d,E=o==="All"||u.type===o;return $&&S&&E}).sort((u,p)=>{const $=new Date(u.updatedAt||u.createdAt||0).getTime();return new Date(p.updatedAt||p.createdAt||0).getTime()-$}),[t,g,d,o]),x=m.useMemo(()=>{const u=t.length,p=t.filter(v=>v.status==="Open").length,$=t.filter(v=>v.status==="In Progress").length,S=t.filter(v=>v.status==="Pending").length,E=t.filter(v=>v.status==="Monitoring").length,r=t.filter(v=>v.status==="Succeed").length,h=t.filter(v=>v.status==="Resolved").length,f=t.filter(v=>v.status==="Closed").length;return{total:u,open:p,inProgress:$,pending:S,monitoring:E,succeed:r,resolved:h,closed:f}},[t]),w=m.useMemo(()=>[{status:"Open",count:x.open,color:"#ef4444"},{status:"In Progress",count:x.inProgress,color:"#3b82f6"},{status:"Pending",count:x.pending,color:"#f59e0b"},{status:"Monitoring",count:x.monitoring,color:"#f97316"},{status:"Succeed",count:x.succeed,color:"#10b981"},{status:"Resolved",count:x.resolved,color:"#059669"},{status:"Closed",count:x.closed,color:"#6b7280"}].filter(u=>u.count>0),[x]),y=m.useCallback(()=>{k(""),z("All"),s("All")},[]);return{incidents:t,filteredIncidents:j,selectedId:i,setSelectedId:n,loading:l,searchTerm:g,setSearchTerm:k,filterStatus:d,setFilterStatus:z,filterType:o,setFilterType:s,clearFilters:y,hasActiveFilters:g||d!=="All"||o!=="All",stats:x,statusDistribution:w}},Xe=t=>{const[a,i]=m.useState([]),[n,l]=m.useState(!1),[c,g]=m.useState(null),k=X(o=>o.currentUser);m.useEffect(()=>{if(!k||!t){i([]),g(null),l(!1);return}l(!0),g(null);const o=A.subscribeEvents(t,s=>{i(s),l(!1)});return()=>o()},[t,k]);const d=[...a].sort((o,s)=>{const b=new Date(`${o.date||"1970-01-01"}T${o.time||"00:00"}`).getTime(),j=new Date(`${s.date||"1970-01-01"}T${s.time||"00:00"}`).getTime();return b!==j?j-b:(s.order||0)-(o.order||0)}),z={total:a.length,withImages:a.filter(o=>o.imageUrls&&o.imageUrls.length>0).length,dateRange:a.length>0?{start:d[0]?.date,end:d[d.length-1]?.date}:null};return{events:a,sortedEvents:d,loading:n,error:c,stats:z}},Qe=t=>{switch(t){case"Open":return{color:"bg-red-500",bgColor:"bg-red-50 dark:bg-red-900/20",textColor:"text-red-600 dark:text-red-400",icon:P,gradient:"from-red-500 to-rose-600"};case"In Progress":return{color:"bg-blue-500",bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-600 dark:text-blue-400",icon:ce,gradient:"from-blue-500 to-indigo-600"};case"Monitoring":return{color:"bg-orange-500",bgColor:"bg-orange-50 dark:bg-orange-900/20",textColor:"text-orange-600 dark:text-orange-400",icon:R,gradient:"from-orange-500 to-amber-600"};case"Pending":return{color:"bg-amber-500",bgColor:"bg-amber-50 dark:bg-amber-900/20",textColor:"text-amber-600 dark:text-amber-400",icon:R,gradient:"from-amber-500 to-yellow-600"};case"Succeed":return{color:"bg-emerald-500",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",textColor:"text-emerald-600 dark:text-emerald-400",icon:F,gradient:"from-emerald-500 to-teal-600"};case"Resolved":return{color:"bg-emerald-500",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",textColor:"text-emerald-600 dark:text-emerald-400",icon:F,gradient:"from-emerald-500 to-teal-600"};case"Closed":return{color:"bg-zinc-400",bgColor:"bg-zinc-100 dark:bg-zinc-800",textColor:"text-zinc-500 dark:text-zinc-400",icon:Q,gradient:"from-zinc-400 to-zinc-500"};default:return{color:"bg-zinc-400",bgColor:"bg-zinc-100 dark:bg-zinc-800",textColor:"text-zinc-600 dark:text-zinc-400",icon:P,gradient:"from-zinc-400 to-zinc-500"}}},Ye=t=>{switch(t){case"Critical":return{label:"CRIT",color:"text-red-600 dark:text-red-400",bg:"bg-red-50 dark:bg-red-900/20"};case"High":return{label:"HIGH",color:"text-orange-500 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/20"};case"Medium":return{label:"MED",color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-50 dark:bg-yellow-900/20"};case"Low":return{label:"LOW",color:"text-blue-500 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"};default:return{label:"MED",color:"text-zinc-500",bg:"bg-zinc-50 dark:bg-zinc-900"}}},et=B.memo(({incident:t,isSelected:a,onClick:i,onDelete:n})=>{const{color:l,bgColor:c,textColor:g,icon:k,gradient:d}=Qe(t.status),z=Ye(t.priority||"Medium"),o=t.createdAt?new Date(t.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):"-";return e.jsxs("div",{onClick:i,className:`
        group relative p-3.5 rounded-xl border transition-all duration-300 cursor-pointer overflow-hidden
        ${a?"bg-white dark:bg-[#0a0a0a] border-zinc-900 dark:border-zinc-500 shadow-xl scale-[1.01] z-10":"bg-white dark:bg-[#111] border-transparent hover:border-zinc-300 dark:hover:border-zinc-700 hover:shadow-lg hover:-translate-y-0.5"}
      `,children:[a&&e.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1 bg-gradient-to-b ${d}`}),e.jsxs("div",{className:"flex justify-between items-start mb-2.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-lg bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${l} ${t.status==="Open"?"animate-pulse shadow-[0_0_8px_currentColor]":""}`}),e.jsx("span",{className:"text-[8px] font-black uppercase text-zinc-500 dark:text-zinc-400 tracking-wider",children:t.project||"SYSTEM"})]}),e.jsx("span",{className:`text-[8px] font-black uppercase px-2 py-0.5 rounded-lg border border-transparent ${t.type==="Incident"?"bg-red-50 text-red-600 dark:bg-red-900/10 dark:text-red-400 dark:border-red-900/20":t.type==="Request"?"bg-blue-50 text-blue-600 dark:bg-blue-900/10 dark:text-blue-400 dark:border-blue-900/20":"bg-amber-50 text-amber-600 dark:bg-amber-900/10 dark:text-amber-400 dark:border-amber-900/20"}`,children:t.type||"Incident"}),e.jsx("span",{className:`text-[8px] font-black uppercase px-1.5 py-0.5 rounded-lg border border-transparent ${z.bg} ${z.color}`,children:z.label})]}),!a&&e.jsx("button",{onClick:s=>{s.stopPropagation(),n(t.id)},className:"text-zinc-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",title:"Delete incident",children:e.jsx(W,{size:12})})]}),e.jsx("h3",{className:`font-black text-xs leading-snug mb-3 line-clamp-2 min-h-[2rem] transition-colors ${a?"text-black dark:text-white":"text-zinc-700 dark:text-zinc-300 group-hover:text-black dark:group-hover:text-white"}`,children:t.subject||"Untitled Incident"}),e.jsxs("div",{className:"flex justify-between items-center pt-2.5 border-t border-zinc-100 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-zinc-400",children:[e.jsx(ae,{size:10}),e.jsx("span",{className:"text-[9px] font-mono font-bold uppercase truncate max-w-[80px]",children:t.ticket||"N/A"})]}),e.jsx("span",{className:"text-[9px] text-zinc-300 font-bold tracking-tighter uppercase",children:o})]}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-lg ${c}`,children:[e.jsx(k,{size:10,className:g}),e.jsx("span",{className:`text-[8px] font-black uppercase tracking-tight ${g}`,children:t.status})]})]})]})});function tt(t,a){const[i,n]=m.useState(t);return m.useEffect(()=>{const l=setTimeout(()=>n(t),a);return()=>clearTimeout(l)},[t,a]),i}function rt({filteredIncidents:t,selectedId:a,onSelect:i,onAddIncident:n,onDeleteIncident:l,onExportCSV:c,stats:g,searchTerm:k,setSearchTerm:d,filterStatus:z,setFilterStatus:o,filterType:s,setFilterType:b,clearFilters:j,hasActiveFilters:x,loading:w}){const[y,C]=m.useState(k),u=tt(y,300);m.useEffect(()=>{d(u)},[u,d]),m.useEffect(()=>{C(k)},[k]);const p=r=>{o(r===z?"All":r)},[$,S]=m.useState(20),E=m.useRef(null);return m.useEffect(()=>{S(20)},[t,z,s,u]),m.useEffect(()=>{const r=new IntersectionObserver(h=>{h[0].isIntersecting&&t&&S(f=>Math.min(f+20,t.length))},{threshold:.1});return E.current&&r.observe(E.current),()=>r.disconnect()},[t]),e.jsxs("div",{className:"flex flex-col h-full bg-zinc-50 dark:bg-black border-r border-zinc-200 dark:border-zinc-800 relative",children:[e.jsx("div",{className:"shrink-0 pt-4 pb-3 px-4 bg-white dark:bg-[#09090b] border-b border-zinc-200 dark:border-zinc-800 z-10 shadow-sm transition-all",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 bg-zinc-900 dark:bg-zinc-100 rounded-xl flex items-center justify-center shadow-lg transition-transform hover:scale-105 active:scale-95",children:e.jsx(Fe,{size:18,className:"text-white dark:text-zinc-900"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-black uppercase tracking-tight text-zinc-900 dark:text-white leading-none",children:"Incidents"}),e.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mt-1",children:"Active Operational Log"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:()=>c(t),className:"w-8 h-8 flex items-center justify-center rounded-lg border border-zinc-200 dark:border-zinc-800 text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-all active:scale-95",title:"Export Database",children:e.jsx(ne,{size:15})}),e.jsx("button",{onClick:n,className:"w-8 h-8 flex items-center justify-center rounded-lg bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 shadow-md hover:opacity-90 active:scale-95 transition-all",title:"New Incident",children:e.jsx(Me,{size:16})})]})]}),g&&e.jsx("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar pb-0.5",children:[{status:"Open",count:g.open,color:"bg-red-500",icon:P},{status:"In Progress",count:g.inProgress,color:"bg-blue-500",icon:ce},{status:"Pending",count:g.pending,color:"bg-amber-500",icon:R},{status:"Monitoring",count:g.monitoring,color:"bg-orange-500",icon:R},{status:"Succeed",count:g.succeed,color:"bg-emerald-500",icon:F},{status:"Resolved",count:g.resolved,color:"bg-emerald-600",icon:F},{status:"Closed",count:g.closed,color:"bg-zinc-400",icon:Q}].filter(r=>r.count>0).map(r=>e.jsxs("button",{onClick:()=>p(r.status),className:`flex items-center gap-1 px-2 py-1.5 rounded-lg text-[8px] font-black uppercase tracking-tighter transition-all border ${z===r.status?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 border-zinc-900 dark:border-zinc-100 shadow-sm":"bg-zinc-50 dark:bg-zinc-900/50 text-zinc-400 border-zinc-100 dark:border-zinc-800 hover:border-zinc-200"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r.color} ${z===r.status?"animate-pulse":""}`}),e.jsx("span",{children:r.status.split(" ")[0]}),e.jsx("span",{className:"opacity-50 ml-0.5",children:r.count})]},r.status))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(te,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Search cases...",value:y,onChange:r=>C(r.target.value),className:"w-full h-9 pl-9 pr-7 rounded-lg text-[11px] font-medium border border-zinc-200 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 text-zinc-900 dark:text-white outline-none focus:ring-1 focus:ring-zinc-200 dark:focus:ring-zinc-700 transition-all placeholder-zinc-400"}),y&&e.jsx("button",{onClick:()=>C(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-zinc-300 hover:text-red-500",children:e.jsx(V,{size:12})})]}),e.jsxs("div",{className:"flex bg-zinc-100/50 dark:bg-zinc-900 p-0.5 rounded-lg border border-zinc-200/50 dark:border-zinc-800",children:[e.jsxs("select",{value:s,onChange:r=>b(r.target.value),className:"h-8 pl-2 pr-1 bg-transparent border-none text-[9px] font-black uppercase text-zinc-500 dark:text-zinc-400 outline-none cursor-pointer appearance-none",children:[e.jsx("option",{value:"All",children:"Type: All"}),e.jsx("option",{value:"Incident",children:"Incident"}),e.jsx("option",{value:"Request",children:"Request"}),e.jsx("option",{value:"Maintenance",children:"Maint"})]}),x&&e.jsx("button",{onClick:j,className:"w-8 h-8 flex items-center justify-center text-red-400 hover:text-red-500 transition-colors",title:"Clear filters",children:e.jsx(he,{size:12})})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 custom-scrollbar bg-zinc-50 dark:bg-[#050505]",children:w?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 space-y-3",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-zinc-300 border-t-black dark:border-zinc-700 dark:border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Loading..."})]}):t?.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50 space-y-3",children:[e.jsx(te,{size:32,className:"text-zinc-300 dark:text-zinc-700"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:x?"No matching cases":"No incidents yet"}),x&&e.jsx("button",{onClick:j,className:"text-[10px] font-bold text-blue-500 hover:underline",children:"Clear Filters"})]}):e.jsxs(e.Fragment,{children:[t.slice(0,$).map(r=>e.jsx(et,{incident:r,isSelected:a===r.id,onClick:()=>i(r.id),onDelete:l},r.id)),e.jsx("div",{ref:E,className:"h-4 w-full"}),t.length>$&&e.jsx("div",{className:"py-2 text-center text-[10px] text-zinc-400 animate-pulse",children:"Loading more..."})]})})]})}const Y=t=>{if(!t)return"";try{const a=new URL(t);if(t.includes("drive.google.com")||t.includes("docs.google.com")){let i=a.searchParams.get("id");if(!i){const n=t.match(/\/d\/(.+?)(?:\/|\?|&|$)/);n&&n[1]&&(i=n[1])}if(i)return`https://lh3.googleusercontent.com/d/${i}`}return t.includes("dropbox.com")?(a.searchParams.set("raw","1"),a.searchParams.delete("dl"),a.toString()):t}catch{if(t.includes("drive.google.com")||t.includes("docs.google.com")){const i=t.match(/\/d\/(.+?)(?:\/|\?|&|$)/);if(i&&i[1])return`https://lh3.googleusercontent.com/d/${i[1]}`}return t}};function st({event:t,index:a,isLastItem:i,showDateHeader:n,dateLabel:l,onMove:c,onEdit:g,onDelete:k}){let d=(t.imageUrls||[]).filter(s=>s&&typeof s=="string");!d.length&&t.image&&typeof t.image=="string"&&(d=[t.image]),!d.length&&t.imageUrl&&typeof t.imageUrl=="string"&&(d=[t.imageUrl]);const z=t.desc&&t.desc.trim().length>0,o=d.length>0;return e.jsxs("div",{className:"relative flex items-start gap-3 md:gap-4 mb-4 z-10 group/item animate-in fade-in slide-in-from-left-2 duration-300",children:[e.jsxs("div",{className:"flex-none flex flex-col items-center w-14 pt-[4px]",children:[e.jsx("div",{className:`
          w-2.5 h-2.5 rounded-full bg-white dark:bg-zinc-900 border-[2.5px] border-black dark:border-white shadow-sm z-20 transition-all
          ${a===0?"ring-2 ring-black/10 dark:ring-white/10":""}
          group-hover/item:scale-125
        `}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"font-mono text-[9px] font-black text-gray-400 dark:text-zinc-500 bg-gray-50/50 dark:bg-zinc-900 px-1 py-0.5 rounded uppercase",children:t.time})}),o&&e.jsx("div",{className:"mt-1 text-zinc-300",children:e.jsx(oe,{size:9})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[n&&e.jsx("div",{className:"mb-2 -mt-1",children:e.jsx("span",{className:"inline-block text-[8px] font-black text-white dark:text-black uppercase tracking-wider bg-zinc-900 dark:bg-zinc-100 px-2 py-0.5 rounded shadow-sm",children:l})}),e.jsxs("div",{className:"bg-white dark:bg-[#0a0a0a] p-2.5 md:p-3 rounded-xl border border-gray-100 dark:border-zinc-800 shadow-sm flex gap-2 relative hover:border-zinc-300 dark:hover:border-zinc-600 transition-all group-hover/item:shadow-md",children:[e.jsxs("div",{className:"flex flex-col gap-0.5 justify-center border-r pr-1.5 border-gray-100 dark:border-zinc-900 opacity-100 lg:opacity-0 lg:group-hover/item:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>c(a,"up"),disabled:a===0,className:"p-0.5 text-gray-300 hover:text-black dark:hover:text-white disabled:opacity-10 hover:bg-gray-50 dark:hover:bg-zinc-800 rounded transition-colors",children:e.jsx(fe,{size:12})}),e.jsx("button",{onClick:()=>c(a,"down"),disabled:i,className:"p-0.5 text-gray-300 hover:text-black dark:hover:text-white disabled:opacity-10 hover:bg-gray-50 dark:hover:bg-zinc-800 rounded transition-colors",children:e.jsx(be,{size:12})})]}),e.jsxs("div",{className:"flex-1 min-w-0 relative pr-10 md:pr-12",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-0.5 opacity-100 lg:opacity-0 lg:group-hover/item:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>g(t),className:"p-1 text-gray-300 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/10 rounded transition-colors",children:e.jsx(pe,{size:10})}),e.jsx("button",{onClick:()=>k(t.id),className:"p-1 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded transition-colors",children:e.jsx(W,{size:10})})]}),e.jsx("div",{className:"text-[11px] font-medium text-gray-700 dark:text-zinc-400 leading-normal whitespace-pre-wrap pt-0.5",children:z?t.desc:e.jsx("span",{className:"text-gray-300 dark:text-zinc-800 italic",children:"..."})}),o&&e.jsx("div",{className:`grid gap-1.5 mt-2.5 ${d.length===1?"grid-cols-1 max-w-[150px]":d.length===2?"grid-cols-2 max-w-[300px]":"grid-cols-2 sm:grid-cols-3"}`,children:d.map((s,b)=>e.jsxs("div",{className:"relative group/image rounded-lg overflow-hidden border border-gray-100 dark:border-zinc-900 bg-gray-50 aspect-video",children:[e.jsx("img",{src:Y(s),className:"w-full h-full object-cover transition-transform duration-500 group-hover/image:scale-110",alt:`Evidence ${b+1}`,loading:"lazy",onError:j=>{console.warn("Image load failed:",s),j.target.src="https://placehold.co/400?text=Image+Load+Failed"}}),e.jsx("a",{href:s,target:"_blank",rel:"noreferrer",className:"absolute inset-0 bg-black/0 hover:bg-black/30 transition-all flex items-center justify-center opacity-0 hover:opacity-100",children:e.jsx(ke,{size:14,className:"text-white"})})]},b))})]})]})]})]})}const at=async t=>{const a="https://script.google.com/macros/s/AKfycbzsxHS5m3rN6ZdyHS_iZndg-p9RfF6z7TJh_qLebxnUik724Bjf9fi4eiulZjQLs62JBA/exec";try{return await(await fetch(a,{method:"POST",body:JSON.stringify(t)})).json()}catch(i){return{result:"error",error:i.message}}},nt=async t=>{try{return new Promise((a,i)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=async()=>{const l=n.result.split(",")[1],c=await at({base64:l,fileName:t.name,mimeType:t.type});a(c)},n.onerror=l=>i(l)})}catch(a){return{result:"error",error:a.message}}};function it({isOpen:t,onClose:a,onSubmit:i,initialData:n,saving:l=!1}){const[c,g]=m.useState({date:"",time:"",desc:"",imageUrls:[]}),[k,d]=m.useState(""),[z,o]=m.useState("link"),[s,b]=m.useState(!1),[j,x]=m.useState({}),w=m.useRef(null);m.useEffect(()=>{const r=h=>{h.key==="Escape"&&!l&&a()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[a,l]),m.useEffect(()=>{if(t){if(n){let r=n.imageUrls||[];!r.length&&n.image&&(r=[n.image]),g({...n,imageUrls:r})}else{const r=new Date;g({date:r.toISOString().split("T")[0],time:`${String(r.getHours()).padStart(2,"0")}:${String(r.getMinutes()).padStart(2,"0")}`,desc:"",imageUrls:[]})}d(""),x({})}},[t,n]);const y=r=>{const h=r||k;h&&!c.imageUrls.includes(h)&&(g(f=>({...f,imageUrls:[...f.imageUrls,h]})),d(""))},C=async r=>{const h=r.target.files[0];if(h){b(!0);try{const f=await nt(h);f.result==="success"?y(f.url):alert("Upload failed: "+f.error)}catch(f){alert("Error: "+f.message)}finally{b(!1),r.target.value=""}}},u=r=>{g(h=>({...h,imageUrls:h.imageUrls.filter((f,v)=>v!==r)}))},p=()=>{const r={};return c.date||(r.date="Required"),c.time||(r.time="Required"),c.desc?.trim()||(r.desc="Description is required"),x(r),Object.keys(r).length===0},$=r=>{if(r.preventDefault(),!p())return;let h=[...c.imageUrls];k&&!h.includes(k)&&h.push(k);const f=c.title||c.desc.trim().split(`
`)[0].substring(0,50)+(c.desc.length>50?"...":"")||"Log Update";i({...c,title:f,imageUrls:h,image:null})};if(!t)return null;const S="w-full bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3.5 text-sm font-medium text-zinc-900 dark:text-zinc-100 outline-none transition-all duration-200 focus:bg-white dark:focus:bg-zinc-800 focus:border-black dark:focus:border-zinc-500 focus:ring-4 focus:ring-zinc-100 dark:focus:ring-zinc-800/50 placeholder:text-zinc-400",E="text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-2 flex items-center gap-1.5 ml-1";return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-zinc-900/40 dark:bg-black/80 backdrop-blur-md transition-opacity duration-300",onClick:a}),e.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-[#121212] rounded-[2rem] shadow-2xl ring-1 ring-zinc-900/5 dark:ring-white/10 overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 slide-in-from-bottom-4 duration-300 ease-out",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-zinc-100 dark:border-zinc-800 flex justify-between items-center bg-white/80 dark:bg-[#121212]/80 backdrop-blur-xl z-10 sticky top-0",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight flex items-center gap-2",children:[n?e.jsx(O,{className:"text-blue-500",size:20}):e.jsx(R,{className:"text-violet-500",size:20}),n?"Edit Event":"New Event"]}),e.jsx("p",{className:"text-xs text-zinc-500 font-medium mt-0.5 ml-7",children:"Update incident timeline details"})]}),e.jsx("button",{onClick:a,disabled:l,className:"p-2.5 -mr-2 text-zinc-400 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full transition-all duration-200 hover:rotate-90 active:scale-90",children:e.jsx(V,{size:22})})]}),e.jsxs("form",{onSubmit:$,className:"flex-1 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:E,children:[e.jsx(se,{size:12})," Date"]}),e.jsx("input",{type:"date",className:`${S} ${j.date?"border-red-500":""}`,value:c.date,onChange:r=>g({...c,date:r.target.value})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:E,children:[e.jsx(R,{size:12})," Time"]}),e.jsx("input",{type:"time",className:`${S} ${j.time?"border-red-500":""}`,value:c.time,onChange:r=>g({...c,time:r.target.value})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:E,children:[e.jsx(O,{size:12})," Description"]}),e.jsx("textarea",{rows:3,placeholder:"",className:`${S} resize-none min-h-[100px] ${j.desc?"border-red-500":""}`,value:c.desc,onChange:r=>g({...c,desc:r.target.value})})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("label",{className:E.replace("mb-2","mb-0"),children:[e.jsx(_e,{size:12})," Attachments"]}),e.jsxs("span",{className:"text-[10px] font-bold text-zinc-400",children:[c.imageUrls.length," Files"]})]}),e.jsxs("div",{className:"bg-zinc-100/50 dark:bg-zinc-900/50 p-1.5 rounded-2xl border border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex p-1 gap-1",children:[e.jsxs("button",{type:"button",onClick:()=>o("link"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${z==="link"?"bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black shadow-sm":"text-zinc-500 hover:bg-zinc-200 dark:hover:bg-zinc-800"}`,children:[e.jsx(re,{size:12,strokeWidth:3})," Link URL"]}),e.jsxs("button",{type:"button",onClick:()=>o("upload"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${z==="upload"?"bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black shadow-sm":"text-zinc-500 hover:bg-zinc-200 dark:hover:bg-zinc-800"}`,children:[e.jsx(Te,{size:12,strokeWidth:3})," Upload"]})]}),e.jsx("div",{className:"mt-1 p-1",children:z==="link"?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Paste image URL here...",className:"w-full h-11 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl px-4 text-xs outline-none focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700",value:k,onChange:r=>d(r.target.value)}),e.jsx(re,{size:14,className:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400"})]}),e.jsx("button",{type:"button",onClick:()=>y(),disabled:!k,className:"w-11 h-11 shrink-0 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl flex items-center justify-center transition-all active:scale-90 disabled:opacity-20",children:e.jsx(ve,{size:20,strokeWidth:3})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-xl bg-white dark:bg-zinc-800/50 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-all cursor-pointer relative overflow-hidden",onClick:()=>!s&&w.current.click(),children:[e.jsx("input",{type:"file",ref:w,className:"hidden",accept:"image/*",onChange:C}),s?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ee,{size:24,className:"animate-spin text-blue-500"}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-500 uppercase",children:"Uploading..."})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(oe,{size:24,className:"text-zinc-400"}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-500 uppercase",children:"Click to select file"})]})]})})]}),c.imageUrls.length>0&&e.jsx("div",{className:"grid grid-cols-4 gap-2 px-1",children:c.imageUrls.map((r,h)=>e.jsxs("div",{className:"group relative aspect-square rounded-xl overflow-hidden bg-zinc-100 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700",children:[e.jsx("img",{src:Y(r),alt:"attachment",className:"w-full h-full object-cover",onError:f=>{f.target.src="https://placehold.co/400?text=Image+Not+Found"}}),e.jsx("button",{type:"button",onClick:()=>u(h),className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white",children:e.jsx(W,{size:16})})]},h))})]})]}),e.jsx("div",{className:"p-6 pt-4 bg-white dark:bg-[#121212] sticky bottom-0 border-t border-zinc-100 dark:border-zinc-800",children:e.jsxs("button",{type:"submit",disabled:l,className:"w-full h-14 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-2xl font-black text-xs uppercase tracking-widest shadow-xl hover:shadow-zinc-500/20 active:scale-[0.98] transition-all disabled:opacity-50 flex items-center justify-center gap-3",children:[l?e.jsx(ee,{size:18,className:"animate-spin"}):e.jsx(ie,{size:18}),"Save Timeline Event"]})})]})]})]})}function ct({isOpen:t,onClose:a,text:i,incident:n}){const[l,c]=B.useState(!1),[g,k]=B.useState("preview"),d=m.useMemo(()=>{if(n)return{meta:{Project:n.project||"-",Subject:n.subject||"-",Status:n.status||"-",Ticket:n.ticket||"-"},details:{Impact:n.impact||"-","Root Cause":n.root_cause||"-","Action Taken":n.action||"-"},timeline:(n.events||[]).map(w=>({date:w.date?new Date(w.date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"}):"-",time:w.time,desc:w.desc||w.title,originalDate:w.date,imageUrls:w.imageUrls||(w.image?[w.image]:[])}))};if(!i)return null;const s={meta:{},details:{},timeline:[]},b=i.split(`
`);let j=!1,x="";return b.forEach(w=>{const y=w.trim();if(!y)return;const C=w.indexOf(":");if(!j&&C!==-1&&C<20){const u=w.substring(0,C).trim(),p=w.substring(C+1).trim();["Project","Subject","Status","Ticket"].includes(u)?s.meta[u]=p:(["Impact","Root Cause","Action Taken"].includes(u),s.details[u]=p)}else if(j=!0,y.length<20&&/\d/.test(y)&&!y.includes("-"))x=y;else{const p=y.match(/^(\d{1,2}:\d{2})(?:\s*:|\s*-|\s*à¸™\.)?\s*(.*)/);p?s.timeline.push({date:x,time:p[1],desc:p[2]||""}):s.timeline.push({date:x,time:null,desc:y})}}),s},[i,n]),z=async()=>{try{await navigator.clipboard.writeText(i),c(!0),setTimeout(()=>{c(!1),a()},1e3)}catch(s){console.error("Failed to copy:",s);const b=document.createElement("textarea");b.value=i,document.body.appendChild(b),b.select(),document.execCommand("copy"),document.body.removeChild(b),c(!0),setTimeout(()=>{c(!1),a()},1e3)}},o=()=>{const s=new Blob([i],{type:"text/plain;charset=utf-8"}),b=URL.createObjectURL(s),j=document.createElement("a");j.href=b,j.download=`Incident_Report_${d?.meta.Ticket||"Draft"}.txt`,j.click(),URL.revokeObjectURL(b)};return B.useEffect(()=>{const s=b=>{b.key==="Escape"&&t&&a()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t,a]),t?e.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 transition-all",onClick:a,children:e.jsxs("div",{className:"bg-white dark:bg-[#09090b] w-full max-w-3xl h-[85vh] rounded-3xl border border-zinc-200 dark:border-zinc-800 shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 relative",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-5 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl shadow-sm",children:e.jsx(O,{size:24,className:"text-zinc-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-lg text-zinc-900 dark:text-white uppercase tracking-tight",children:"Report Preview"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("button",{onClick:()=>k("preview"),className:`text-[10px] font-black uppercase tracking-widest px-2 py-0.5 rounded-md transition-all ${g==="preview"?"bg-zinc-900 text-white dark:bg-white dark:text-black":"text-zinc-400 hover:text-zinc-600"}`,children:"Visual"}),e.jsx("div",{className:"w-[1px] h-3 bg-zinc-300 dark:bg-zinc-700"}),e.jsx("button",{onClick:()=>k("raw"),className:`text-[10px] font-black uppercase tracking-widest px-2 py-0.5 rounded-md transition-all ${g==="raw"?"bg-zinc-900 text-white dark:bg-white dark:text-black":"text-zinc-400 hover:text-zinc-600"}`,children:"Raw Text"})]})]})]}),e.jsx("button",{onClick:a,className:"p-2 text-zinc-400 hover:text-black dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full transition-colors",children:e.jsx(V,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-white dark:bg-[#09090b]",children:g==="raw"?e.jsx("textarea",{readOnly:!0,value:i,className:"w-full h-full p-6 font-mono text-xs font-medium text-zinc-600 dark:text-zinc-300 bg-transparent resize-none border-none outline-none leading-relaxed"}):e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d?.meta&&Object.entries(d.meta).map(([s,b])=>e.jsxs("div",{className:"p-4 rounded-2xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400 block mb-1",children:s}),e.jsx("span",{className:"text-sm font-bold text-zinc-900 dark:text-white block truncate",children:b})]},s))}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-zinc-400 flex items-center gap-2",children:[e.jsx(q,{size:14})," Incident Details"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:d?.details&&Object.entries(d.details).map(([s,b])=>{let j=q;return s.includes("Impact")&&(j=K),s.includes("Root")&&(j=Ge),s.includes("Action")&&(j=Je),e.jsxs("div",{className:"relative pl-4 border-l-2 border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(j,{size:12,className:"text-zinc-400"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:s})]}),e.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300 font-medium whitespace-pre-wrap leading-relaxed",children:b==="-"?e.jsx("span",{className:"text-zinc-300 italic",children:"No description provided"}):b})]},s)})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-zinc-900",children:[e.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-zinc-400 flex items-center gap-2",children:[e.jsx(R,{size:14})," Timeline"]}),e.jsxs("div",{className:"relative space-y-6",children:[e.jsx("div",{className:"absolute top-2 bottom-2 left-[7px] w-[2px] bg-zinc-100 dark:bg-zinc-800"}),d?.timeline.map((s,b)=>e.jsxs("div",{className:"relative pl-8",children:[e.jsx("div",{className:"absolute left-[2px] top-[6px] w-3 h-3 rounded-full border-2 border-white dark:border-black bg-zinc-300 dark:bg-zinc-700 z-10"}),(b===0||s.date!==d.timeline[b-1].date)&&e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(se,{size:12,className:"text-zinc-400"}),e.jsx("span",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:s.date})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800",children:[s.time&&e.jsx("span",{className:"block text-xs font-black text-zinc-900 dark:text-white mb-0.5",children:s.time}),e.jsx("span",{className:"block text-xs text-zinc-600 dark:text-zinc-400",children:s.desc}),s.imageUrls&&s.imageUrls.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mt-3",children:s.imageUrls.map((j,x)=>e.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden border border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900",children:e.jsx("img",{src:Y(j),alt:`Evidence ${x+1}`,className:"w-full h-full object-cover",onError:w=>{w.target.src="https://placehold.co/400?text=Image+Load+Failed"}})},x))})]})]},b)),d?.timeline.length===0&&e.jsx("div",{className:"text-center py-8 text-zinc-400 text-xs italic",children:"No timeline events recorded."})]})]})]})}),e.jsxs("div",{className:"p-5 border-t border-zinc-200 dark:border-zinc-800 bg-white dark:bg-[#09090b] flex justify-end gap-3 z-10",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest bg-zinc-100 dark:bg-zinc-900 text-zinc-600 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors",children:[e.jsx(ne,{size:16})," Download"]}),e.jsx("button",{onClick:z,disabled:l,className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-lg hover:-translate-y-0.5 active:translate-y-0 ${l?"bg-emerald-500 text-white shadow-emerald-500/20":"bg-zinc-900 dark:bg-white text-white dark:text-black hover:shadow-xl"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx(ye,{size:16})," Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:16})," Copy to Clipboard"]})})]})]})}):null}function ot({isOpen:t,onClose:a,incident:i,onUpdate:n}){const[l,c]=m.useState({project:"",type:"Incident",ticket:"",impact:"",root_cause:"",action:""});if(m.useEffect(()=>{i&&c({project:i.project||"",type:i.type||"Incident",ticket:i.ticket||"",impact:i.impact||"",root_cause:i.root_cause||"",action:i.action||""})},[i,t]),!t)return null;const g=o=>{o.preventDefault(),n(l),a()},k="block text-[10px] font-black text-zinc-400 dark:text-zinc-500 uppercase tracking-widest mb-1.5 flex items-center gap-2",d="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg px-3 py-2 text-xs font-bold text-zinc-900 dark:text-zinc-100 focus:ring-1 focus:ring-black dark:focus:ring-white outline-none transition-all",z="w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg px-3 py-2 text-xs font-medium text-zinc-700 dark:text-zinc-300 focus:ring-1 focus:ring-black dark:focus:ring-white outline-none transition-all resize-none min-h-[80px]";return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-[#0a0a0a] w-full max-w-2xl rounded-2xl shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden scale-in-center animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-zinc-100 dark:border-zinc-800 flex items-center justify-between bg-zinc-50/50 dark:bg-zinc-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-black dark:bg-white flex items-center justify-center",children:e.jsx(q,{size:18,className:"text-white dark:text-black"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-zinc-900 dark:text-white",children:"Incident Information"}),e.jsx("p",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-tight",children:"Modify incident metadata and details"})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-zinc-200 dark:hover:bg-zinc-800 rounded-full transition-colors",children:e.jsx(V,{size:18,className:"text-zinc-400"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:k,children:[e.jsx(Ae,{size:12})," Project"]}),e.jsx("input",{type:"text",className:d,value:l.project,onChange:o=>c({...l,project:o.target.value}),placeholder:"Project Name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:k,children:[e.jsx(Ve,{size:12})," Type"]}),e.jsxs("select",{className:d,value:l.type,onChange:o=>c({...l,type:o.target.value}),children:[e.jsx("option",{value:"Incident",children:"Incident"}),e.jsx("option",{value:"Request",children:"Request"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:k,children:[e.jsx(ae,{size:12})," Ticket ID"]}),e.jsx("input",{type:"text",className:d,value:l.ticket,onChange:o=>c({...l,ticket:o.target.value}),placeholder:"NO-TICKET"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:k,children:[e.jsx(ge,{size:12})," Reporter"]}),e.jsx("input",{type:"text",className:`${d} opacity-50 cursor-not-allowed`,value:i.createdBy||"Unknown",readOnly:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:k,children:[e.jsx(P,{size:12})," Impact"]}),e.jsx("textarea",{className:z,value:l.impact,onChange:o=>c({...l,impact:o.target.value}),placeholder:"Describe the impact of this incident..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:k,children:[e.jsx(O,{size:12})," Root Cause"]}),e.jsx("textarea",{className:z,value:l.root_cause,onChange:o=>c({...l,root_cause:o.target.value}),placeholder:"What was the root cause?"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:k,children:[e.jsx(q,{size:12})," Action Taken"]}),e.jsx("textarea",{className:z,value:l.action,onChange:o=>c({...l,action:o.target.value}),placeholder:"What actions were taken to resolve this?"})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100 transition-all",children:"Discard"}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-8 py-2.5 bg-black dark:bg-white text-white dark:text-black rounded-xl text-[10px] font-black uppercase tracking-widest shadow-xl hover:opacity-90 active:scale-95 transition-all",children:[e.jsx(ie,{size:14}),"Save Changes"]})]})]})]})})}function lt({incident:t={},onUpdate:a=()=>{},onBack:i=()=>{},onDelete:n=()=>{},onEdit:l=()=>{},onGenerateReport:c=()=>{}}){const g=t.subject?.includes("|")&&t.subject?.includes("-"),k=x=>({Open:{bg:"bg-red-500/10",text:"text-red-600",border:"border-red-500/20",icon:P},Pending:{bg:"bg-amber-500/10",text:"text-amber-600",border:"border-amber-500/20",icon:R},Succeed:{bg:"bg-emerald-500/10",text:"text-emerald-600",border:"border-emerald-500/20",icon:F},Closed:{bg:"bg-zinc-500/10",text:"text-zinc-500",border:"border-zinc-500/20",icon:Q}})[x]||{bg:"bg-zinc-500/10",text:"text-zinc-500",border:"border-zinc-500/20",icon:P},d=x=>({Critical:{color:"text-red-600",icon:K,bg:"bg-red-500/10"},High:{color:"text-orange-600",icon:K,bg:"bg-orange-500/10"},Medium:{color:"text-yellow-600",icon:J,bg:"bg-yellow-500/10"},Low:{color:"text-blue-600",icon:J,bg:"bg-blue-500/10"}})[x]||{color:"text-zinc-500",icon:J,bg:"bg-zinc-500/10"},z=k(t.status||"Open"),o=z.icon,s=d(t.priority||"Medium"),b=s.icon,j=x=>{const w=x.target.value;let y={subject:w};if(w.includes("|")&&w.includes("-")){const C=w.split("|").map(u=>u.trim());if(C.length>=2){const u=C[0].split("-").map(p=>p.trim());if(u.length>=2){y.ticket=u[0],y.project=u[1];const p=C[1],$=["Incident","Request","Maintenance"];y.type=$.find(S=>S.toLowerCase()===p.toLowerCase())||p,C.length>=3&&(y.subject=C.slice(2).join(" | "))}}}a(y)};return e.jsx("div",{className:"relative px-4 py-2 border-b border-zinc-100 dark:border-zinc-800 z-20 shrink-0 bg-white dark:bg-[#080808] transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[e.jsx("button",{onClick:i,className:"p-1.5 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-900 text-zinc-400 hover:text-black dark:text-zinc-500 dark:hover:text-white transition-all",children:e.jsx(Ee,{size:14})}),e.jsx("div",{className:"w-px h-4 bg-zinc-100 dark:bg-zinc-800 mx-1"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-0.5 rounded border ${z.border} ${z.bg}`,children:[e.jsx(o,{size:10,className:z.text}),e.jsx("select",{value:t.status||"Open",onChange:x=>a({status:x.target.value}),className:`bg-transparent font-black uppercase text-[8px] tracking-wider cursor-pointer outline-none border-none p-0 focus:ring-0 ${z.text}`,children:["Open","Pending","Succeed","Closed"].map(x=>e.jsx("option",{value:x,className:"bg-white dark:bg-zinc-900 text-zinc-800 dark:text-zinc-200",children:x},x))})]}),e.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-0.5 rounded border border-transparent ${s.bg}`,children:[e.jsx(b,{size:10,className:s.color}),e.jsx("select",{value:t.priority||"Medium",onChange:x=>a({priority:x.target.value}),className:`bg-transparent font-black uppercase text-[8px] tracking-wider cursor-pointer outline-none border-none p-0 focus:ring-0 ${s.color}`,children:["Critical","High","Medium","Low"].map(x=>e.jsx("option",{value:x,className:"bg-white dark:bg-zinc-900 text-zinc-800 dark:text-zinc-200",children:x},x))})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-2 ml-2",children:[e.jsxs("span",{className:"text-[10px] font-mono font-black text-blue-500 tracking-tighter opacity-70",children:["#",t.ticket||"NO-ID"]}),e.jsx("div",{className:"h-1 w-1 rounded-full bg-zinc-200 dark:bg-zinc-800"}),e.jsx("span",{className:"text-[9px] font-black uppercase text-zinc-400 tracking-widest truncate max-w-[100px]",children:t.project||"GENERAL"})]})]}),e.jsxs("div",{className:"flex-1 max-w-2xl relative group px-2",children:[e.jsx("input",{type:"text",className:"w-full text-sm md:text-base font-black text-zinc-900 dark:text-white placeholder-zinc-300 dark:placeholder-zinc-700 border-none bg-transparent p-0 focus:ring-0 leading-tight transition-all",value:t.subject||"",onChange:j,placeholder:"Auto Parsing..."}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1 pointer-events-none",children:e.jsx(Ne,{size:12,className:`transition-all duration-500 ${g?"text-emerald-500 fill-current animate-pulse":"text-zinc-200 dark:text-zinc-800"}`})})]}),e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx("button",{onClick:c,className:"p-1.5 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-400 hover:text-blue-500 transition-all",title:"Report",children:e.jsx(O,{size:14})}),e.jsx("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-400 hover:text-orange-500 transition-all",title:"Settings",children:e.jsx(je,{size:14})}),e.jsx("button",{onClick:n,className:"p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-zinc-400 hover:text-red-500 transition-all",title:"Delete",children:e.jsx(W,{size:14})}),e.jsx("div",{className:"w-px h-4 bg-zinc-100 dark:bg-zinc-800 mx-1 hidden sm:block"}),e.jsxs("div",{className:"flex flex-col items-end shrink-0 hidden sm:flex ml-1",children:[e.jsx("span",{className:"text-[7px] font-black text-zinc-300 dark:text-zinc-600 uppercase tracking-widest",children:"Date"}),e.jsx("span",{className:"text-[9px] font-black text-zinc-400 dark:text-zinc-500 tracking-tighter mt-0.5",children:t.createdAt?new Date(t.createdAt).toLocaleDateString("en-GB"):"N/A"})]})]})]})})}function dt({incident:t,isLoading:a,onUpdateIncident:i,onAddEvent:n,onDeleteEvent:l,onUpdateEvent:c,onReorderEvent:g,onDeleteIncident:k,onBack:d}){const[z,o]=m.useState(!1),[s,b]=m.useState(!1),[j,x]=m.useState(null),[w,y]=m.useState(!1),[C,u]=m.useState(""),p=m.useMemo(()=>t?.events?[...t.events].sort((r,h)=>{if(typeof r.order=="number"&&typeof h.order=="number"&&r.order!==h.order)return r.order-h.order;const f=`${r.date||"1970-01-01"}T${r.time||"00:00"}`,v=`${h.date||"1970-01-01"}T${h.time||"00:00"}`;return f<v?1:f>v?-1:0}):[],[t]);if(!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-zinc-50 dark:bg-[#050505] transition-colors",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-zinc-100 to-zinc-200 dark:from-zinc-800 dark:to-zinc-900 flex items-center justify-center mb-6 shadow-inner",children:e.jsx(Ce,{size:32,className:"text-zinc-300 dark:text-zinc-600"})}),e.jsx("p",{className:"font-black text-zinc-400 dark:text-zinc-600 uppercase tracking-widest text-xs",children:"Select an incident to view details"})]});const $=(r,h)=>{const f=[...p],v=h==="up"?r-1:r+1;if(v<0||v>=f.length)return;[f[r],f[v]]=[f[v],f[r]];const I=f.map((M,L)=>({...M,order:L}));g&&g(t.id,I)},S=r=>{i(t.id,r)},E=()=>{const h=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}).replace(/ /g,"-").toLowerCase(),f={};p.forEach(I=>{const L=(I.date?new Date(I.date):new Date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"});f[L]||(f[L]=[]),f[L].push(I)});let v=`Project: ${t.project||"-"}
Subject: ${t.type||"Incident"} | ${t.subject||"-"} | ${h}
Status: ${t.status||"-"}
Ticket: ${t.ticket||"-"}
Impact: ${t.impact||"-"}
Root Cause: ${t.root_cause||"-"}
Action Taken: ${t.action||"-"}

`;Object.keys(f).forEach(I=>{v+=`${I}
`,f[I].forEach(M=>{v+=`${M.time} - ${M.desc||M.title}`;const L=M.imageUrls||(M.image?[M.image]:[]);L.length>0&&L.forEach(G=>v+=`
ðŸ“Ž ${G}`),v+=`
`}),v+=`
`}),u(v),y(!0)};return e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#080808] relative transition-colors duration-300 overflow-hidden",children:[e.jsx(lt,{incident:t,onUpdate:S,onBack:d,onDelete:()=>k(t.id),onEdit:()=>b(!0),onGenerateReport:E}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-8 custom-scrollbar bg-zinc-50/50 dark:bg-black relative min-h-0",children:a?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-400 gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-zinc-200 border-t-black dark:border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] animate-pulse",children:"Loading Timeline..."})]}):p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-300 dark:text-zinc-700 pb-20",children:[e.jsx(R,{size:48,className:"mb-4 opacity-50"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"No timeline events recorded"}),e.jsx("button",{onClick:()=>{x(null),o(!0)},className:"mt-6 px-6 py-3 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl text-xs font-black uppercase shadow-sm hover:shadow-md hover:border-black dark:hover:border-white transition-all",children:"Start Logging"})]}):e.jsxs("div",{className:"flex flex-col pb-24 relative max-w-3xl mx-auto",children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-[27px] w-[2px] bg-zinc-200 dark:bg-zinc-800 z-0"}),p.map((r,h)=>{const f=h===0||r.date!==p[h-1].date;let v="-";try{v=r.date?new Date(r.date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"}):"-"}catch{}return e.jsx(st,{event:r,index:h,isLastItem:h===p.length-1,showDateHeader:f,dateLabel:v,onMove:$,onEdit:I=>{x(I),o(!0)},onDelete:I=>l(t.id,I)},r.id)})]})}),e.jsx("button",{onClick:()=>{x(null),o(!0)},className:"absolute bottom-8 right-8 bg-black dark:bg-white text-white dark:text-black w-14 h-14 rounded-full shadow-2xl hover:shadow-blue-500/20 hover:scale-105 transition-all z-30 flex items-center justify-center active:scale-95 group",children:e.jsx(we,{size:28,className:"group-hover:rotate-90 transition-transform duration-300"})}),e.jsx(it,{isOpen:z,onClose:()=>o(!1),initialData:j,onSubmit:r=>{j?c(t.id,j.id,r):n(t.id,r),o(!1)}}),e.jsx(ct,{isOpen:w,onClose:()=>y(!1),text:C,incident:t}),e.jsx(ot,{isOpen:s,onClose:()=>b(!1),incident:t,onUpdate:S})]})}function Nt(){const{currentUser:t}=X(),{incidents:a,filteredIncidents:i,selectedId:n,setSelectedId:l,loading:c,stats:g,searchTerm:k,setSearchTerm:d,filterStatus:z,setFilterStatus:o,filterType:s,setFilterType:b,clearFilters:j,hasActiveFilters:x}=Ke(),{sortedEvents:w,loading:y}=Xe(n),[C,u]=m.useState({isOpen:!1}),{toast:p}=ue(),[$,S]=m.useState(!1),E=a.find(N=>N.id===n),r=m.useCallback((N,D="success")=>{p({description:N,variant:D})},[p]),h=async()=>{if(!t){r("Please login first!","error");return}S(!0);try{const N=await A.createIncident({subject:"New Incident",project:"MONOMAX",status:"Open",type:"Incident",ticket:"",createdBy:t,impact:"",root_cause:"",action:""});l(N.id),r("Incident created")}catch(N){console.error("Error creating incident:",N),r(N.message||"Failed to create incident","error")}finally{S(!1)}},f=N=>{u({isOpen:!0,title:"Delete Incident?",message:"This action cannot be undone. All timeline events will be permanently deleted.",isDanger:!0,onConfirm:async()=>{try{await A.deleteIncident(N),n===N&&l(null),u({isOpen:!1}),r("Incident deleted")}catch(D){console.error("Error deleting incident:",D),r(D.message||"Failed to delete","error")}}})},v=async(N,D)=>{try{await A.updateIncident(N,D)}catch(T){console.error("Error updating incident:",T),r(T.message||"Failed to update","error")}},I=async(N,D)=>{try{await A.createEvent(N,D),r("Event added")}catch(T){console.error("Error adding event:",T),r(T.message||"Failed to add event","error")}},M=async(N,D,T)=>{try{await A.updateEvent(N,D,T),r("Event updated")}catch(H){console.error("Error updating event:",H),r(H.message||"Failed to update event","error")}},L=async(N,D)=>{u({isOpen:!0,title:"Delete Event?",message:"This timeline event will be permanently removed.",isDanger:!0,onConfirm:async()=>{try{await A.deleteEvent(N,D),u({isOpen:!1}),r("Event deleted")}catch(T){console.error("Error deleting event:",T),r(T.message||"Failed to delete event","error")}}})},G=async(N,D)=>{try{await A.reorderEvents(N,D)}catch(T){console.error("Error reordering events:",T),r(T.message||"Failed to reorder","error")}},le=N=>{if(!N||N.length===0){r("No data to export","error");return}const T=["Date,Project,Ticket,Type,Status,Subject,CreatedBy",...N.map(_=>{const de=_.createdAt?new Date(_.createdAt).toLocaleDateString("en-GB"):"-",xe=(_.subject||"").replace(/"/g,'""');return`"${de}","${_.project||""}","${_.ticket||""}","${_.type||""}","${_.status}","${xe}","${_.createdBy||""}"`})].join(`
`),H=new Blob(["\uFEFF"+T],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a");Z.href=URL.createObjectURL(H),Z.download=`Incidents_Export_${new Date().toISOString().split("T")[0]}.csv`,Z.click(),r("CSV exported")};return e.jsxs("div",{className:"w-full h-full flex overflow-hidden bg-zinc-50 dark:bg-black",children:[e.jsx(me,{isOpen:C.isOpen,onClose:()=>u({isOpen:!1}),...C}),e.jsx("div",{className:`
        h-full border-r border-zinc-200 dark:border-zinc-800 overflow-hidden bg-white dark:bg-[#050505] flex-shrink-0 transition-all duration-300
        ${n?"hidden lg:block lg:w-[350px]":"w-full lg:w-[350px]"}
      `,children:e.jsx(rt,{incidents:a,filteredIncidents:i,selectedId:n,onSelect:l,onAddIncident:h,onDeleteIncident:f,onExportCSV:le,stats:g,searchTerm:k,setSearchTerm:d,filterStatus:z,setFilterStatus:o,filterType:s,setFilterType:b,clearFilters:j,hasActiveFilters:x,loading:c})}),e.jsx("div",{className:`
        h-full flex-1 min-w-0 overflow-hidden bg-white dark:bg-[#09090b] relative
        ${n?"block":"hidden lg:block"}
      `,children:e.jsx(dt,{incident:E?{...E,events:w}:null,isLoading:y,onBack:()=>l(null),onUpdateIncident:v,onAddEvent:I,onUpdateEvent:M,onDeleteEvent:L,onDeleteIncident:f,onReorderEvent:G,saving:$})})]})}export{Nt as default};
