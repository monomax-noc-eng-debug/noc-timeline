import{d as T,r as o,g as u,f as k,p as j,j as e,F as M,z as P,y as g,J as R,R as F,X as A}from"./index-BFEWtwhJ.js";import{g as E,f as q}from"./HistoryPage-gDyBsNlS.js";import{A as z}from"./activity-CgZXiaul.js";import{A as N}from"./arrow-right-Br0XfVuf.js";import{P as B}from"./panels-top-left-C7ECsTKU.js";import{T as G}from"./tv-hB4auxPZ.js";import{C as L}from"./configService-D_rl3Y87.js";import{H as U}from"./hash-DmiTfhO3.js";import"./useBaseQuery-BL-GicvM.js";import"./format-DU8rxv2E.js";import"./formatters-DpnTxRTe.js";import"./addYears-C7ezsmVv.js";import"./setYear-BV4xPqlg.js";import"./sliders-horizontal-iwKFpgUC.js";import"./chevron-right-DVovX0bV.js";import"./chevron-down-qX9YY_vo.js";import"./TimeInput-BnbwFigf.js";import"./rotate-ccw-DgI1qe1m.js";import"./search-Caa-NJMl.js";import"./save-CToUh0ov.js";import"./eye-off-wUUm9IBM.js";import"./eye-Wr1II4DD.js";import"./database-4IflcLbJ.js";import"./pen-line-BEUyYOJm.js";import"./trash-2-DeAKwTRc.js";import"./index-B6h196zp.js";import"./parse-ChHvz_2n.js";import"./layout-grid-B3vlPxs7.js";const _=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],H=T("gauge",_),W=(r,l)=>{const[s,a]=o.useState({start:null,end:null,loading:!1}),[x,t]=o.useState(null),i=o.useCallback(async()=>{if(r){a(n=>({...n,loading:!0})),t(null);try{const n=u(k,"schedules",r,"statistics","start_stat"),m=u(k,"schedules",r,"statistics","end_stat"),[c,p]=await Promise.all([j(n),j(m)]);a({start:c.exists()?c.data():null,end:p.exists()?p.data():null,loading:!1})}catch(n){console.error("Error fetching match detail stats:",n),t(n.message),a(m=>({...m,loading:!1}))}}},[r]);return o.useEffect(()=>{let n=!0;return l&&r&&setTimeout(()=>{n&&i()},0),()=>{n=!1}},[l,r,i]),{...s,error:x,refetch:i}},v=o.memo(({score:r,label:l,colorClass:s,statusLabel:a})=>{const t=2*Math.PI*20,i=t-r/100*t;return e.jsxs("div",{className:"flex flex-col items-center gap-2 group",children:[e.jsxs("div",{className:"relative flex items-center justify-center w-14 h-14 transition-transform group-hover:scale-105 duration-500",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"28",cy:"28",r:20,fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-zinc-100 dark:text-zinc-800/50"}),e.jsx("circle",{cx:"28",cy:"28",r:20,fill:"none",stroke:"currentColor",strokeWidth:"3.5",strokeDasharray:t,strokeDashoffset:i,strokeLinecap:"round",className:g(s,"transition-all duration-1000 ease-out")})]}),e.jsxs("div",{className:"absolute flex flex-col items-center leading-none",children:[e.jsx("span",{className:g("text-[10px] font-black tracking-tighter",s),children:r}),e.jsx("span",{className:"text-[5px] font-semibold text-zinc-400 mt-0.5",children:"%"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:l}),a&&e.jsx("p",{className:"text-[8px] font-bold text-emerald-500 uppercase tracking-tight mt-0.5",children:a})]})]})}),w=o.memo(({icon:r,label:l,value:s,subValue:a,colorClass:x="text-zinc-400",bgClass:t="bg-zinc-50 dark:bg-zinc-900/50"})=>{const i=r;return e.jsxs("div",{className:"p-3 rounded-lg border border-zinc-100 dark:border-zinc-800/50 flex items-center gap-3 transition-all hover:bg-white dark:hover:bg-zinc-900 hover:shadow-lg hover:shadow-zinc-200/20 dark:hover:shadow-none bg-white dark:bg-[#09090b] group",children:[e.jsx("div",{className:g("w-10 h-10 rounded-lg flex items-center justify-center transition-transform group-hover:scale-110 shadow-inner shrink-0",t,x),children:e.jsx(i,{size:16})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[8px] font-medium text-zinc-400 mb-0.5 leading-none",children:l}),e.jsx("p",{className:"text-xs font-black text-zinc-900 dark:text-zinc-100 truncate leading-tight uppercase tracking-tight",children:s}),a&&e.jsx("p",{className:"text-[7px] font-bold text-zinc-400 uppercase tracking-tighter mt-0.5",children:a})]})]})}),y=()=>e.jsx("div",{className:"h-32 bg-zinc-100/50 dark:bg-zinc-900/30 rounded-lg animate-pulse border border-zinc-100 dark:border-zinc-800/50"});function be({isOpen:r,onClose:l,matchData:s}){const[a,x]=o.useState(!1),{start:t,end:i,loading:n,refetch:m}=W(s?.id,r),c=o.useMemo(()=>s?E(s):{text:"-",colors:{},icon:z},[s]),p=o.useCallback(d=>{if(d==null)return"-";const h=d?.val!==void 0?d.val:d,b=parseFloat(h);return isNaN(b)?h:b.toLocaleString()},[]),f=d=>parseFloat(d?.bwPeakGbps?.val||0)>0?parseFloat(d?.bwPeakGbps?.val)>5?94:78:0,C=()=>{s?.id&&navigator.clipboard.writeText(s.id)},S=async()=>{x(!0),m&&await m(),setTimeout(()=>x(!1),800)};return!r||!s?null:e.jsxs(M,{isOpen:r,onClose:l,size:"2xl",showCloseButton:!1,headerClassName:"relative shrink-0 overflow-hidden border-b border-zinc-50 dark:border-zinc-900/50 p-0",header:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:g("absolute inset-0 opacity-[0.03] dark:opacity-[0.05] pointer-events-none",c.colors?.bg||"bg-zinc-500")}),e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between gap-4 relative w-full",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 overflow-x-auto no-scrollbar",children:[e.jsxs("div",{className:g("px-3 py-0.5 rounded-full text-[9px] font-medium flex items-center gap-1.5 shrink-0 shadow-sm border",c.colors?.softBg||"bg-zinc-50 text-zinc-400 border-zinc-100 dark:bg-zinc-900 dark:border-zinc-800"),children:[c.icon&&R.createElement(c.icon,{size:10,className:c.pulse?"animate-pulse":""}),c.text]}),e.jsx("span",{className:"text-[9px] font-black text-zinc-300 uppercase tracking-widest truncate",children:s.league||"Standby"})]}),e.jsx("h1",{className:"text-lg md:text-xl font-black text-zinc-900 dark:text-white tracking-tight leading-none truncate",children:s.teamA&&s.teamB?e.jsxs("span",{className:"flex items-center gap-1.5",children:[s.teamA," ",e.jsx("span",{className:"text-zinc-300 dark:text-zinc-800 italic font-medium px-0.5",children:"/"})," ",s.teamB]}):s.title||"Untitled"})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("button",{onClick:C,className:"hidden sm:flex h-9 px-3 items-center gap-2 bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 rounded-lg text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-95",children:[e.jsx(U,{size:12}),e.jsx("span",{className:"text-[9px] font-mono font-black",children:s.id.slice(0,6).toUpperCase()})]}),e.jsx("button",{onClick:S,disabled:n||a,className:"w-9 h-9 flex items-center justify-center bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 rounded-lg text-zinc-400 hover:text-[#0078D4] transition-all active:rotate-180 duration-500 disabled:opacity-30",children:e.jsx(F,{size:16,className:g(a||n?"animate-spin":"")})}),e.jsx("button",{onClick:l,className:"w-9 h-9 flex items-center justify-center bg-zinc-900 dark:bg-white text-white dark:text-black rounded-lg hover:scale-105 active:scale-90 transition-all shadow-lg",children:e.jsx(A,{size:16,strokeWidth:2.5})})]})]})]}),bodyClassName:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-[#fcfcfc] dark:bg-[#050505] space-y-8",footerClassName:"p-4 bg-white dark:bg-[#0a0a0a] border-t border-zinc-50 dark:border-zinc-900 transition-all flex flex-col gap-3",footer:e.jsxs("button",{onClick:l,className:"h-11 w-full bg-zinc-900 dark:bg-white text-white dark:text-black rounded-lg text-[10px] font-semibold flex items-center justify-center gap-2 hover:opacity-90 active:scale-95 transition-all shadow-md",children:["Dismiss View",e.jsx(N,{size:14})]}),children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("h3",{className:"text-[10px] font-semibold text-zinc-400 flex items-center gap-2",children:[e.jsx(z,{size:12})," Live Performance"]}),e.jsx("span",{className:"text-[9px] font-semibold text-zinc-300 bg-zinc-100 dark:bg-zinc-900/50 px-2 py-0.5 rounded-full",children:q(s.startDate)})]}),n||a?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(y,{}),e.jsx(y,{})]}):t||i?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 animate-in slide-in-from-bottom-2 duration-500",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900/40 rounded-lg border border-zinc-100 dark:border-zinc-800/50 p-5 shadow-sm relative group overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500 shrink-0",children:e.jsx(H,{size:12})}),e.jsx("span",{className:"text-[9px] font-medium text-zinc-400",children:"Stream Health"})]}),e.jsxs("div",{className:"flex items-center justify-around py-2",children:[e.jsx(v,{score:t?f(t):0,label:"Start",colorClass:"text-zinc-300"}),e.jsx(N,{className:"text-zinc-100 dark:text-zinc-800",size:14}),e.jsx(v,{score:i?f(i):t?f(t):0,label:"Final",colorClass:"text-emerald-500",statusLabel:"Optimal"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900/40 rounded-lg border border-zinc-100 dark:border-zinc-800/50 p-5 shadow-sm relative group overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-violet-50 dark:bg-violet-900/20 text-violet-500 shrink-0",children:e.jsx(P,{size:12})}),e.jsx("span",{className:"text-[9px] font-medium text-zinc-400",children:"Audience"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{className:"space-y-0.5 text-center sm:text-left",children:[e.jsx("span",{className:"text-[7px] font-black text-zinc-300 uppercase tracking-widest",children:"Base"}),e.jsx("p",{className:"text-sm font-black text-zinc-400 tabular-nums",children:p(t?.reqTotal)})]}),e.jsxs("div",{className:"text-center sm:text-right space-y-0.5",children:[e.jsx("span",{className:"text-[7px] font-black text-violet-400 uppercase tracking-widest",children:"Final"}),e.jsx("p",{className:"text-xl font-black text-zinc-900 dark:text-white tabular-nums tracking-tighter leading-none",children:p(i?.reqTotal||t?.reqTotal)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[e.jsxs("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-900/30 rounded-lg",children:[e.jsx("p",{className:"text-[7px] font-black text-zinc-400 uppercase mb-0.5",children:"Peak CCU"}),e.jsx("p",{className:"text-[10px] font-black text-zinc-800 dark:text-zinc-200",children:p(i?.requestPeak||t?.requestPeak)})]}),e.jsxs("div",{className:"p-2 bg-emerald-50/50 dark:bg-emerald-950/20 rounded-lg border border-emerald-100 dark:border-emerald-900/40",children:[e.jsx("p",{className:"text-[7px] font-black text-emerald-500 uppercase mb-0.5",children:"Growth"}),e.jsx("p",{className:"text-[10px] font-black text-emerald-600 dark:text-emerald-400",children:"+12.4%"})]})]})]})]})]}):e.jsx("div",{className:"py-8 flex flex-col items-center justify-center bg-zinc-50 dark:bg-zinc-950/40 rounded-lg border border-dashed border-zinc-200 dark:border-zinc-800",children:e.jsx("p",{className:"text-[8px] font-medium text-zinc-400",children:"Telemetry engine idle"})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-[10px] font-semibold text-zinc-400 px-1 flex items-center gap-2",children:[e.jsx(B,{size:12})," Specifications"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(w,{icon:G,label:"Stream Feed",value:s.channel||"Standard",bgClass:"bg-[#0078D4]/10 dark:bg-[#0078D4]/20",colorClass:"text-[#0078D4]"}),e.jsx(w,{icon:L,label:"Kick-Off",value:s.startTime||"--:--",bgClass:"bg-zinc-50 dark:bg-zinc-900/50",colorClass:"text-zinc-400"})]})]})]})}export{be as default};
