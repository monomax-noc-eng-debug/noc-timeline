import{a as p,u as f,j as e,C as v,T as j}from"./index-NnLxa0C5.js";import{u as d}from"./useQuery-CQxDf1ra.js";import{q as o,o as k,w as m,c as x,d as h,g as y,a as N}from"./firebaseConfig-B-I4EWGW.js";import{A as u}from"./arrow-right-Dv9Hf0E0.js";import"./useBaseQuery-BoSGXyev.js";const w=(i=null)=>{const a=p(n=>n.currentUser),s=i||new Date().toISOString().split("T")[0],{data:r={total:0,startDone:0,endDone:0,matches:[]},isLoading:l}=d({queryKey:["dashboardMatches",s],queryFn:async()=>{if(!a)return{total:0,startDone:0,endDone:0,matches:[]};const n=o(x(h,"schedules"),m("startDate","==",s),k("startTime","asc")),c=(await y(n)).docs.map(t=>({id:t.id,...t.data()}));return{total:c.length,startDone:c.filter(t=>t.hasStartStat).length,endDone:c.filter(t=>t.hasEndStat).length,matches:c}},enabled:!!a,refetchInterval:1e3*60}),{data:b=0}=d({queryKey:["activeIncidents"],queryFn:async()=>{const n=o(x(h,"incidents"),m("status","!=","Closed"));return(await N(n)).data().count},enabled:!!a,refetchInterval:1e3*60*2});return{daySummary:r,todaySummary:r,activeIncidents:b,loading:l,selectedDate:s}};function C(){const i=f(),a=p(l=>l.currentUser),{todaySummary:s,activeIncidents:r}=w();return e.jsx("div",{className:"h-full bg-zinc-50 dark:bg-black p-8 md:p-12 overflow-y-auto custom-scrollbar flex flex-col justify-center",children:e.jsxs("div",{className:"max-w-5xl mx-auto w-full space-y-12",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-5xl md:text-7xl font-black italic uppercase tracking-tighter dark:text-white mb-4 leading-[0.9]",children:["NOC ",e.jsx("span",{className:"text-zinc-300 dark:text-zinc-700",children:"NTT"})," ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-zinc-900 to-zinc-500 dark:from-white dark:to-zinc-600",children:"Management System"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]}),e.jsxs("p",{className:"text-sm font-bold text-zinc-500 uppercase tracking-[0.2em]",children:["System Operational â€¢ Welcome, ",a]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{onClick:()=>i("/schedule/today"),className:"group bg-white dark:bg-[#111] p-8 rounded-[2.5rem] border border-zinc-200 dark:border-zinc-800 hover:border-black dark:hover:border-white transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-10",children:[e.jsx("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-900 rounded-2xl text-zinc-900 dark:text-white",children:e.jsx(v,{size:28})}),e.jsx(u,{className:"text-zinc-300 group-hover:text-black dark:group-hover:text-white transition-colors"})]}),e.jsx("div",{className:"text-5xl font-black dark:text-white mb-2",children:s.total}),e.jsx("div",{className:"text-xs font-black text-zinc-400 uppercase tracking-widest",children:"Matches Scheduled Today"})]}),e.jsxs("div",{onClick:()=>i("/incidents"),className:"group bg-white dark:bg-[#111] p-8 rounded-[2.5rem] border border-zinc-200 dark:border-zinc-800 hover:border-red-500 dark:hover:border-red-500 transition-all cursor-pointer relative overflow-hidden",children:[r>0&&e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx("span",{className:"flex h-4 w-4 rounded-full bg-red-500 animate-pulse"})}),e.jsxs("div",{className:"flex justify-between items-start mb-10",children:[e.jsx("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-900 rounded-2xl text-red-500",children:e.jsx(j,{size:28})}),e.jsx(u,{className:"text-zinc-300 group-hover:text-red-500 transition-colors"})]}),e.jsx("div",{className:"text-5xl font-black dark:text-white mb-2",children:r}),e.jsx("div",{className:"text-xs font-black text-zinc-400 uppercase tracking-widest",children:"Active Incidents"})]})]})]})})}export{C as default};
