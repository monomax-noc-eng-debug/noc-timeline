import{r as d,A as h,j as e,b,X as P}from"./index-DAanvQcz.js";import{d as k,a as j,j as z}from"./firebaseConfig-CyCI-yMF.js";import{g as T,f as M}from"./HistoryPage-CC9YlBXW.js";import{H as R}from"./hash-vCfntxia.js";import{R as A}from"./refresh-cw-DhqSk9gN.js";import{G as F}from"./gauge-BCQlAoFf.js";import{A as v}from"./useBaseQuery-DFxn4vC0.js";import{U as G}from"./users-DkzfUVat.js";import{P as q}from"./panels-top-left-Tlo7J8nJ.js";import{T as E}from"./tv-BhCofRON.js";import{C as U}from"./clock-BlplEjJw.js";import"./useMatches-DTUWqtg5.js";import"./format-B568ns5f.js";import"./isSameMonth-CRYCS6Ki.js";import"./search-26ZHywIY.js";import"./pencil-CMFu47e5.js";import"./trash-2-1ZQVMCmo.js";import"./eye-ChFX_6d2.js";import"./parse-B7oZ5ZXB.js";import"./addMonths-C-BMKM1V.js";import"./layout-list-BLTszLRP.js";import"./database-Q6W5E5lC.js";import"./zap-F_G-BL33.js";import"./chevron-down-C-Yf2SUI.js";const B=(r,c)=>{const[s,a]=d.useState({start:null,end:null,loading:!1}),[x,t]=d.useState(null),i=d.useCallback(async()=>{if(r){a(n=>({...n,loading:!0})),t(null);try{const n=k(j,"schedules",r,"statistics","start_stat"),m=k(j,"schedules",r,"statistics","end_stat"),[o,p]=await Promise.all([z(n),z(m)]);a({start:o.exists()?o.data():null,end:p.exists()?p.data():null,loading:!1})}catch(n){console.error("Error fetching match detail stats:",n),t(n.message),a(m=>({...m,loading:!1}))}}},[r]);return d.useEffect(()=>{let n=!0;return c&&r&&setTimeout(()=>{n&&i()},0),()=>{n=!1}},[c,r,i]),{...s,error:x,refetch:i}},N=d.memo(({score:r,label:c,colorClass:s,statusLabel:a})=>{const t=2*Math.PI*20,i=t-r/100*t;return e.jsxs("div",{className:"flex flex-col items-center gap-2 group",children:[e.jsxs("div",{className:"relative flex items-center justify-center w-14 h-14 transition-transform group-hover:scale-105 duration-500",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"28",cy:"28",r:20,fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-zinc-100 dark:text-zinc-800/50"}),e.jsx("circle",{cx:"28",cy:"28",r:20,fill:"none",stroke:"currentColor",strokeWidth:"3.5",strokeDasharray:t,strokeDashoffset:i,strokeLinecap:"round",className:b(s,"transition-all duration-1000 ease-out")})]}),e.jsxs("div",{className:"absolute flex flex-col items-center leading-none",children:[e.jsx("span",{className:b("text-[10px] font-black tracking-tighter",s),children:r}),e.jsx("span",{className:"text-[5px] font-black uppercase text-zinc-400 mt-0.5",children:"%"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:c}),a&&e.jsx("p",{className:"text-[8px] font-bold text-emerald-500 uppercase tracking-tight mt-0.5",children:a})]})]})}),w=d.memo(({icon:r,label:c,value:s,subValue:a,colorClass:x="text-zinc-400",bgClass:t="bg-zinc-50 dark:bg-zinc-900/50"})=>{const i=r;return e.jsxs("div",{className:"p-3 rounded-2xl border border-zinc-100 dark:border-zinc-800/50 flex items-center gap-3 transition-all hover:bg-white dark:hover:bg-zinc-900 hover:shadow-lg hover:shadow-zinc-200/20 dark:hover:shadow-none bg-white dark:bg-[#09090b] group",children:[e.jsx("div",{className:b("w-10 h-10 rounded-xl flex items-center justify-center transition-transform group-hover:scale-110 shadow-inner shrink-0",t,x),children:e.jsx(i,{size:16})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-zinc-400 mb-0.5 leading-none",children:c}),e.jsx("p",{className:"text-xs font-black text-zinc-900 dark:text-zinc-100 truncate leading-tight uppercase tracking-tight",children:s}),a&&e.jsx("p",{className:"text-[7px] font-bold text-zinc-400 uppercase tracking-tighter mt-0.5",children:a})]})]})}),y=()=>e.jsx("div",{className:"h-32 bg-zinc-100/50 dark:bg-zinc-900/30 rounded-3xl animate-pulse border border-zinc-100 dark:border-zinc-800/50"});function de({isOpen:r,onClose:c,matchData:s}){const[a,x]=d.useState(!1),{start:t,end:i,loading:n,refetch:m}=B(s?.id,r),o=d.useMemo(()=>s?T(s):{text:"-",colors:{},icon:h},[s]),p=d.useCallback(l=>{if(l==null)return"-";const g=l?.val!==void 0?l.val:l,u=parseFloat(g);return isNaN(u)?g:u.toLocaleString()},[]),f=l=>parseFloat(l?.bwPeakGbps?.val||0)>0?parseFloat(l?.bwPeakGbps?.val)>5?94:78:0,C=()=>{s?.id&&navigator.clipboard.writeText(s.id)},S=async()=>{x(!0),m&&await m(),setTimeout(()=>x(!1),800)};return!r||!s?null:e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-md transition-all duration-300 animate-in fade-in",onClick:c,children:e.jsxs("div",{className:`\r
          relative w-full max-w-2xl max-h-[85vh]\r
          bg-white dark:bg-[#050505] \r
          rounded-[2rem] shadow-2xl border border-zinc-100 dark:border-zinc-900\r
          flex flex-col overflow-hidden \r
          animate-in zoom-in-95 duration-500\r
        `,onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"relative shrink-0 overflow-hidden border-b border-zinc-50 dark:border-zinc-900/50",children:[e.jsx("div",{className:b("absolute inset-0 opacity-[0.03] dark:opacity-[0.05] pointer-events-none",o.colors?.bg||"bg-zinc-500")}),e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between gap-4 relative",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 overflow-x-auto no-scrollbar",children:[e.jsxs("div",{className:b("px-3 py-0.5 rounded-full text-[9px] font-black uppercase tracking-widest flex items-center gap-1.5 shrink-0 shadow-sm border",o.colors?.softBg||"bg-zinc-50 text-zinc-400 border-zinc-100 dark:bg-zinc-900 dark:border-zinc-800"),children:[e.jsx(o.icon,{size:10,className:o.pulse?"animate-pulse":""}),o.text]}),e.jsx("span",{className:"text-[9px] font-black text-zinc-300 uppercase tracking-widest truncate",children:s.league||"Standby"})]}),e.jsx("h1",{className:"text-lg md:text-xl font-black text-zinc-900 dark:text-white tracking-tight leading-none truncate",children:s.teamA&&s.teamB?e.jsxs("span",{className:"flex items-center gap-1.5",children:[s.teamA," ",e.jsx("span",{className:"text-zinc-300 dark:text-zinc-800 italic font-medium px-0.5",children:"/"})," ",s.teamB]}):s.title||"Untitled"})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("button",{onClick:C,className:"hidden sm:flex h-9 px-3 items-center gap-2 bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 rounded-lg text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-95",children:[e.jsx(R,{size:12}),e.jsx("span",{className:"text-[9px] font-mono font-black",children:s.id.slice(0,6).toUpperCase()})]}),e.jsx("button",{onClick:S,disabled:n||a,className:"w-9 h-9 flex items-center justify-center bg-zinc-50 dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 rounded-lg text-zinc-400 hover:text-blue-500 transition-all active:rotate-180 duration-500 disabled:opacity-30",children:e.jsx(A,{size:16,className:b(a||n?"animate-spin":"")})}),e.jsx("button",{onClick:c,className:"w-9 h-9 flex items-center justify-center bg-zinc-900 dark:bg-white text-white dark:text-black rounded-lg hover:scale-105 active:scale-90 transition-all shadow-lg",children:e.jsx(P,{size:16,strokeWidth:2.5})})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-[#fcfcfc] dark:bg-[#050505] space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 flex items-center gap-2",children:[e.jsx(h,{size:12})," Live Performance"]}),e.jsx("span",{className:"text-[9px] font-black uppercase text-zinc-300 bg-zinc-100 dark:bg-zinc-900/50 px-2 py-0.5 rounded-full",children:M(s.startDate)})]}),n||a?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(y,{}),e.jsx(y,{})]}):t||i?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 animate-in slide-in-from-bottom-2 duration-500",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900/40 rounded-3xl border border-zinc-100 dark:border-zinc-800/50 p-5 shadow-sm relative group overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500 shrink-0",children:e.jsx(F,{size:12})}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Stream Health"})]}),e.jsxs("div",{className:"flex items-center justify-around py-2",children:[e.jsx(N,{score:t?f(t):0,label:"Start",colorClass:"text-zinc-300"}),e.jsx(v,{className:"text-zinc-100 dark:text-zinc-800",size:14}),e.jsx(N,{score:i?f(i):t?f(t):0,label:"Final",colorClass:"text-emerald-500",statusLabel:"Optimal"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900/40 rounded-3xl border border-zinc-100 dark:border-zinc-800/50 p-5 shadow-sm relative group overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-violet-50 dark:bg-violet-900/20 text-violet-500 shrink-0",children:e.jsx(G,{size:12})}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Audience"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{className:"space-y-0.5 text-center sm:text-left",children:[e.jsx("span",{className:"text-[7px] font-black text-zinc-300 uppercase tracking-widest",children:"Base"}),e.jsx("p",{className:"text-sm font-black text-zinc-400 tabular-nums",children:p(t?.reqTotal)})]}),e.jsxs("div",{className:"text-center sm:text-right space-y-0.5",children:[e.jsx("span",{className:"text-[7px] font-black text-violet-400 uppercase tracking-widest",children:"Final"}),e.jsx("p",{className:"text-xl font-black text-zinc-900 dark:text-white tabular-nums tracking-tighter leading-none",children:p(i?.reqTotal||t?.reqTotal)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[e.jsxs("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-900/30 rounded-xl",children:[e.jsx("p",{className:"text-[7px] font-black text-zinc-400 uppercase mb-0.5",children:"Peak CCU"}),e.jsx("p",{className:"text-[10px] font-black text-zinc-800 dark:text-zinc-200",children:p(i?.requestPeak||t?.requestPeak)})]}),e.jsxs("div",{className:"p-2 bg-emerald-50/50 dark:bg-emerald-950/20 rounded-xl border border-emerald-100 dark:border-emerald-900/40",children:[e.jsx("p",{className:"text-[7px] font-black text-emerald-500 uppercase mb-0.5",children:"Growth"}),e.jsx("p",{className:"text-[10px] font-black text-emerald-600 dark:text-emerald-400",children:"+12.4%"})]})]})]})]})]}):e.jsx("div",{className:"py-8 flex flex-col items-center justify-center bg-zinc-50 dark:bg-zinc-950/40 rounded-3xl border border-dashed border-zinc-200 dark:border-zinc-800",children:e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-zinc-400",children:"Telemetry engine idle"})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 px-1 flex items-center gap-2",children:[e.jsx(q,{size:12})," Specifications"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(w,{icon:E,label:"Stream Feed",value:s.channel||"Standard",bgClass:"bg-blue-50/50 dark:bg-blue-900/20",colorClass:"text-blue-500"}),e.jsx(w,{icon:U,label:"Kick-Off",value:s.startTime||"--:--",bgClass:"bg-zinc-50 dark:bg-zinc-900/50",colorClass:"text-zinc-400"})]})]})]}),e.jsx("div",{className:"p-4 bg-white dark:bg-[#0a0a0a] border-t border-zinc-50 dark:border-zinc-900 transition-all flex flex-col gap-3",children:e.jsxs("button",{onClick:c,className:"h-11 w-full bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-[10px] font-black uppercase tracking-[0.2em] flex items-center justify-center gap-2 hover:opacity-90 active:scale-95 transition-all shadow-md",children:["Dismiss View",e.jsx(v,{size:14})]})})]})})}export{de as default};
