import{u as v,a as y,r as d,j as e,c as n,L as C}from"./index-CSKDhuAF.js";import{a as k}from"./authService-SJiumC8N.js";import{B as w}from"./button-T8EO3R9w.js";import{I as m}from"./input-CWTwQQ4L.js";import{A as z}from"./arrow-left-VhuXiEi4.js";import{E as u}from"./eye-off-CLgYphw7.js";import{E as x}from"./eye-smACZrx7.js";import{R as S}from"./rotate-ccw-DMoDz3EI.js";import{S as E}from"./save-CT8SH02B.js";import"./firebaseConfig-Cp-1Ewx5.js";function T(){const h=v(),{toast:a}=y(),[s,o]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[t,p]=d.useState(!1),[l,f]=d.useState(!1),[i,g]=d.useState(!1),[c,b]=d.useState(!1),j=async r=>{if(r.preventDefault(),!s.currentPassword||!s.newPassword||!s.confirmPassword){a({variant:"destructive",title:"Missing Information",description:"Please fill in all password fields"});return}if(s.newPassword.length<6){a({variant:"destructive",title:"Weak Password",description:"New password must be at least 6 characters"});return}if(s.newPassword!==s.confirmPassword){a({variant:"destructive",title:"Password Mismatch",description:"New passwords do not match"});return}try{p(!0),await k.changePassword(s.currentPassword,s.newPassword),a({title:"Password Changed",description:"Your password has been updated successfully",className:"bg-emerald-600 text-white border-none"}),o({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{h("/profile")},1e3)}catch(P){a({variant:"destructive",title:"Failed to Change Password",description:P.message})}finally{p(!1)}},N=()=>{o({currentPassword:"",newPassword:"",confirmPassword:""})};return e.jsxs("div",{className:"h-full bg-background flex flex-col",children:[e.jsx("header",{className:"shrink-0 z-30 bg-card/80 backdrop-blur-md border-b border-border",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center",children:[e.jsx("button",{onClick:()=>h(-1),className:"p-2 -ml-2 rounded-lg hover:bg-muted transition-colors mr-3",children:e.jsx(z,{size:20,className:"text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-foreground uppercase tracking-tight",children:"Change Password"}),e.jsx("p",{className:"text-[10px] font-black uppercase text-muted-foreground tracking-widest leading-none mt-0.5 hidden sm:block",children:"Update Your Account Password"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(n,{size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-foreground",children:"Password & Security"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your password to keep your account secure"})]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Current Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(m,{type:l?"text":"password",value:s.currentPassword,onChange:r=>o({...s,currentPassword:r.target.value}),placeholder:"Enter current password",className:"pl-10 pr-10 bg-muted/50 h-12",disabled:t}),e.jsx("button",{type:"button",onClick:()=>f(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:l?e.jsx(u,{size:18}):e.jsx(x,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(m,{type:i?"text":"password",value:s.newPassword,onChange:r=>o({...s,newPassword:r.target.value}),placeholder:"Minimum 6 characters",className:"pl-10 pr-10 bg-muted/50 h-12",disabled:t}),e.jsx("button",{type:"button",onClick:()=>g(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:i?e.jsx(u,{size:18}):e.jsx(x,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Confirm New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(m,{type:c?"text":"password",value:s.confirmPassword,onChange:r=>o({...s,confirmPassword:r.target.value}),placeholder:"Re-enter new password",className:"pl-10 pr-10 bg-muted/50 h-12",disabled:t}),e.jsx("button",{type:"button",onClick:()=>b(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:c?e.jsx(u,{size:18}):e.jsx(x,{size:18})})]})]}),e.jsxs("div",{className:"bg-muted/50 border border-border rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-bold text-foreground mb-2",children:"Password Requirements:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Minimum 6 characters long"}),e.jsx("li",{children:"• Should be different from your current password"}),e.jsx("li",{children:"• Use a strong, unique password"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs(w,{type:"button",onClick:N,variant:"outline",className:"flex-1",disabled:t,children:[e.jsx(S,{size:16,className:"mr-2"}),"Reset"]}),e.jsx(w,{type:"submit",disabled:t,className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90 font-bold",children:t?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:16,className:"animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{size:16,className:"mr-2"}),"Change Password"]})})]})]})]})})})]})}export{T as default};
