import{d as k,r as d,j as t,C as R,ap as W,G as y,aq as F,X as J}from"./index-C3czKcPY.js";import{C as $}from"./formatters-kIzuffS5.js";import{C as Y}from"./chevron-right-Ch1Og8Bl.js";const O=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pe=k("ban",O);const Q=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],fe=k("cloud-upload",Q);const U=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],V=k("download",U);const q=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],K=k("image-off",q);const X=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],A=k("maximize-2",X);const ee=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],G=k("minimize-2",ee);const te=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],re=k("move",te),oe=W("relative rounded-lg transition-all duration-150 overflow-hidden",{variants:{variant:{default:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",interactive:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 hover:shadow-lg hover:border-zinc-300 dark:hover:border-zinc-700 active:scale-[0.99] cursor-pointer",flat:"bg-white dark:bg-zinc-900",ghost:"bg-transparent hover:bg-zinc-50 dark:hover:bg-zinc-900"},status:{none:"",live:"border-red-500 shadow-lg shadow-red-500/20",soon:"border-orange-400 shadow-lg shadow-orange-500/10",finished:"border-emerald-500/30 dark:border-emerald-500/20",upcoming:"border-zinc-200 dark:border-zinc-800",normal:"border-emerald-500/30 dark:border-emerald-500/20",issues:"border-red-500/30 dark:border-red-500/20",open:"border-rose-500/30 dark:border-rose-500/20",pending:"border-amber-500/30 dark:border-amber-500/20",resolved:"border-emerald-500/30 dark:border-emerald-500/20"},selected:{true:"bg-white dark:bg-zinc-800/80 border-[#0078D4]/50 shadow-md scale-[1.01] z-10",false:""},size:{sm:"p-3",md:"p-4",lg:"p-5 sm:p-6"}},defaultVariants:{variant:"default",status:"none",selected:!1,size:"md"}}),ae=W("absolute left-0 top-0 bottom-0 w-1.5 transition-colors",{variants:{accent:{none:"bg-transparent",live:"bg-red-500 animate-pulse",soon:"bg-orange-500",finished:"bg-emerald-500",upcoming:"bg-zinc-300 dark:bg-zinc-700",normal:"bg-emerald-500",issues:"bg-red-500",blue:"bg-[#0078D4]",indigo:"bg-[#0078D4]",open:"bg-rose-500",pending:"bg-amber-500",resolved:"bg-emerald-500",closed:"bg-zinc-400"}},defaultVariants:{accent:"none"}}),ne=d.memo(({children:e,className:a,onClick:o,variant:n="default",status:s="none",accent:u="none",selected:b=!1,size:c="md",showAccent:p=!1,...f})=>{const w=p&&u==="none"?s:u;return t.jsxs("div",{className:R(oe({variant:n,status:s,selected:b,size:c}),w!=="none"&&"pl-4",a),onClick:o,role:o?"button":void 0,tabIndex:o?0:void 0,onKeyDown:o?m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),o(m))}:void 0,...f,children:[w!=="none"&&t.jsx("div",{className:R(ae({accent:w}))}),e]})});ne.displayName="Card";const C=e=>{if(!e)return"";try{const a=new URL(e);if(a.hostname.includes("drive.google.com")||a.hostname.includes("docs.google.com")){let o=a.searchParams.get("id");if(!o){const n=a.pathname.split("/"),s=n.indexOf("d");s!==-1&&n[s+1]&&(o=n[s+1])}if(o)return`https://drive.google.com/thumbnail?id=${o}&sz=w1000`}return e}catch{return e}},se=(e,a=[320,640,960,1280,1920])=>e?e.includes("drive.google.com")||e.includes("docs.google.com")?{srcset:e,sizes:"100vw"}:{srcset:a.map(s=>`${e}?w=${s} ${s}w`).join(", "),sizes:"(max-width: 640px) 320px, (max-width: 960px) 640px, (max-width: 1280px) 960px, 1280px"}:{srcset:"",sizes:""},ie=e=>!e||typeof e!="string"?!1:e.includes("drive.google.com")||e.includes("docs.google.com"),ce=async e=>ie(e)?Promise.resolve("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+"):new Promise(a=>{const o=new Image;o.crossOrigin="anonymous";const n=setTimeout(()=>{a("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+")},3e3);o.onload=()=>{clearTimeout(n);const s=document.createElement("canvas");s.width=20,s.height=20,s.getContext("2d").drawImage(o,0,0,20,20);try{const b=s.toDataURL("image/jpeg",.5);a(b)}catch{a("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+")}},o.onerror=()=>{clearTimeout(n),a("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+")},o.src=e}),de=e=>new Promise((a,o)=>{const n=new Image;n.onload=()=>a(),n.onerror=()=>o(new Error("Failed to preload image")),n.src=e});function le({src:e,alt:a="",className:o="",onClick:n,sizes:s,loading:u="lazy",placeholder:b="blur",fallback:c,onLoad:p,onError:f,...w}){const[m,j]=d.useState(null),[M,D]=d.useState(null),[h,z]=d.useState(!1),[v,I]=d.useState(u!=="lazy"),Z=y.useRef(null),g=y.useRef(null),x=y.useRef(null);d.useEffect(()=>{if(!e){setTimeout(()=>j(null),0);return}try{if(typeof e=="object"&&(e instanceof File||e instanceof Blob)){const i=URL.createObjectURL(e);return setTimeout(()=>j(i),0),()=>URL.revokeObjectURL(i)}if(typeof e=="string"){const i=C(e);setTimeout(()=>j(i),0),b==="blur"&&i&&(i.includes("drive.google.com")||i.includes("docs.google.com")?setTimeout(()=>D("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+"),0):ce(i).then(r=>{setTimeout(()=>D(r),0)}).catch(()=>{setTimeout(()=>D("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+"),0)}))}}catch(i){console.error("Error processing image source:",i),setTimeout(()=>j(null),0)}},[e,b]),d.useEffect(()=>{if(u!=="lazy"){setTimeout(()=>I(!0),0);return}const i=g.current||Z.current;if(!i){const N=setTimeout(()=>I(!0),50);return()=>clearTimeout(N)}if(!v)return x.current=new IntersectionObserver(N=>{N.forEach(r=>{r.isIntersecting&&(I(!0),x.current&&x.current.disconnect())})},{rootMargin:"50px",threshold:.01}),x.current.observe(i),()=>{x.current&&x.current.disconnect()}},[u,v]);const{srcset:S,sizesAttr:L}=d.useMemo(()=>m?se(m):{srcset:"",sizesAttr:""},[m]),H=i=>{p&&p(i)},E=i=>{z(!0),c&&i.target.src!==c?(i.target.src=c,z(!1)):f&&f(i)};return d.useEffect(()=>{v&&m&&!h&&de(m).catch(()=>{})},[v,m,h]),h&&!c?t.jsxs("div",{className:R("flex flex-col items-center justify-center bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",o),onClick:n,children:[t.jsx(K,{className:"text-zinc-400 mb-1",size:20}),t.jsx("span",{className:"text-[10px] font-bold text-zinc-400 uppercase",children:"Failed to load"})]}):u==="lazy"&&!v?t.jsx("div",{className:R("relative overflow-hidden bg-zinc-100 dark:bg-zinc-900",o),ref:g,children:M&&t.jsx("img",{src:M,alt:"",className:"absolute inset-0 w-full h-full object-cover filter blur-xl scale-110 opacity-50","aria-hidden":"true"})}):t.jsx("img",{ref:Z,src:m||c,srcSet:S||void 0,sizes:s||L||void 0,alt:a,className:R(o),loading:u,onLoad:H,onError:E,onClick:n,decoding:"async",...w})}function we({isOpen:e,onClose:a,imageUrl:o,allImages:n=[],initialIndex:s=0}){const[u,b]=d.useState(s),[c,p]=d.useState(1),[f,w]=d.useState({x:0,y:0}),[m,j]=d.useState(!1),[M,D]=d.useState({x:0,y:0}),h=n.length>0?n:[o],z=h[u]||o,v=y.useRef(null),[I,Z]=d.useState(!1);d.useEffect(()=>{const r=()=>Z(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",r),()=>document.removeEventListener("fullscreenchange",r)},[]);const g=y.useCallback(()=>{p(1),w({x:0,y:0})},[]),x=y.useCallback(r=>{r?.stopPropagation(),b(l=>(l+1)%h.length),g()},[h.length,g]),S=y.useCallback(r=>{r?.stopPropagation(),b(l=>(l-1+h.length)%h.length),g()},[h.length,g]),L=y.useCallback(r=>{r?.stopPropagation(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():v.current?.requestFullscreen().catch(l=>{console.error("Fullscreen failed:",l)})},[]);if(d.useEffect(()=>{const r=l=>{if(e)switch(l.key){case"ArrowRight":x();break;case"ArrowLeft":S();break;case"Escape":document.fullscreenElement?document.exitFullscreen():a();break;case"f":case"F":L();break;case"0":g();break}};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,x,S,a,g,L]),d.useEffect(()=>{const r=v.current;if(!r)return;const l=P=>{if(!e)return;P.preventDefault();const T=-P.deltaY>0?1.1:.9,_=Math.min(Math.max(c*T,.5),10);p(_),_<=1&&w({x:0,y:0})};return r.addEventListener("wheel",l,{passive:!1}),()=>r.removeEventListener("wheel",l)},[e,c]),d.useEffect(()=>{let r=!0,l=null;return e?l=setTimeout(()=>{if(!r)return;const P=s||(o&&n.indexOf(o)>=0?n.indexOf(o):0);b(P),g(),document.body.style.overflow="hidden"},0):document.body.style.overflow="",()=>{r=!1,l&&clearTimeout(l),document.body.style.overflow=""}},[e,s,o,n,g]),!e)return null;const H=r=>{c<=1||(r.preventDefault(),j(!0),D({x:r.clientX-f.x,y:r.clientY-f.y}))},E=r=>{!m||c<=1||(r.preventDefault(),w({x:r.clientX-M.x,y:r.clientY-M.y}))},i=()=>{j(!1)},N=r=>{r?.stopPropagation(),c===1?p(2.5):g()};return F.createPortal(t.jsxs("div",{ref:v,className:`fixed inset-0 z-[9999] flex items-center justify-center bg-black/95 backdrop-blur-2xl animate-in fade-in duration-300 overflow-hidden select-none ${m?"cursor-grabbing":""}`,onClick:a,onMouseMove:E,onMouseUp:i,onMouseLeave:i,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/60 pointer-events-none"}),t.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 md:p-8 flex justify-between items-center z-50",children:[t.jsxs("div",{className:"flex items-center gap-4 cursor-pointer group/header",onClick:L,children:[t.jsx("div",{className:"w-10 h-10 md:w-14 md:h-14 bg-white/10 border border-white/10 rounded-lg flex items-center justify-center backdrop-blur-xl shadow-2xl group-hover/header:bg-white/20 transition-all",children:I?t.jsx(G,{size:24,className:"text-white"}):t.jsx(A,{size:24,className:"text-white"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[12px] md:text-[14px] font-black text-white uppercase ",children:"NOC Visual Intel"}),t.jsxs("span",{className:"text-[10px] md:text-[11px] font-bold text-white/30 uppercase tracking-widest leading-none mt-1 group-hover/header:text-white/50 transition-colors",children:["Ref ID ",u+1," of ",h.length," â€¢ Click to ",I?"Exit":"Maximize"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 pointer-events-auto",children:[t.jsx("button",{onClick:N,className:`p-4 rounded-lg border border-white/10 transition-all active:scale-90 flex backdrop-blur-md ${c>1?"bg-white text-black":"bg-white/5 text-white hover:bg-white/10"}`,title:c>1?"Reset Zoom":"Quick Zoom",children:c>1?t.jsx(G,{size:22}):t.jsx(A,{size:22})}),t.jsx("a",{href:C(z),download:!0,target:"_blank",rel:"noreferrer",onClick:r=>r.stopPropagation(),className:"p-4 bg-white/5 hover:bg-white/10 text-white rounded-lg border border-white/10 transition-all active:scale-90 backdrop-blur-md",children:t.jsx(V,{size:22})}),t.jsx("button",{onClick:a,className:"p-4 bg-white text-black rounded-lg shadow-[0_20px_40px_rgba(0,0,0,0.4)] hover:shadow-white/10 hover:bg-zinc-200 transition-all active:scale-90",children:t.jsx(J,{size:24,strokeWidth:3})})]})]}),t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",onClick:a,children:t.jsxs("div",{className:"relative transition-transform duration-200 ease-out",style:{transform:`translate(${f.x}px, ${f.y}px) scale(${c})`,cursor:c>1?m?"grabbing":"grab":"zoom-in"},onClick:r=>{r.stopPropagation(),c===1?p(2.5):g()},onMouseDown:H,children:[t.jsx(le,{src:z,alt:"Preview",className:"max-w-[90vw] max-h-[80vh] md:max-w-[85vw] md:max-h-[85vh] rounded-lg md:rounded-xl shadow-[0_0_120px_rgba(0,0,0,0.8)] border border-white/10 animate-in zoom-in-95 duration-500 pointer-events-none",style:{imageRendering:"auto"},loading:"eager",fallback:"https://placehold.co/1200x800?text=Failed+to+load+image"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity",children:c===1&&t.jsx(re,{size:64,className:"text-white/10"})})]})}),h.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:S,className:"absolute left-4 md:left-12 top-1/2 -translate-y-1/2 w-14 h-14 md:w-20 md:h-20 rounded-lg bg-black/40 hover:bg-white text-white hover:text-black border border-white/10 transition-all duration-500 flex items-center justify-center group active:scale-90 z-50 backdrop-blur-xl shadow-2xl",children:t.jsx($,{size:32,className:"group-hover:-translate-x-1.5 transition-transform",strokeWidth:4})}),t.jsx("button",{onClick:x,className:"absolute right-4 md:right-12 top-1/2 -translate-y-1/2 w-14 h-14 md:w-20 md:h-20 rounded-lg bg-black/40 hover:bg-white text-white hover:text-black border border-white/10 transition-all duration-500 flex items-center justify-center group active:scale-90 z-50 backdrop-blur-xl shadow-2xl",children:t.jsx(Y,{size:32,className:"group-hover:translate-x-1.5 transition-transform",strokeWidth:4})})]}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 md:p-12 flex flex-col items-center gap-6 pointer-events-none z-50",children:[h.length>1&&t.jsx("div",{className:"flex gap-2 p-2 bg-black/60 backdrop-blur-2xl rounded-lg border border-white/10 pointer-events-auto overflow-x-auto max-w-[85vw] no-scrollbar shadow-2xl",children:h.map((r,l)=>t.jsx("button",{onClick:P=>{P.stopPropagation(),b(l),g()},className:`h-2.5 rounded-full transition-all duration-700 ease-out ${u===l?"bg-white w-12 md:w-16 shadow-[0_0_20px_rgba(255,255,255,0.4)]":"bg-white/10 hover:bg-white/30 w-2.5"}`},l))}),t.jsx("div",{className:"bg-black/80 backdrop-blur-2xl border border-white/10 rounded-lg px-6 py-3 shadow-2xl animate-in slide-in-from-bottom-4 duration-700",children:t.jsxs("p",{className:"text-[10px] md:text-[11px] font-black text-white/40 uppercase truncate max-w-[250px] md:max-w-2xl",children:["SRC: ",z.split("/").pop().substring(0,60)]})})]})]}),document.body)}const B="https://script.google.com/macros/s/AKfycbzsxHS5m3rN6ZdyHS_iZndg-p9RfF6z7TJh_qLebxnUik724Bjf9fi4eiulZjQLs62JBA/exec",me=async e=>new Promise((a,o)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=async()=>{try{const s=n.result.split(",")[1],u=await fetch(B,{method:"POST",body:JSON.stringify({action:"upload",name:e.name,mimeType:e.type,base64:s})});a(await u.json())}catch(s){o(s)}}}),ue=async e=>{if(!e)return;let a=e;e.includes("id=")&&(a=new URLSearchParams(new URL(e).search).get("id"));try{return await(await fetch(B,{method:"POST",body:JSON.stringify({action:"delete",fileId:a})})).json()}catch(o){console.error("Drive Delete Error:",o)}},ve=Object.freeze(Object.defineProperty({__proto__:null,deleteFileFromDrive:ue,uploadLocalFileToDrive:me},Symbol.toStringTag,{value:"Module"}));export{pe as B,fe as C,V as D,K as I,we as a,ne as b,ve as c,ue as d,C as g,me as u};
