import{d as L,r as i,j as e,y as u,K as B,u as Q,a as M,b as H,N as J,c as k,L as R,B as p,z as E,O as K,P as W,F}from"./index-BFEWtwhJ.js";import{I as w}from"./input-DvVw9hsL.js";import{C as G}from"./chevron-down-qX9YY_vo.js";import{A as X}from"./arrow-left-Bsa-NHBD.js";import{P as T,T as Y}from"./trash-2-DeAKwTRc.js";import{S as Z}from"./search-Caa-NJMl.js";import{F as ee}from"./funnel-Bj5Lkajq.js";import{M as S}from"./mail-CF_TBJIH.js";import{E as se}from"./eye-Wr1II4DD.js";import{S as te}from"./save-CToUh0ov.js";const re=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ae=L("pen",re);const le=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],U=L("user-check",le),A={"NOC Lead":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 border-purple-200 dark:border-purple-800","NOC Engineer":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-200 dark:border-blue-800",Support:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800",Viewer:"bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700"},ne=["NOC Lead","NOC Engineer","Support","Viewer"];function de({value:r,onChange:c,disabled:l=!1}){const[t,o]=i.useState(!1),n=a=>{c(a),o(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>!l&&o(!t),disabled:l,className:u("inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold border transition-all",A[r],!l&&"cursor-pointer hover:shadow-md",l&&"opacity-50 cursor-not-allowed"),children:[r,!l&&e.jsx(G,{size:14,className:u("transition-transform",t&&"rotate-180")})]}),t&&!l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsx("div",{className:"absolute top-full mt-2 left-0 z-50 w-48 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-2xl overflow-hidden animate-in fade-in zoom-in-95",children:ne.map(a=>e.jsxs("button",{type:"button",onClick:()=>n(a),className:u("w-full px-4 py-2.5 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",r===a&&"bg-zinc-50 dark:bg-zinc-800/50"),children:[e.jsx("span",{className:u("inline-flex px-2.5 py-1 rounded-full text-xs font-bold border",A[a]),children:a}),r===a&&e.jsx(B,{size:16,className:"text-primary"})]},a))})]})]})}const O={"NOC Lead":"bg-purple-50 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 border-purple-200 dark:border-purple-800","NOC Engineer":"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border-blue-200 dark:border-blue-800",Support:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800",Viewer:"bg-zinc-50 text-zinc-700 dark:bg-zinc-800/50 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700"},D=["NOC Lead","NOC Engineer","Support","Viewer"];function ve(){const r=Q(),{toast:c}=M(),{currentUser:l}=H(),[t,o]=i.useState([]),[n,a]=i.useState(!0),[m,d]=i.useState(""),[h,P]=i.useState("All"),[I,y]=i.useState(!1),[ce,_]=i.useState(null),[f,b]=i.useState(null),g=J(l,[W.LEAD]);i.useEffect(()=>{j()},[]);const j=async()=>{try{a(!0);const s=await k.getAllUsers();o(s.filter(x=>x.isActive))}catch(s){c({variant:"destructive",title:"Failed to load users",description:s.message})}finally{a(!1)}},[N,z]=i.useState(null),V=s=>{g&&z(s)},$=async()=>{if(N)try{await k.deleteUser(N.uid),c({title:"User Deactivated",description:"User has been deactivated successfully",className:"bg-emerald-600 text-white border-none"}),j()}catch(s){c({variant:"destructive",title:"Failed to deactivate user",description:s.message})}finally{z(null)}},q=async(s,x)=>{if(g)try{await k.updateUser(s,x),c({title:"User Updated",description:"User profile has been updated",className:"bg-emerald-600 text-white border-none"}),_(null),j()}catch(C){c({variant:"destructive",title:"Failed to update user",description:C.message})}},v=t.filter(s=>{const x=s.name.toLowerCase().includes(m.toLowerCase())||s.email.toLowerCase().includes(m.toLowerCase()),C=h==="All"||s.role===h;return x&&C});return n?e.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"animate-spin text-primary mx-auto mb-4",size:48}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading team members..."})]})}):e.jsxs("div",{className:"h-full bg-background flex flex-col",children:[e.jsx("header",{className:"shrink-0 z-30 bg-card/80 backdrop-blur-md border-b border-border",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(X,{size:20,className:"text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-foreground uppercase tracking-tight",children:"Team Management"}),e.jsx("p",{className:"text-[10px] font-medium uppercase text-muted-foreground tracking-widest leading-none mt-0.5 hidden sm:block",children:"NOC Staff Directory & Access Control"})]})]}),g&&e.jsxs(p,{onClick:()=>y(!0),className:"bg-[#0078D4] hover:bg-[#106EBE] text-white font-semibold rounded-md shadow-sm h-9 sm:h-9",children:[e.jsx(T,{size:16,className:"mr-0 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Member"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(w,{value:m,onChange:s=>d(s.target.value),placeholder:"Search by name or email...",className:"pl-10 bg-card border-border h-9 rounded-md"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{size:18,className:"text-muted-foreground"}),e.jsxs("select",{value:h,onChange:s=>P(s.target.value),className:"h-9 px-4 bg-card border border-border rounded-md text-sm font-medium outline-none focus:ring-1 focus:ring-[#0078D4] transition-shadow",children:[e.jsx("option",{children:"All"}),D.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-zinc-500 tracking-widest",children:"Total"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-zinc-900 dark:text-white mt-1",children:t.length})]}),D.map(s=>e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-zinc-500 tracking-widest truncate",children:s}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-zinc-900 dark:text-white mt-1",children:t.filter(x=>x.role===s).length})]},s))]}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/30 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:v.length>0?v.map(s=>e.jsxs("tr",{onClick:()=>b(s),className:"hover:bg-muted/30 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#0078D4]/10 text-[#0078D4] flex items-center justify-center text-xs font-bold shadow-sm",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-foreground",children:s.name}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["ID: ",s.uid.substring(0,8)]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(S,{size:14}),s.email]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:u("inline-flex px-2.5 py-0.5 rounded text-[10px] font-semibold border",O[s.role]),children:s.role})}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(U,{size:14,className:"text-emerald-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-emerald-600 dark:text-emerald-400",children:"Active"})]})})]},s.uid)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 text-muted-foreground",children:[e.jsx(E,{size:48,className:"opacity-20"}),e.jsx("p",{className:"text-sm font-medium",children:"No members found"})]})})})})]})}),e.jsx("div",{className:"lg:hidden space-y-3",children:v.length>0?v.map(s=>e.jsx("div",{className:"bg-card border border-border rounded-md p-4 hover:shadow-sm transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#0078D4]/10 text-[#0078D4] flex items-center justify-center text-sm font-bold shadow-sm shrink-0",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-bold text-foreground truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1 mt-0.5",children:[e.jsx(S,{size:12}),s.email]})]}),g&&e.jsx("button",{onClick:()=>b(s),className:"p-1.5 text-[#0078D4] hover:bg-[#0078D4]/10 rounded-md transition-colors shrink-0",children:e.jsx(se,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:u("inline-flex px-2 py-0.5 rounded text-[10px] font-semibold border",O[s.role]),children:s.role}),e.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400",children:[e.jsx(U,{size:12}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Active"})]})]})]})]})},s.uid)):e.jsxs("div",{className:"bg-card border border-border rounded-md p-12 text-center",children:[e.jsx(E,{size:48,className:"opacity-20 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No members found"})]})})]})}),I&&e.jsx(ie,{onClose:()=>y(!1),onSuccess:()=>{y(!1),j()}}),f&&e.jsx(oe,{user:f,onClose:()=>b(null),onUpdate:s=>{q(f.uid,s),b(null)},onDelete:()=>{V(f.uid),b(null)}}),e.jsx(K,{isOpen:!!N,onClose:()=>z(null),onConfirm:$,title:"Deactivate User",message:`Are you sure you want to deactivate ${N?.name}? They will no longer be able to log in.`,isDanger:!0,confirmText:"Deactivate"})]})}function ie({onClose:r,onSuccess:c}){const{toast:l}=M(),[t,o]=i.useState({name:"",email:"",password:"",role:"NOC Engineer"}),[n,a]=i.useState(!1),m=async d=>{if(d.preventDefault(),!t.name||!t.email||!t.password){l({variant:"destructive",title:"Missing Information",description:"Please fill in all required fields"});return}if(t.password.length<6){l({variant:"destructive",title:"Weak Password",description:"Password must be at least 6 characters"});return}try{a(!0),await k.register(t),l({title:"Member Added",description:`${t.name} has been added to the team`,className:"bg-emerald-600 text-white border-none"}),c()}catch(h){l({variant:"destructive",title:"Registration Failed",description:h.message})}finally{a(!1)}};return e.jsx(F,{isOpen:!0,onClose:r,title:"Add New Member",description:"Create a new team member account",size:"sm",children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Full Name *"}),e.jsx(w,{value:t.name,onChange:d=>o({...t,name:d.target.value}),placeholder:"John Doe",className:"bg-muted/50",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Email Address *"}),e.jsx(w,{type:"email",value:t.email,onChange:d=>o({...t,email:d.target.value}),placeholder:"john@example.com",className:"bg-muted/50",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Password *"}),e.jsx(w,{type:"password",value:t.password,onChange:d=>o({...t,password:d.target.value}),placeholder:"Minimum 6 characters",className:"bg-muted/50",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Role *"}),e.jsx("select",{value:t.role,onChange:d=>o({...t,role:d.target.value}),className:"w-full h-10 px-3 bg-muted/50 border border-border rounded-lg text-sm font-medium outline-none focus:ring-2 focus:ring-primary",disabled:n,children:D.map(d=>e.jsx("option",{value:d,children:d},d))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(p,{type:"button",onClick:r,variant:"outline",className:"flex-1",disabled:n,children:"Cancel"}),e.jsx(p,{type:"submit",className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(R,{size:16,className:"animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:16,className:"mr-2"}),"Add Member"]})})]})]})})}function oe({user:r,onClose:c,onUpdate:l,onDelete:t}){const[o,n]=i.useState(!1),[a,m]=i.useState(r.role);return e.jsx(F,{isOpen:!0,onClose:c,title:"Member Details",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 text-primary flex items-center justify-center text-xl font-black shadow-sm",children:r.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",r.uid.substring(0,8)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-muted-foreground tracking-widest mb-2",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground",children:[e.jsx(S,{size:16,className:"text-muted-foreground"}),r.email]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-muted-foreground tracking-widest mb-2",children:"Role"}),o?e.jsx(de,{value:a,onChange:m}):e.jsx("span",{className:u("inline-flex px-3 py-1.5 rounded-full text-xs font-bold border",O[r.role]),children:r.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-muted-foreground tracking-widest mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:16,className:"text-emerald-500"}),e.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:"Active"})]})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t border-border",children:o?e.jsxs(e.Fragment,{children:[e.jsx(p,{onClick:()=>{n(!1),m(r.role)},variant:"outline",className:"flex-1",children:"Cancel"}),e.jsxs(p,{onClick:()=>{l({role:a}),n(!1)},className:"flex-1 bg-emerald-600 text-white hover:bg-emerald-700",children:[e.jsx(te,{size:16,className:"mr-2"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(p,{onClick:()=>n(!0),variant:"outline",className:"flex-1",children:[e.jsx(ae,{size:16,className:"mr-2"}),"Edit Role"]}),e.jsxs(p,{onClick:t,variant:"destructive",className:"flex-1",children:[e.jsx(Y,{size:16,className:"mr-2"}),"Deactivate"]})]})})]})})}export{ve as default};
