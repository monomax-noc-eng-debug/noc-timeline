import{d as V,r as o,j as e,e as u,u as _,a as E,b as q,t as $,L,x as O,v as B,X as M}from"./index-Cd1-0mZ_.js";import{a as v}from"./authService-SJiumC8N.js";import{B as b}from"./button-BPP0yxT9.js";import{I as k}from"./input-BmI1ZDC0.js";import{C as Q}from"./chevron-down-sVYrYtj8.js";import{C as H}from"./check-BxRY-K9Z.js";import{A as J}from"./arrow-left-DfnESa-j.js";import{P as R}from"./plus-dAJG1TAP.js";import{S as W}from"./search-CJEoN_rZ.js";import{F as X}from"./funnel-CFPoNt-M.js";import{M as C}from"./mail-Cf7b2WYt.js";import{E as G}from"./eye-BuZh_xm4.js";import{S as K}from"./save-BzaLPCNo.js";import{P as Y}from"./pen-BvzkhTw5.js";import{T as Z}from"./trash-2-Jo_Bga4V.js";import"./firebaseConfig-Cp-1Ewx5.js";const ee=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],z=V("user-check",ee),A={"NOC Lead":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 border-purple-200 dark:border-purple-800","NOC Engineer":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-200 dark:border-blue-800",Support:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800",Viewer:"bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700"},se=["NOC Lead","NOC Engineer","Support","Viewer"];function te({value:r,onChange:c,disabled:d=!1}){const[t,i]=o.useState(!1),n=l=>{c(l),i(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>!d&&i(!t),disabled:d,className:u("inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold border transition-all",A[r],!d&&"cursor-pointer hover:shadow-md",d&&"opacity-50 cursor-not-allowed"),children:[r,!d&&e.jsx(Q,{size:14,className:u("transition-transform",t&&"rotate-180")})]}),t&&!d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),e.jsx("div",{className:"absolute top-full mt-2 left-0 z-50 w-48 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95",children:se.map(l=>e.jsxs("button",{type:"button",onClick:()=>n(l),className:u("w-full px-4 py-2.5 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",r===l&&"bg-zinc-50 dark:bg-zinc-800/50"),children:[e.jsx("span",{className:u("inline-flex px-2.5 py-1 rounded-full text-xs font-bold border",A[l]),children:l}),r===l&&e.jsx(H,{size:16,className:"text-primary"})]},l))})]})]})}const S={"NOC Lead":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 border-purple-200 dark:border-purple-800","NOC Engineer":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-200 dark:border-blue-800",Support:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800",Viewer:"bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700"},U=["NOC Lead","NOC Engineer","Support","Viewer"];function ke(){const r=_(),{toast:c}=E(),{currentUser:d}=q(),[t,i]=o.useState([]),[n,l]=o.useState(!0),[x,a]=o.useState(""),[p,F]=o.useState("All"),[D,w]=o.useState(!1),[le,P]=o.useState(null),[f,h]=o.useState(null),g=$(d,[B.LEAD]);o.useEffect(()=>{j()},[]);const j=async()=>{try{l(!0);const s=await v.getAllUsers();i(s.filter(m=>m.isActive))}catch(s){c({variant:"destructive",title:"Failed to load users",description:s.message})}finally{l(!1)}},I=async s=>{if(g&&confirm("Are you sure you want to deactivate this user?"))try{await v.deleteUser(s),c({title:"User Deactivated",description:"User has been deactivated successfully",className:"bg-emerald-600 text-white border-none"}),j()}catch(m){c({variant:"destructive",title:"Failed to deactivate user",description:m.message})}},T=async(s,m)=>{if(g)try{await v.updateUser(s,m),c({title:"User Updated",description:"User profile has been updated",className:"bg-emerald-600 text-white border-none"}),P(null),j()}catch(y){c({variant:"destructive",title:"Failed to update user",description:y.message})}},N=t.filter(s=>{const m=s.name.toLowerCase().includes(x.toLowerCase())||s.email.toLowerCase().includes(x.toLowerCase()),y=p==="All"||s.role===p;return m&&y});return n?e.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx(L,{className:"animate-spin text-primary mx-auto mb-4",size:48}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading team members..."})]})}):e.jsxs("div",{className:"h-full bg-background flex flex-col",children:[e.jsx("header",{className:"shrink-0 z-30 bg-card/80 backdrop-blur-md border-b border-border",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(J,{size:20,className:"text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-foreground uppercase tracking-tight",children:"Team Management"}),e.jsx("p",{className:"text-[10px] font-black uppercase text-muted-foreground tracking-widest leading-none mt-0.5 hidden sm:block",children:"NOC Staff Directory & Access Control"})]})]}),g&&e.jsxs(b,{onClick:()=>w(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90 font-bold rounded-xl shadow-lg h-9 sm:h-10",children:[e.jsx(R,{size:16,className:"mr-0 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Member"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(k,{value:x,onChange:s=>a(s.target.value),placeholder:"Search by name or email...",className:"pl-10 bg-card border-border h-11"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{size:18,className:"text-muted-foreground"}),e.jsxs("select",{value:p,onChange:s=>F(s.target.value),className:"h-11 px-4 bg-card border border-border rounded-lg text-sm font-medium outline-none focus:ring-2 focus:ring-primary transition-shadow",children:[e.jsx("option",{children:"All"}),U.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4 mb-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-black uppercase text-muted-foreground tracking-widest",children:"Total"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-foreground mt-1",children:t.length})]}),U.map(s=>e.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-xs font-black uppercase text-muted-foreground tracking-widest truncate",children:s}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-foreground mt-1",children:t.filter(m=>m.role===s).length})]},s))]}),e.jsx("div",{className:"hidden lg:block bg-card border border-border rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-widest text-muted-foreground",children:"Member"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-widest text-muted-foreground",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-widest text-muted-foreground",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black uppercase tracking-widest text-muted-foreground",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:N.length>0?N.map(s=>e.jsxs("tr",{onClick:()=>h(s),className:"hover:bg-muted/30 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 text-primary flex items-center justify-center text-sm font-black shadow-sm",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-foreground",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",s.uid.substring(0,8)]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(C,{size:14}),s.email]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:u("inline-flex px-3 py-1 rounded-full text-xs font-bold border",S[s.role]),children:s.role})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{size:14,className:"text-emerald-500"}),e.jsx("span",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400",children:"Active"})]})})]},s.uid)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 text-muted-foreground",children:[e.jsx(O,{size:48,className:"opacity-20"}),e.jsx("p",{className:"text-sm font-medium",children:"No members found"})]})})})})]})})}),e.jsx("div",{className:"lg:hidden space-y-3",children:N.length>0?N.map(s=>e.jsx("div",{className:"bg-card border border-border rounded-xl p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 text-primary flex items-center justify-center text-base font-black shadow-sm shrink-0",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-bold text-foreground truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1 mt-0.5",children:[e.jsx(C,{size:12}),s.email]})]}),g&&e.jsx("button",{onClick:()=>h(s),className:"p-1.5 text-primary hover:bg-primary/10 rounded-lg transition-colors shrink-0",children:e.jsx(G,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:u("inline-flex px-2.5 py-1 rounded-full text-xs font-bold border",S[s.role]),children:s.role}),e.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400",children:[e.jsx(z,{size:12}),e.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]})]})]})},s.uid)):e.jsxs("div",{className:"bg-card border border-border rounded-xl p-12 text-center",children:[e.jsx(O,{size:48,className:"opacity-20 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No members found"})]})})]})}),D&&e.jsx(re,{onClose:()=>w(!1),onSuccess:()=>{w(!1),j()}}),f&&e.jsx(ae,{user:f,onClose:()=>h(null),onUpdate:s=>{T(f.uid,s),h(null)},onDelete:()=>{I(f.uid),h(null)}})]})}function re({onClose:r,onSuccess:c}){const{toast:d}=E(),[t,i]=o.useState({name:"",email:"",password:"",role:"NOC Engineer"}),[n,l]=o.useState(!1),x=async a=>{if(a.preventDefault(),!t.name||!t.email||!t.password){d({variant:"destructive",title:"Missing Information",description:"Please fill in all required fields"});return}if(t.password.length<6){d({variant:"destructive",title:"Weak Password",description:"Password must be at least 6 characters"});return}try{l(!0),await v.register(t),d({title:"Member Added",description:`${t.name} has been added to the team`,className:"bg-emerald-600 text-white border-none"}),c()}catch(p){d({variant:"destructive",title:"Registration Failed",description:p.message})}finally{l(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:e.jsxs("div",{className:"bg-card rounded-2xl shadow-2xl border border-border w-full max-w-md animate-in zoom-in-95",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Add New Member"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Create a new team member account"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(M,{size:20})})]})}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Full Name *"}),e.jsx(k,{value:t.name,onChange:a=>i({...t,name:a.target.value}),placeholder:"John Doe",className:"bg-muted/50",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Email Address *"}),e.jsx(k,{type:"email",value:t.email,onChange:a=>i({...t,email:a.target.value}),placeholder:"john@example.com",className:"bg-muted/50",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Password *"}),e.jsx(k,{type:"password",value:t.password,onChange:a=>i({...t,password:a.target.value}),placeholder:"Minimum 6 characters",className:"bg-muted/50",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-foreground mb-2",children:"Role *"}),e.jsx("select",{value:t.role,onChange:a=>i({...t,role:a.target.value}),className:"w-full h-10 px-3 bg-muted/50 border border-border rounded-lg text-sm font-medium outline-none focus:ring-2 focus:ring-primary",disabled:n,children:U.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(b,{type:"button",onClick:r,variant:"outline",className:"flex-1",disabled:n,children:"Cancel"}),e.jsx(b,{type:"submit",className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:16,className:"animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{size:16,className:"mr-2"}),"Add Member"]})})]})]})]})})}function ae({user:r,onClose:c,onUpdate:d,onDelete:t}){const[i,n]=o.useState(!1),[l,x]=o.useState(r.role);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:c,children:e.jsxs("div",{className:"bg-card rounded-2xl shadow-2xl border border-border w-full max-w-md animate-in zoom-in-95",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Member Details"}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(M,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 text-primary flex items-center justify-center text-xl font-black shadow-sm",children:r.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",r.uid.substring(0,8)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black uppercase text-muted-foreground tracking-widest mb-2",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground",children:[e.jsx(C,{size:16,className:"text-muted-foreground"}),r.email]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black uppercase text-muted-foreground tracking-widest mb-2",children:"Role"}),i?e.jsx(te,{value:l,onChange:x}):e.jsx("span",{className:u("inline-flex px-3 py-1.5 rounded-full text-xs font-bold border",S[r.role]),children:r.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black uppercase text-muted-foreground tracking-widest mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{size:16,className:"text-emerald-500"}),e.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:"Active"})]})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t border-border",children:i?e.jsxs(e.Fragment,{children:[e.jsx(b,{onClick:()=>{n(!1),x(r.role)},variant:"outline",className:"flex-1",children:"Cancel"}),e.jsxs(b,{onClick:()=>{d({role:l}),n(!1)},className:"flex-1 bg-emerald-600 text-white hover:bg-emerald-700",children:[e.jsx(K,{size:16,className:"mr-2"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(b,{onClick:()=>n(!0),variant:"outline",className:"flex-1",children:[e.jsx(Y,{size:16,className:"mr-2"}),"Edit Role"]}),e.jsxs(b,{onClick:t,variant:"destructive",className:"flex-1",children:[e.jsx(Z,{size:16,className:"mr-2"}),"Deactivate"]})]})})]})]})})}export{ke as default};
