import{c as q,r as m,i as G,k as re,j as e,f as ae,P as K,h as ne,b as S,u as oe,s as W,a as ce,q as de,L as I,T as le,t as me,X as xe}from"./index-DAanvQcz.js";import{c as A}from"./configService-hzZxIssI.js";import{u as ue}from"./useConfigs-9xa2rAs-.js";import{u as he,B as O}from"./index-B4l1GjT4.js";import{u as pe,S as ge,I as U}from"./index-DMZk_QU2.js";import{A as be}from"./arrow-left-8aetKOdE.js";import{S as V}from"./save-B9S0bGgd.js";import{T as H,a as fe}from"./tv-BhCofRON.js";import{T as $}from"./tag-BJq_qmCS.js";import{U as F}from"./users-DkzfUVat.js";import{G as ke}from"./globe-bxdyJ4_K.js";import{L as je}from"./layers-Djmn8i5g.js";import{C as ve}from"./clock-BlplEjJw.js";import{P as M}from"./plus-CcHBTCAP.js";import{T as X}from"./trash-2-1ZQVMCmo.js";import"./firebaseConfig-CyCI-yMF.js";const ze=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],we=q("circle-check-big",ze);const Ne=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]],ye=q("layout-panel-top",Ne);var _="Switch",[Ce]=ae(_),[Se,Te]=Ce(_),J=m.forwardRef((n,l)=>{const{__scopeSwitch:x,name:s,checked:t,defaultChecked:i,required:o,disabled:h,value:d="on",onCheckedChange:a,form:u,...T}=n,[f,v]=m.useState(null),z=G(l,j=>v(j)),c=m.useRef(!1),r=f?u||!!f.closest("form"):!0,[g,p]=re({prop:t,defaultProp:i??!1,onChange:a,caller:_});return e.jsxs(Se,{scope:x,checked:g,disabled:h,children:[e.jsx(K.button,{type:"button",role:"switch","aria-checked":g,"aria-required":o,"data-state":ee(g),"data-disabled":h?"":void 0,disabled:h,value:d,...T,ref:z,onClick:ne(n.onClick,j=>{p(R=>!R),r&&(c.current=j.isPropagationStopped(),c.current||j.stopPropagation())})}),r&&e.jsx(Z,{control:f,bubbles:!c.current,name:s,value:d,checked:g,required:o,disabled:h,form:u,style:{transform:"translateX(-100%)"}})]})});J.displayName=_;var Q="SwitchThumb",Y=m.forwardRef((n,l)=>{const{__scopeSwitch:x,...s}=n,t=Te(Q,x);return e.jsx(K.span,{"data-state":ee(t.checked),"data-disabled":t.disabled?"":void 0,...s,ref:l})});Y.displayName=Q;var Ee="SwitchBubbleInput",Z=m.forwardRef(({__scopeSwitch:n,control:l,checked:x,bubbles:s=!0,...t},i)=>{const o=m.useRef(null),h=G(o,i),d=pe(x),a=he(l);return m.useEffect(()=>{const u=o.current;if(!u)return;const T=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(T,"checked").set;if(d!==x&&v){const z=new Event("click",{bubbles:s});v.call(u,x),u.dispatchEvent(z)}},[d,x,s]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:x,...t,tabIndex:-1,ref:h,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Z.displayName=Ee;function ee(n){return n?"checked":"unchecked"}var Pe=J,Le=Y;function De({className:n,...l}){return e.jsx(Pe,{"data-slot":"switch",className:S("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...l,children:e.jsx(Le,{"data-slot":"switch-thumb",className:S("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const y=({title:n,description:l,icon:x,children:s,color:t="zinc"})=>{const i=x,o={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",emerald:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400",amber:"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",zinc:"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400",indigo:"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400"};return e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-4 p-5 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("div",{className:S("w-10 h-10 rounded-lg flex items-center justify-center shrink-0",o[t]),children:e.jsx(i,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-zinc-900 dark:text-white text-lg leading-tight",children:n}),l&&e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:l})]})]}),e.jsx("div",{className:"p-5",children:s})]})},P=m.memo(({items:n=[],onAdd:l,onRemove:x,onUpdate:s,canEdit:t,emptyText:i="No items."})=>{const[o,h]=m.useState(""),[d,a]=m.useState(null),[u,T]=m.useState(""),{toast:f}=W(),v=()=>{const c=o.trim();if(c){if(n.some(r=>r.toLowerCase()===c.toLowerCase())){f({variant:"destructive",title:"Duplicate Entry",description:`"${c}" already exists.`});return}l(c),h("")}},z=c=>{const r=u.trim();if(r&&r!==n[c]){if(n.some((g,p)=>p!==c&&g.toLowerCase()===r.toLowerCase())){f({variant:"destructive",title:"Duplicate Entry",description:`"${r}" already exists.`});return}s(c,r)}a(null)};return e.jsxs("div",{className:"space-y-4",children:[t&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{value:o,onChange:c=>h(c.target.value),onKeyDown:c=>c.key==="Enter"&&v(),placeholder:"Type and press Enter...",className:"flex-1 bg-zinc-50 dark:bg-zinc-800/50"}),e.jsx(O,{onClick:v,disabled:!o.trim(),size:"icon",className:"shrink-0 bg-zinc-900 dark:bg-white text-white dark:text-black",children:e.jsx(M,{size:18})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.length>0?n.map((c,r)=>e.jsxs("div",{className:S("group relative flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all animate-in zoom-in-95 duration-200",d===r?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 ring-1 ring-indigo-500":"bg-zinc-50 dark:bg-zinc-800/50 border-zinc-200 dark:border-zinc-700 hover:border-zinc-300 dark:hover:border-zinc-600"),children:[d===r?e.jsx("input",{autoFocus:!0,value:u,onChange:g=>T(g.target.value),onKeyDown:g=>{g.key==="Enter"&&z(r),g.key==="Escape"&&a(null)},onBlur:()=>z(r),className:"bg-transparent outline-none text-sm font-medium w-full min-w-[80px] text-indigo-700 dark:text-indigo-300"}):e.jsx("span",{onClick:()=>{t&&(a(r),T(c))},className:S("text-sm font-medium select-none text-zinc-700 dark:text-zinc-200",t&&"cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400"),children:c}),t&&d!==r&&e.jsx("button",{onClick:g=>{g.stopPropagation(),x(r)},className:"ml-1 p-0.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-full transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(xe,{size:13,strokeWidth:3})})]},r)):e.jsx("div",{className:"w-full py-6 text-center border-2 border-dashed border-zinc-100 dark:border-zinc-800 rounded-xl text-zinc-400 text-sm italic",children:i})})]})});P.displayName="TagListEditor";const te=m.memo(({items:n=[],onAdd:l,onRemove:x,onUpdate:s,canEdit:t})=>{const[i,o]=m.useState(""),h=["bg-zinc-500","bg-red-500","bg-orange-500","bg-amber-500","bg-emerald-500","bg-blue-500","bg-purple-500","bg-pink-500"];return e.jsxs("div",{className:"space-y-4",children:[t&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{value:i,onChange:d=>o(d.target.value),onKeyDown:d=>d.key==="Enter"&&i.trim()&&l(i.trim()),placeholder:"Provider Name...",className:"flex-1 bg-zinc-50 dark:bg-zinc-800/50"}),e.jsx(O,{onClick:()=>i.trim()&&(l(i.trim()),o("")),disabled:!i.trim(),size:"icon",className:"shrink-0",children:e.jsx(M,{size:18})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map((d,a)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-800/30 border border-zinc-200 dark:border-zinc-700/50 rounded-xl group hover:shadow-sm transition-all",children:[e.jsx("div",{className:S("w-3 h-3 rounded-full shrink-0 ring-2 ring-white dark:ring-zinc-900",d.color||"bg-zinc-500")}),e.jsx("span",{className:"flex-1 text-sm font-medium truncate",children:d.label}),t&&e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.slice(0,3).map(u=>e.jsx("button",{onClick:()=>s(a,{...d,color:u}),className:S("w-3 h-3 rounded-full hover:scale-125 transition-transform ring-1 ring-white/20",u)},u)),e.jsx("button",{onClick:()=>x(a),className:"ml-1 text-zinc-400 hover:text-red-500 transition-colors",children:e.jsx(X,{size:14})})]})]},a))})]})});te.displayName="CDNListEditor";const se=m.memo(({members:n=[],onAdd:l,onRemove:x,canEdit:s})=>{const[t,i]=m.useState(""),[o,h]=m.useState("NOC Engineer"),d=()=>{t.trim()&&(l({id:`NOC-${Date.now()}`,name:t.trim(),role:o}),i(""))};return e.jsxs("div",{className:"space-y-4",children:[s&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(U,{value:t,onChange:a=>i(a.target.value),placeholder:"Staff Name...",className:"flex-1 bg-zinc-50 dark:bg-zinc-800/50"}),e.jsxs("select",{value:o,onChange:a=>h(a.target.value),className:"h-10 px-3 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-800 rounded-md text-sm outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{children:"NOC Lead"}),e.jsx("option",{children:"NOC Engineer"}),e.jsx("option",{children:"Support"}),e.jsx("option",{children:"Viewer"})]}),e.jsxs(O,{onClick:d,disabled:!t.trim(),children:[e.jsx(M,{size:16})," Add"]})]}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto custom-scrollbar pr-1",children:n.map((a,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800/30 border border-zinc-200 dark:border-zinc-800 rounded-xl group hover:border-zinc-300 dark:hover:border-zinc-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-100 to-white dark:from-indigo-900 dark:to-zinc-800 text-indigo-600 dark:text-indigo-400 flex items-center justify-center text-xs font-black shadow-sm",children:a.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:a.name}),e.jsx("p",{className:"text-[10px] font-black uppercase text-zinc-400 tracking-widest",children:a.role})]})]}),s&&e.jsx("button",{onClick:()=>x(u),className:"p-2 text-zinc-300 hover:text-red-500 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all opacity-0 group-hover:opacity-100",children:e.jsx(X,{size:16})})]},a.id||u))})]})});se.displayName="TeamListEditor";function Xe(){const n=oe(),{toast:l}=W(),{currentUser:x}=ce(),{configs:s,setConfigs:t,ticketOptions:i,setTicketOptions:o,team:h,setTeam:d,projects:a,setProjects:u,loading:T}=ue(),[f,v]=m.useState(!1),[z,c]=m.useState(!1),[r,g]=m.useState("broadcast"),p=de(x,[me.LEAD]),j=m.useCallback(()=>c(!0),[]),R=async()=>{if(p){v(!0);try{await Promise.all([A.updateConfigs(s),A.updateTicketOptions(i),A.updateTeam(h),A.updateProjects(a)]),l({title:"Configuration Deployed",description:"All system parameters have been updated.",className:"bg-emerald-600 text-white border-none shadow-2xl font-bold"}),c(!1)}catch(b){l({variant:"destructive",title:"Deployment Failed",description:b.message})}finally{v(!1)}}},w=(b,k,C=null)=>({add:E=>{j(),k(N=>C?{...N,[C]:[...N[C],E]}:[...N,E])},remove:E=>{j(),k(N=>C?{...N,[C]:N[C].filter((D,L)=>L!==E)}:N.filter((D,L)=>L!==E))},update:(E,N)=>{j(),k(D=>C?{...D,[C]:D[C].map((L,B)=>B===E?N:L)}:D.map((L,B)=>B===E?N:L))}});if(T)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx(I,{className:"animate-spin text-zinc-400"})});const ie=[{id:"broadcast",label:"Broadcast",icon:H},{id:"tickets",label:"Tickets",icon:$},{id:"organization",label:"Organization",icon:F},{id:"preferences",label:"System",icon:ge}];return e.jsxs("div",{className:"h-full bg-zinc-50 dark:bg-black flex flex-col",children:[e.jsx("header",{className:"shrink-0 z-30 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-md border-b border-zinc-200 dark:border-zinc-800",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>n(-1),className:"p-2 -ml-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:e.jsx(be,{size:20,className:"text-zinc-600 dark:text-zinc-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-zinc-900 dark:text-white uppercase tracking-tight",children:"Configuration Hub"}),e.jsx("p",{className:"text-[10px] font-black uppercase text-zinc-400 tracking-widest leading-none mt-1",children:"System Parameters & Registry"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:p&&e.jsxs(O,{onClick:R,disabled:!z||f,className:S("hidden md:flex rounded-xl font-bold transition-all shadow-lg active:scale-95",z?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-500/30":"bg-zinc-200 text-zinc-400 dark:bg-zinc-800 dark:text-zinc-600"),children:[f?e.jsx(I,{size:16,className:"animate-spin mr-2"}):e.jsx(V,{size:16,className:"mr-2"}),f?"Deploying...":"Deploy Changes"]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 pb-32",children:[e.jsx("div",{className:"flex p-1 bg-zinc-100 dark:bg-zinc-900 rounded-2xl mb-8 w-full md:w-auto md:inline-flex overflow-x-auto no-scrollbar border border-zinc-200 dark:border-zinc-800 shadow-inner",children:ie.map(b=>e.jsxs("button",{onClick:()=>g(b.id),className:S("flex-1 md:flex-none flex items-center justify-center gap-2.5 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider transition-all whitespace-nowrap",r===b.id?"bg-white dark:bg-zinc-800 text-indigo-600 dark:text-white shadow-md border border-zinc-100 dark:border-zinc-700":"text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300"),children:[e.jsx(b.icon,{size:14,strokeWidth:2.5}),b.label]},b.id))}),e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[r==="broadcast"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(y,{title:"Leagues Registry",description:"Competition categories",icon:fe,color:"amber",children:e.jsx(P,{items:s.leagues,...w(s,t,"leagues"),canEdit:p})}),e.jsx(y,{title:"Channel Map",description:"Operational Broadcast Channels",icon:H,color:"blue",children:e.jsx(P,{items:s.channels,...w(s,t,"channels"),canEdit:p})}),e.jsx(y,{title:"CDN Providers",description:"Content Delivery Network Nodes",icon:ke,color:"emerald",children:e.jsx(te,{items:s.cdnOptions,onAdd:b=>{j(),t(k=>({...k,cdnOptions:[...k.cdnOptions,{id:b,label:b,color:"bg-zinc-500"}]}))},onRemove:w(s,t,"cdnOptions").remove,onUpdate:w(s,t,"cdnOptions").update,canEdit:p})})]}),r==="tickets"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(y,{title:"Types",icon:$,color:"blue",children:e.jsx(P,{items:i.types,...w(i,o,"types"),canEdit:p})}),e.jsx(y,{title:"Statuses",icon:we,color:"emerald",children:e.jsx(P,{items:i.statuses,...w(i,o,"statuses"),canEdit:p})}),e.jsx(y,{title:"Severities",icon:le,color:"amber",children:e.jsx(P,{items:i.severities,...w(i,o,"severities"),canEdit:p})}),e.jsx(y,{title:"Categories",icon:je,color:"purple",children:e.jsx(P,{items:i.categories,...w(i,o,"categories"),canEdit:p})})]}),r==="organization"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(y,{title:"NOC Team",description:"Staff Directory",icon:F,color:"indigo",children:e.jsx(se,{members:h,...w(h,d),canEdit:p})}),e.jsx(y,{title:"Projects",description:"Active Systems",icon:ye,color:"zinc",children:e.jsx(P,{items:a,...w(a,u),canEdit:p})})]}),r==="preferences"&&e.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:e.jsxs(y,{title:"Ticket Auto-Sync",description:"Google Sheets Integration",icon:ve,color:"purple",children:[e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:"Enable Daily Sync"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Fetch latest tickets automatically."})]}),e.jsx(De,{checked:s.ticketSync?.autoSync,onCheckedChange:b=>{j(),t(k=>({...k,ticketSync:{...k.ticketSync,autoSync:b}}))},disabled:!p})]}),s.ticketSync?.autoSync&&e.jsxs("div",{className:"flex items-center justify-between py-4 border-t border-zinc-100 dark:border-zinc-800 animate-in fade-in",children:[e.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:"Sync Time"}),e.jsx("input",{type:"time",value:s.ticketSync?.syncTime||"08:00",onChange:b=>{j(),t(k=>({...k,ticketSync:{...k.ticketSync,syncTime:b.target.value}}))},className:"bg-zinc-100 dark:bg-zinc-800 border-none rounded-lg px-3 py-1.5 font-bold text-sm outline-none focus:ring-2 focus:ring-purple-500"})]})]})})]})]})}),p&&z&&e.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-50 animate-in slide-in-from-bottom-4 fade-in",children:e.jsx(O,{onClick:R,disabled:f,className:"w-14 h-14 rounded-full shadow-2xl bg-indigo-600 text-white p-0 flex items-center justify-center",children:f?e.jsx(I,{className:"animate-spin"}):e.jsx(V,{size:24})})})]})}export{Xe as default};
