import{d as G,r as d,n as $,o as X,j as e,k as J,P as q,m as Y,f as P,u as ee,a as F,b as te,w as se,L as D,e as M,T as ie,x as re}from"./index-MAGVuFXp.js";import{c as B}from"./configService-DT_i63n4.js";import{u as ne}from"./useConfigs-ChJa5a70.js";import{B as O}from"./button-D0InLzOc.js";import{u as ae,T as ce}from"./index-DYhJ6qgj.js";import{u as oe}from"./index-BwbJbACc.js";import{A as de}from"./arrow-left-DttoDBtu.js";import{S as U}from"./settings-B22MX7Ch.js";import{S as le}from"./save-Iw2YQ2me.js";import{T as I}from"./tv-DzJI4B1w.js";import{T as H}from"./tag-CH1Mmsk6.js";import{C as xe}from"./chevron-right-DTq5YanC.js";import{G as he}from"./globe-Bs3qrOiF.js";import{L as me}from"./layers-CJP-7rgY.js";import{Z as ue}from"./zap-wYsbUquJ.js";import{C as pe}from"./clock-BZ2Y9gWt.js";import{S as ge}from"./search-Bxbmmfzn.js";import{P as be,T as fe}from"./trash-2-BdamKxn_.js";import{L as ke}from"./layout-grid-UevcS-fa.js";import"./firebaseConfig-ZmQab4ju.js";import"./firebaseErrorHandler-CK0dtUN1.js";const ve=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],je=G("circle-check-big",ve);const ze=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]],we=G("layout-panel-top",ze);var E="Switch",[ye]=J(E),[Ne,Ce]=ye(E),K=d.forwardRef((a,g)=>{const{__scopeSwitch:u,name:r,checked:n,defaultChecked:l,required:b,disabled:f,value:x="on",onCheckedChange:C,form:k,...v}=a,[j,z]=d.useState(null),o=$(g,t=>z(t)),y=d.useRef(!1),c=j?k||!!j.closest("form"):!0,[h,i]=X({prop:n,defaultProp:l??!1,onChange:C,caller:E});return e.jsxs(Ne,{scope:u,checked:h,disabled:f,children:[e.jsx(q.button,{type:"button",role:"switch","aria-checked":h,"aria-required":b,"data-state":Q(h),"data-disabled":f?"":void 0,disabled:f,value:x,...v,ref:o,onClick:Y(a.onClick,t=>{i(m=>!m),c&&(y.current=t.isPropagationStopped(),y.current||t.stopPropagation())})}),c&&e.jsx(Z,{control:j,bubbles:!y.current,name:r,value:x,checked:h,required:b,disabled:f,form:k,style:{transform:"translateX(-100%)"}})]})});K.displayName=E;var V="SwitchThumb",W=d.forwardRef((a,g)=>{const{__scopeSwitch:u,...r}=a,n=Ce(V,u);return e.jsx(q.span,{"data-state":Q(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:g})});W.displayName=V;var Se="SwitchBubbleInput",Z=d.forwardRef(({__scopeSwitch:a,control:g,checked:u,bubbles:r=!0,...n},l)=>{const b=d.useRef(null),f=$(b,l),x=ae(u),C=oe(g);return d.useEffect(()=>{const k=b.current;if(!k)return;const v=window.HTMLInputElement.prototype,z=Object.getOwnPropertyDescriptor(v,"checked").set;if(x!==u&&z){const o=new Event("click",{bubbles:r});z.call(k,u),k.dispatchEvent(o)}},[x,u,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:u,...n,tabIndex:-1,ref:f,style:{...n.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Z.displayName=Se;function Q(a){return a?"checked":"unchecked"}var Te=K,Pe=W;function Le({className:a,...g}){return e.jsx(Te,{"data-slot":"switch",className:P("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...g,children:e.jsx(Pe,{"data-slot":"switch-thumb",className:P("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const T=d.memo(({items:a=[],onAdd:g,onRemove:u,onUpdate:r,canEdit:n,title:l,icon:b,placeholder:f="Search or Add..."})=>{const[x,C]=d.useState(""),[k,v]=d.useState(null),[j,z]=d.useState(""),{toast:o}=F(),y=d.useMemo(()=>{if(!x)return a.map((t,m)=>({item:t,idx:m}));const i=x.toLowerCase();return a.map((t,m)=>({item:t,idx:m})).filter(({item:t})=>(typeof t=="string"?t:t.label).toLowerCase().includes(i))},[a,x]),c=()=>{const i=x.trim();if(i){if(a.some(t=>(typeof t=="string"?t:t.label).toLowerCase()===i.toLowerCase())){o({variant:"destructive",title:"Duplicate",description:`"${i}" already exists.`});return}g(i),C("")}},h=i=>{const t=j.trim();if(t&&t!==a[i]){if(a.some((m,L)=>L!==i&&(typeof m=="string"?m:m.label).toLowerCase()===t.toLowerCase())){o({variant:"destructive",title:"Duplicate",description:`"${t}" already exists.`});return}r(i,t)}v(null)};return e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"shrink-0 p-4 border-b border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-white dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 rounded-lg shadow-sm",children:e.jsx(b,{size:16,className:"text-zinc-600 dark:text-zinc-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100 uppercase tracking-wide",children:l}),e.jsxs("p",{className:"text-[10px] font-medium text-zinc-400",children:[a.length," Records"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 group",children:[e.jsx(ge,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{value:x,onChange:i=>C(i.target.value),onKeyDown:i=>i.key==="Enter"&&n&&c(),placeholder:f,className:"w-full bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg pl-9 pr-3 py-2 text-xs font-bold outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all placeholder:font-medium"})]}),n&&e.jsx("button",{onClick:c,disabled:!x.trim(),className:"px-3 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-lg hover:bg-zinc-800 dark:hover:bg-zinc-200 disabled:opacity-50 transition-colors",children:e.jsx(be,{size:16})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:y.length>0?y.map(({item:i,idx:t})=>{const m=k===t,L=typeof i=="string"?i:i.label;return e.jsxs("div",{className:"group flex items-center justify-between px-3 py-2 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/50 border border-transparent hover:border-zinc-100 dark:hover:border-zinc-800 transition-all",children:[m?e.jsx("input",{autoFocus:!0,value:j,onChange:s=>z(s.target.value),onBlur:()=>h(t),onKeyDown:s=>{s.key==="Enter"&&h(t),s.key==="Escape"&&v(null)},className:"flex-1 bg-transparent text-xs font-bold text-indigo-600 dark:text-indigo-400 outline-none"}):e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("span",{className:"text-[10px] font-mono text-zinc-300 dark:text-zinc-600 w-6 shrink-0",children:String(t+1).padStart(2,"0")}),e.jsx("span",{onClick:()=>{n&&(v(t),z(L))},className:P("text-xs font-medium truncate cursor-pointer select-none text-zinc-600 dark:text-zinc-300",n&&"hover:text-indigo-600 dark:hover:text-indigo-400"),children:L})]}),n&&!m&&e.jsx("button",{onClick:()=>u(t),className:"opacity-0 group-hover:opacity-100 p-1.5 text-zinc-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-all",children:e.jsx(fe,{size:12})})]},t)}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-300 dark:text-zinc-700 opacity-60",children:[e.jsx(ke,{size:32,strokeWidth:1,className:"mb-2"}),e.jsx("span",{className:"text-xs font-medium",children:"No items found"})]})})]})});function Je(){const a=ee(),{toast:g}=F(),{currentUser:u}=te(),{configs:r,setConfigs:n,ticketOptions:l,setTicketOptions:b,projects:f,setProjects:x,loading:C}=ne(),[k,v]=d.useState(!1),[j,z]=d.useState(!1),[o,y]=d.useState("broadcast"),c=se(u,[re.LEAD]),h=d.useCallback(()=>z(!0),[]),i=async()=>{if(c){v(!0);try{await Promise.all([B.updateConfigs(r),B.updateTicketOptions(l),B.updateProjects(f)]),g({title:"Deployed",description:"Changes synced successfully.",className:"bg-emerald-500 text-white border-none font-bold"}),z(!1)}catch(s){g({variant:"destructive",title:"Failed",description:s.message})}finally{v(!1)}}},t=(s,p,N)=>({onAdd:S=>{h(),p(w=>N?{...w,[N]:[...w[N],S]}:[...w,S])},onRemove:S=>{h(),p(w=>N?{...w,[N]:w[N].filter((A,R)=>R!==S)}:w.filter((A,R)=>R!==S))},onUpdate:(S,w)=>{h(),p(A=>N?{...A,[N]:A[N].map((R,_)=>_===S?w:R)}:A.map((R,_)=>_===S?w:R))}}),m={onAdd:s=>{h(),n(p=>({...p,cdnOptions:[...p.cdnOptions,{id:s,label:s,color:"bg-zinc-500"}]}))},onRemove:t(r,n,"cdnOptions").onRemove,onUpdate:(s,p)=>{}};if(C)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx(D,{className:"animate-spin text-zinc-400"})});const L=[{id:"broadcast",label:"Broadcast",icon:I,desc:"Channels, Leagues, CDN"},{id:"tickets",label:"Ticketing",icon:H,desc:"Types, Severity, Status"},{id:"org",label:"Organization",icon:M,desc:"Projects, Teams"},{id:"system",label:"System",icon:U,desc:"Sync, Preferences"}];return e.jsxs("div",{className:"h-screen bg-zinc-50 dark:bg-black flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"shrink-0 h-14 bg-white dark:bg-zinc-950 border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-between px-4 z-40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-2 -ml-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:e.jsx(de,{size:18,className:"text-zinc-500"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-zinc-900 dark:bg-white rounded-lg flex items-center justify-center text-white dark:text-black",children:e.jsx(U,{size:16})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-black uppercase tracking-wide text-zinc-900 dark:text-white leading-none",children:"Registry Hub"}),e.jsxs("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:[r.leagues?.length+r.channels?.length||0," Records"]})]})]})]}),c&&e.jsxs(O,{onClick:i,disabled:!j||k,className:P("h-9 rounded-lg px-6 font-bold uppercase text-[10px] tracking-widest transition-all",j?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-400"),children:[k?e.jsx(D,{size:14,className:"animate-spin mr-2"}):e.jsx(le,{size:14,className:"mr-2"}),k?"Saving...":"Commit Changes"]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("nav",{className:"w-64 shrink-0 bg-white dark:bg-zinc-950 border-r border-zinc-200 dark:border-zinc-800 flex flex-col py-4 overflow-y-auto hidden md:flex",children:[e.jsx("div",{className:"px-4 mb-2 text-[10px] font-black uppercase text-zinc-400 tracking-widest",children:"Domains"}),e.jsx("div",{className:"space-y-1 px-2",children:L.map(s=>e.jsxs("button",{onClick:()=>y(s.id),className:P("w-full flex items-center gap-3 px-3 py-3 rounded-xl text-left transition-all",o===s.id?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:text-zinc-700 dark:hover:text-zinc-300"),children:[e.jsx("div",{className:P("p-1.5 rounded-lg",o===s.id?"bg-white dark:bg-zinc-700 shadow-sm text-indigo-500":"bg-zinc-100 dark:bg-zinc-800/50"),children:e.jsx(s.icon,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold uppercase tracking-wide leading-none mb-1",children:s.label}),e.jsx("div",{className:"text-[9px] font-medium text-zinc-400",children:s.desc})]}),o===s.id&&e.jsx(xe,{size:14,className:"ml-auto text-zinc-400"})]},s.id))})]}),e.jsx("main",{className:"flex-1 overflow-hidden bg-zinc-50/50 dark:bg-black/50 p-4 md:p-6",children:e.jsxs("div",{className:"h-full w-full max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:[o==="broadcast"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 h-full",children:[e.jsx(T,{title:"Leagues",icon:ce,items:r.leagues,...t(r,n,"leagues"),canEdit:c}),e.jsx(T,{title:"Channels",icon:I,items:r.channels,...t(r,n,"channels"),canEdit:c,placeholder:"Add Channel..."}),e.jsx(T,{title:"CDN Providers",icon:he,items:r.cdnOptions,...m,canEdit:c,placeholder:"Add Provider..."})]}),o==="tickets"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 h-full",children:[e.jsx(T,{title:"Types",icon:H,items:l.types,...t(l,b,"types"),canEdit:c}),e.jsx(T,{title:"Status",icon:je,items:l.statuses,...t(l,b,"statuses"),canEdit:c}),e.jsx(T,{title:"Severity",icon:ie,items:l.severities,...t(l,b,"severities"),canEdit:c}),e.jsx(T,{title:"Category",icon:me,items:l.categories,...t(l,b,"categories"),canEdit:c})]}),o==="org"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full items-start",children:[e.jsx("div",{className:"h-[500px]",children:e.jsx(T,{title:"Projects / Tenants",icon:we,items:f,...t(f,x),canEdit:c})}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl p-8 flex flex-col items-center justify-center text-center space-y-4 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 bg-indigo-50 dark:bg-indigo-900/20 rounded-3xl flex items-center justify-center text-indigo-500 mb-2",children:e.jsx(M,{size:40})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-zinc-900 dark:text-white",children:"Team Management"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-2 max-w-sm mx-auto",children:"Configure User Roles, Access Control lists, and Team Member profiles in the dedicated security module."})]}),e.jsx(O,{onClick:()=>window.location.href="/settings/team",className:"mt-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-8 font-bold uppercase text-xs tracking-widest shadow-lg shadow-indigo-500/20",children:"Manage Team"})]})]}),o==="system"&&e.jsx("div",{className:"max-w-2xl mx-auto h-full overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 flex items-center gap-3",children:[e.jsx(ue,{size:18,className:"text-amber-500"}),e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wide",children:"Automated Sync"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:"Google Sheet Sync"}),e.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:"Automatically fetch ticket data daily."})]}),e.jsx(Le,{checked:r.ticketSync?.autoSync,onCheckedChange:s=>{h(),n(p=>({...p,ticketSync:{...p.ticketSync,autoSync:s}}))},disabled:!c})]}),r.ticketSync?.autoSync&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-100 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{size:16,className:"text-zinc-400"}),e.jsx("span",{className:"text-xs font-bold uppercase text-zinc-600 dark:text-zinc-300",children:"Schedule Time"})]}),e.jsx("input",{type:"time",value:r.ticketSync?.syncTime||"08:00",onChange:s=>{h(),n(p=>({...p,ticketSync:{...p.ticketSync,syncTime:s.target.value}}))},className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded px-2 py-1 text-xs font-bold outline-none focus:border-indigo-500"})]})]})]})})]})})]}),e.jsx("div",{className:"md:hidden shrink-0 bg-white dark:bg-zinc-950 border-t border-zinc-200 dark:border-zinc-800 p-2 flex justify-between",children:L.map(s=>e.jsxs("button",{onClick:()=>y(s.id),className:P("flex flex-col items-center justify-center p-2 rounded-lg transition-all flex-1",o===s.id?"text-indigo-600 dark:text-white bg-zinc-50 dark:bg-zinc-900":"text-zinc-400"),children:[e.jsx(s.icon,{size:20,className:P("mb-1",o===s.id&&"fill-current opacity-20")}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-wider",children:s.label.split(" ")[0]})]},s.id))})]})}export{Je as default};
