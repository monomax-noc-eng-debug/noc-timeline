import{d as V,r as u,l as F,m as ee,j as e,h as te,P as G,k as se,e as C,u as ie,a as $,b as re,t as ae,L as O,x as B,T as ne,v as oe,X as ce}from"./index-CSKDhuAF.js";import{c as I}from"./configService-CpUaQNct.js";import{u as de}from"./useConfigs-CMGGRRhn.js";import{B as D}from"./button-T8EO3R9w.js";import{I as K}from"./input-CWTwQQ4L.js";import{u as le,S as me}from"./index-DdF3XUU8.js";import{u as xe}from"./index-CvOcX_kt.js";import{A as ue}from"./arrow-left-VhuXiEi4.js";import{S as M}from"./save-CT8SH02B.js";import{T as U,a as ge}from"./tv-BVwAu91U.js";import{T as H}from"./tag-DY0is7bl.js";import{G as he}from"./globe-Ix0sEAsz.js";import{L as pe}from"./layers-9OkWWGy_.js";import{C as be}from"./clock-iDlXYaJJ.js";import{P as W}from"./plus-DcbkjMl1.js";import{T as fe}from"./trash-2-CysnR-lh.js";import"./firebaseConfig-Cp-1Ewx5.js";const ke=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],je=V("circle-check-big",ke);const ve=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]],we=V("layout-panel-top",ve);var R="Switch",[ye]=te(R),[ze,Ne]=ye(R),q=u.forwardRef((a,m)=>{const{__scopeSwitch:x,name:i,checked:s,defaultChecked:r,required:c,disabled:g,value:d="on",onCheckedChange:b,form:l,...y}=a,[j,v]=u.useState(null),f=F(m,p=>v(p)),n=u.useRef(!1),t=j?l||!!j.closest("form"):!0,[o,E]=ee({prop:s,defaultProp:r??!1,onChange:b,caller:R});return e.jsxs(ze,{scope:x,checked:o,disabled:g,children:[e.jsx(G.button,{type:"button",role:"switch","aria-checked":o,"aria-required":c,"data-state":Y(o),"data-disabled":g?"":void 0,disabled:g,value:d,...y,ref:f,onClick:se(a.onClick,p=>{E(_=>!_),t&&(n.current=p.isPropagationStopped(),n.current||p.stopPropagation())})}),t&&e.jsx(Q,{control:j,bubbles:!n.current,name:i,value:d,checked:o,required:c,disabled:g,form:l,style:{transform:"translateX(-100%)"}})]})});q.displayName=R;var X="SwitchThumb",J=u.forwardRef((a,m)=>{const{__scopeSwitch:x,...i}=a,s=Ne(X,x);return e.jsx(G.span,{"data-state":Y(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:m})});J.displayName=X;var Ce="SwitchBubbleInput",Q=u.forwardRef(({__scopeSwitch:a,control:m,checked:x,bubbles:i=!0,...s},r)=>{const c=u.useRef(null),g=F(c,r),d=le(x),b=xe(m);return u.useEffect(()=>{const l=c.current;if(!l)return;const y=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(y,"checked").set;if(d!==x&&v){const f=new Event("click",{bubbles:i});v.call(l,x),l.dispatchEvent(f)}},[d,x,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:x,...s,tabIndex:-1,ref:g,style:{...s.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q.displayName=Ce;function Y(a){return a?"checked":"unchecked"}var Se=q,Te=J;function Pe({className:a,...m}){return e.jsx(Se,{"data-slot":"switch",className:C("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...m,children:e.jsx(Te,{"data-slot":"switch-thumb",className:C("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const N=({title:a,description:m,icon:x,children:i,color:s="zinc"})=>{const r=x,c={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",emerald:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400",amber:"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",zinc:"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400",indigo:"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400"};return e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-4 p-5 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("div",{className:C("w-10 h-10 rounded-lg flex items-center justify-center shrink-0",c[s]),children:e.jsx(r,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-zinc-900 dark:text-white text-lg leading-tight",children:a}),m&&e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:m})]})]}),e.jsx("div",{className:"p-5",children:i})]})},T=u.memo(({items:a=[],onAdd:m,onRemove:x,onUpdate:i,canEdit:s,emptyText:r="No items."})=>{const[c,g]=u.useState(""),[d,b]=u.useState(null),[l,y]=u.useState(""),{toast:j}=$(),v=()=>{const n=c.trim();if(n){if(a.some(t=>t.toLowerCase()===n.toLowerCase())){j({variant:"destructive",title:"Duplicate Entry",description:`"${n}" already exists.`});return}m(n),g("")}},f=n=>{const t=l.trim();if(t&&t!==a[n]){if(a.some((o,E)=>E!==n&&o.toLowerCase()===t.toLowerCase())){j({variant:"destructive",title:"Duplicate Entry",description:`"${t}" already exists.`});return}i(n,t)}b(null)};return e.jsxs("div",{className:"space-y-4",children:[s&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{value:c,onChange:n=>g(n.target.value),onKeyDown:n=>n.key==="Enter"&&v(),placeholder:"Type and press Enter...",className:"flex-1 bg-zinc-50 dark:bg-zinc-800/50"}),e.jsx(D,{onClick:v,disabled:!c.trim(),size:"icon",className:"shrink-0 bg-zinc-900 dark:bg-white text-white dark:text-black",children:e.jsx(W,{size:18})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.length>0?a.map((n,t)=>e.jsxs("div",{className:C("group relative flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all animate-in zoom-in-95 duration-200",d===t?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 ring-1 ring-indigo-500":"bg-zinc-50 dark:bg-zinc-800/50 border-zinc-200 dark:border-zinc-700 hover:border-zinc-300 dark:hover:border-zinc-600"),children:[d===t?e.jsx("input",{autoFocus:!0,value:l,onChange:o=>y(o.target.value),onKeyDown:o=>{o.key==="Enter"&&f(t),o.key==="Escape"&&b(null)},onBlur:()=>f(t),className:"bg-transparent outline-none text-sm font-medium w-full min-w-[80px] text-indigo-700 dark:text-indigo-300"}):e.jsx("span",{onClick:()=>{s&&(b(t),y(n))},className:C("text-sm font-medium select-none text-zinc-700 dark:text-zinc-200",s&&"cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400"),children:n}),s&&d!==t&&e.jsx("button",{onClick:o=>{o.stopPropagation(),x(t)},className:"ml-1 p-0.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-full transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(ce,{size:13,strokeWidth:3})})]},t)):e.jsx("div",{className:"w-full py-6 text-center border-2 border-dashed border-zinc-100 dark:border-zinc-800 rounded-xl text-zinc-400 text-sm italic",children:r})})]})});T.displayName="TagListEditor";const Z=u.memo(({items:a=[],onAdd:m,onRemove:x,onUpdate:i,canEdit:s})=>{const[r,c]=u.useState(""),g=["bg-zinc-500","bg-red-500","bg-orange-500","bg-amber-500","bg-emerald-500","bg-blue-500","bg-purple-500","bg-pink-500"];return e.jsxs("div",{className:"space-y-4",children:[s&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{value:r,onChange:d=>c(d.target.value),onKeyDown:d=>d.key==="Enter"&&r.trim()&&m(r.trim()),placeholder:"Provider Name...",className:"flex-1 bg-zinc-50 dark:bg-zinc-800/50"}),e.jsx(D,{onClick:()=>r.trim()&&(m(r.trim()),c("")),disabled:!r.trim(),size:"icon",className:"shrink-0",children:e.jsx(W,{size:18})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:a.map((d,b)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-800/30 border border-zinc-200 dark:border-zinc-700/50 rounded-xl group hover:shadow-sm transition-all",children:[e.jsx("div",{className:C("w-3 h-3 rounded-full shrink-0 ring-2 ring-white dark:ring-zinc-900",d.color||"bg-zinc-500")}),e.jsx("span",{className:"flex-1 text-sm font-medium truncate",children:d.label}),s&&e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.slice(0,3).map(l=>e.jsx("button",{onClick:()=>i(b,{...d,color:l}),className:C("w-3 h-3 rounded-full hover:scale-125 transition-transform ring-1 ring-white/20",l)},l)),e.jsx("button",{onClick:()=>x(b),className:"ml-1 text-zinc-400 hover:text-red-500 transition-colors",children:e.jsx(fe,{size:14})})]})]},b))})]})});Z.displayName="CDNListEditor";function We(){const a=ie(),{toast:m}=$(),{currentUser:x}=re(),{configs:i,setConfigs:s,ticketOptions:r,setTicketOptions:c,projects:g,setProjects:d,loading:b}=de(),[l,y]=u.useState(!1),[j,v]=u.useState(!1),[f,n]=u.useState("broadcast"),t=ae(x,[oe.LEAD]),o=u.useCallback(()=>v(!0),[]),E=async()=>{if(t){y(!0);try{await Promise.all([I.updateConfigs(i),I.updateTicketOptions(r),I.updateProjects(g)]),m({title:"Configuration Deployed",description:"All system parameters have been updated.",className:"bg-emerald-600 text-white border-none shadow-2xl font-bold"}),v(!1)}catch(h){m({variant:"destructive",title:"Deployment Failed",description:h.message})}finally{y(!1)}}},p=(h,k,z=null)=>({add:S=>{o(),k(w=>z?{...w,[z]:[...w[z],S]}:[...w,S])},remove:S=>{o(),k(w=>z?{...w,[z]:w[z].filter((L,P)=>P!==S)}:w.filter((L,P)=>P!==S))},update:(S,w)=>{o(),k(L=>z?{...L,[z]:L[z].map((P,A)=>A===S?w:P)}:L.map((P,A)=>A===S?w:P))}});if(b)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx(O,{className:"animate-spin text-zinc-400"})});const _=[{id:"broadcast",label:"Broadcast",icon:U},{id:"tickets",label:"Tickets",icon:H},{id:"organization",label:"Organization",icon:B},{id:"preferences",label:"System",icon:me}];return e.jsxs("div",{className:"h-full bg-zinc-50 dark:bg-black flex flex-col",children:[e.jsx("header",{className:"shrink-0 z-30 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-md border-b border-zinc-200 dark:border-zinc-800",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-2 -ml-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:e.jsx(ue,{size:20,className:"text-zinc-600 dark:text-zinc-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-zinc-900 dark:text-white uppercase tracking-tight",children:"Configuration Hub"}),e.jsx("p",{className:"text-[10px] font-black uppercase text-zinc-400 tracking-widest leading-none mt-1",children:"System Parameters & Registry"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:t&&e.jsxs(D,{onClick:E,disabled:!j||l,className:C("hidden md:flex rounded-xl font-bold transition-all shadow-lg active:scale-95",j?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-500/30":"bg-zinc-200 text-zinc-400 dark:bg-zinc-800 dark:text-zinc-600"),children:[l?e.jsx(O,{size:16,className:"animate-spin mr-2"}):e.jsx(M,{size:16,className:"mr-2"}),l?"Deploying...":"Deploy Changes"]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 pb-32",children:[e.jsx("div",{className:"flex p-1 bg-zinc-100 dark:bg-zinc-900 rounded-2xl mb-8 w-full md:w-auto md:inline-flex overflow-x-auto no-scrollbar border border-zinc-200 dark:border-zinc-800 shadow-inner",children:_.map(h=>e.jsxs("button",{onClick:()=>n(h.id),className:C("flex-1 md:flex-none flex items-center justify-center gap-2.5 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-wider transition-all whitespace-nowrap",f===h.id?"bg-white dark:bg-zinc-800 text-indigo-600 dark:text-white shadow-md border border-zinc-100 dark:border-zinc-700":"text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300"),children:[e.jsx(h.icon,{size:14,strokeWidth:2.5}),h.label]},h.id))}),e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[f==="broadcast"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(N,{title:"Leagues Registry",description:"Competition categories",icon:ge,color:"amber",children:e.jsx(T,{items:i.leagues,...p(i,s,"leagues"),canEdit:t})}),e.jsx(N,{title:"Channel Map",description:"Operational Broadcast Channels",icon:U,color:"blue",children:e.jsx(T,{items:i.channels,...p(i,s,"channels"),canEdit:t})}),e.jsx(N,{title:"CDN Providers",description:"Content Delivery Network Nodes",icon:he,color:"emerald",children:e.jsx(Z,{items:i.cdnOptions,onAdd:h=>{o(),s(k=>({...k,cdnOptions:[...k.cdnOptions,{id:h,label:h,color:"bg-zinc-500"}]}))},onRemove:p(i,s,"cdnOptions").remove,onUpdate:p(i,s,"cdnOptions").update,canEdit:t})})]}),f==="tickets"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(N,{title:"Types",icon:H,color:"blue",children:e.jsx(T,{items:r.types,...p(r,c,"types"),canEdit:t})}),e.jsx(N,{title:"Statuses",icon:je,color:"emerald",children:e.jsx(T,{items:r.statuses,...p(r,c,"statuses"),canEdit:t})}),e.jsx(N,{title:"Severities",icon:ne,color:"amber",children:e.jsx(T,{items:r.severities,...p(r,c,"severities"),canEdit:t})}),e.jsx(N,{title:"Categories",icon:pe,color:"purple",children:e.jsx(T,{items:r.categories,...p(r,c,"categories"),canEdit:t})})]}),f==="organization"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(N,{title:"Projects",description:"Active Systems",icon:we,color:"zinc",children:e.jsx(T,{items:g,...p(g,d),canEdit:t})}),e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 flex items-center justify-center shrink-0",children:e.jsx(B,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-100 mb-2",children:"NOC Team Management"}),e.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-300 mb-4",children:"Manage team members, roles, and access control in the dedicated Team Management page."}),e.jsxs("button",{onClick:()=>window.location.href="/settings/team",className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition-colors inline-flex items-center gap-2",children:[e.jsx(B,{size:16}),"Go to Team Management"]})]})]})})]}),f==="preferences"&&e.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:e.jsxs(N,{title:"Ticket Auto-Sync",description:"Google Sheets Integration",icon:be,color:"purple",children:[e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:"Enable Daily Sync"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Fetch latest tickets automatically."})]}),e.jsx(Pe,{checked:i.ticketSync?.autoSync,onCheckedChange:h=>{o(),s(k=>({...k,ticketSync:{...k.ticketSync,autoSync:h}}))},disabled:!t})]}),i.ticketSync?.autoSync&&e.jsxs("div",{className:"flex items-center justify-between py-4 border-t border-zinc-100 dark:border-zinc-800 animate-in fade-in",children:[e.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:"Sync Time"}),e.jsx("input",{type:"time",value:i.ticketSync?.syncTime||"08:00",onChange:h=>{o(),s(k=>({...k,ticketSync:{...k.ticketSync,syncTime:h.target.value}}))},className:"bg-zinc-100 dark:bg-zinc-800 border-none rounded-lg px-3 py-1.5 font-bold text-sm outline-none focus:ring-2 focus:ring-purple-500"})]})]})})]})]})}),t&&j&&e.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-50 animate-in slide-in-from-bottom-4 fade-in",children:e.jsx(D,{onClick:E,disabled:l,className:"w-14 h-14 rounded-full shadow-2xl bg-indigo-600 text-white p-0 flex items-center justify-center",children:l?e.jsx(O,{className:"animate-spin"}):e.jsx(M,{size:24})})})]})}export{We as default};
