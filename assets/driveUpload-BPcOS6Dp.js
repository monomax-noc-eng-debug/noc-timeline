import{d as w,r as d,J as b,j as t,y as _,ao as T,X as F}from"./index-BFEWtwhJ.js";import{a as $}from"./sliders-horizontal-iwKFpgUC.js";import{C as J}from"./chevron-right-DVovX0bV.js";const Y=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ge=w("ban",Y);const O=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],xe=w("cloud-upload",O);const Q=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],U=w("download",Q);const q=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],V=w("image-off",q);const X=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],fe=w("image",X);const K=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],A=w("maximize-2",K);const ee=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],W=w("minimize-2",ee);const te=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],oe=w("move",te),C=e=>{if(!e)return"";try{const r=new URL(e);if(r.hostname.includes("drive.google.com")||r.hostname.includes("docs.google.com")){let s=r.searchParams.get("id");if(!s){const a=r.pathname.split("/"),c=a.indexOf("d");c!==-1&&a[c+1]&&(s=a[c+1])}if(s)return`https://drive.google.com/thumbnail?id=${s}&sz=w1000`}return e}catch{return e}},se=(e,r=[320,640,960,1280,1920])=>e?e.includes("drive.google.com")||e.includes("docs.google.com")?{srcset:e,sizes:"100vw"}:{srcset:r.map(c=>`${e}?w=${c} ${c}w`).join(", "),sizes:"(max-width: 640px) 320px, (max-width: 960px) 640px, (max-width: 1280px) 960px, 1280px"}:{srcset:"",sizes:""},re=e=>!e||typeof e!="string"?!1:e.includes("drive.google.com")||e.includes("docs.google.com"),ae=async e=>re(e)?Promise.resolve("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+"):new Promise(r=>{const s=new Image;s.crossOrigin="anonymous";const a=setTimeout(()=>{r("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+")},3e3);s.onload=()=>{clearTimeout(a);const c=document.createElement("canvas");c.width=20,c.height=20,c.getContext("2d").drawImage(s,0,0,20,20);try{const g=c.toDataURL("image/jpeg",.5);r(g)}catch{r("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+")}},s.onerror=()=>{clearTimeout(a),r("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+")},s.src=e}),ne=e=>new Promise((r,s)=>{const a=new Image;a.onload=()=>r(),a.onerror=()=>s(new Error("Failed to preload image")),a.src=e});function ie({src:e,alt:r="",className:s="",onClick:a,sizes:c,loading:m="lazy",placeholder:g="blur",fallback:i,onLoad:y,onError:v,...P}){const[x,j]=d.useState(null),[M,D]=d.useState(null),[u,k]=d.useState(!1),[p,I]=d.useState(m!=="lazy"),R=b.useRef(null),h=b.useRef(null),f=b.useRef(null);d.useEffect(()=>{if(!e){setTimeout(()=>j(null),0);return}try{if(typeof e=="object"&&(e instanceof File||e instanceof Blob)){const n=URL.createObjectURL(e);return setTimeout(()=>j(n),0),()=>URL.revokeObjectURL(n)}if(typeof e=="string"){const n=C(e);setTimeout(()=>j(n),0),g==="blur"&&n&&(n.includes("drive.google.com")||n.includes("docs.google.com")?setTimeout(()=>D("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+"),0):ae(n).then(o=>{setTimeout(()=>D(o),0)}).catch(()=>{setTimeout(()=>D("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+"),0)}))}}catch(n){console.error("Error processing image source:",n),setTimeout(()=>j(null),0)}},[e,g]),d.useEffect(()=>{if(m!=="lazy"){setTimeout(()=>I(!0),0);return}const n=h.current||R.current;if(!n){const z=setTimeout(()=>I(!0),50);return()=>clearTimeout(z)}if(!p)return f.current=new IntersectionObserver(z=>{z.forEach(o=>{o.isIntersecting&&(I(!0),f.current&&f.current.disconnect())})},{rootMargin:"50px",threshold:.01}),f.current.observe(n),()=>{f.current&&f.current.disconnect()}},[m,p]);const{srcset:L,sizesAttr:S}=d.useMemo(()=>x?se(x):{srcset:"",sizesAttr:""},[x]),Z=n=>{y&&y(n)},H=n=>{k(!0),i&&n.target.src!==i?(n.target.src=i,k(!1)):v&&v(n)};return d.useEffect(()=>{p&&x&&!u&&ne(x).catch(()=>{})},[p,x,u]),u&&!i?t.jsxs("div",{className:_("flex flex-col items-center justify-center bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",s),onClick:a,children:[t.jsx(V,{className:"text-zinc-400 mb-1",size:20}),t.jsx("span",{className:"text-[10px] font-bold text-zinc-400 uppercase",children:"Failed to load"})]}):m==="lazy"&&!p?t.jsx("div",{className:_("relative overflow-hidden bg-zinc-100 dark:bg-zinc-900",s),ref:h,children:M&&t.jsx("img",{src:M,alt:"",className:"absolute inset-0 w-full h-full object-cover filter blur-xl scale-110 opacity-50","aria-hidden":"true"})}):t.jsx("img",{ref:R,src:x||i,srcSet:L||void 0,sizes:c||S||void 0,alt:r,className:_(s),loading:m,onLoad:Z,onError:H,onClick:a,decoding:"async",...P})}function pe({isOpen:e,onClose:r,imageUrl:s,allImages:a=[],initialIndex:c=0}){const[m,g]=d.useState(c),[i,y]=d.useState(1),[v,P]=d.useState({x:0,y:0}),[x,j]=d.useState(!1),[M,D]=d.useState({x:0,y:0}),u=a.length>0?a:[s],k=u[m]||s,p=b.useRef(null),[I,R]=d.useState(!1);d.useEffect(()=>{const o=()=>R(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",o),()=>document.removeEventListener("fullscreenchange",o)},[]);const h=b.useCallback(()=>{y(1),P({x:0,y:0})},[]),f=b.useCallback(o=>{o?.stopPropagation(),g(l=>(l+1)%u.length),h()},[u.length,h]),L=b.useCallback(o=>{o?.stopPropagation(),g(l=>(l-1+u.length)%u.length),h()},[u.length,h]),S=b.useCallback(o=>{o?.stopPropagation(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():p.current?.requestFullscreen().catch(l=>{console.error("Fullscreen failed:",l)})},[]);if(d.useEffect(()=>{const o=l=>{if(e)switch(l.key){case"ArrowRight":f();break;case"ArrowLeft":L();break;case"Escape":document.fullscreenElement?document.exitFullscreen():r();break;case"f":case"F":S();break;case"0":h();break}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[e,f,L,r,h,S]),d.useEffect(()=>{const o=p.current;if(!o)return;const l=N=>{if(!e)return;N.preventDefault();const B=-N.deltaY>0?1.1:.9,E=Math.min(Math.max(i*B,.5),10);y(E),E<=1&&P({x:0,y:0})};return o.addEventListener("wheel",l,{passive:!1}),()=>o.removeEventListener("wheel",l)},[e,i]),d.useEffect(()=>{let o=!0,l=null;return e?l=setTimeout(()=>{if(!o)return;const N=c||(s&&a.indexOf(s)>=0?a.indexOf(s):0);g(N),h(),document.body.style.overflow="hidden"},0):document.body.style.overflow="",()=>{o=!1,l&&clearTimeout(l),document.body.style.overflow=""}},[e,c,s,a,h]),!e)return null;const Z=o=>{i<=1||(o.preventDefault(),j(!0),D({x:o.clientX-v.x,y:o.clientY-v.y}))},H=o=>{!x||i<=1||(o.preventDefault(),P({x:o.clientX-M.x,y:o.clientY-M.y}))},n=()=>{j(!1)},z=o=>{o?.stopPropagation(),i===1?y(2.5):h()};return T.createPortal(t.jsxs("div",{ref:p,className:`fixed inset-0 z-[9999] flex items-center justify-center bg-black/95 backdrop-blur-2xl animate-in fade-in duration-300 overflow-hidden select-none ${x?"cursor-grabbing":""}`,onClick:r,onMouseMove:H,onMouseUp:n,onMouseLeave:n,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/60 pointer-events-none"}),t.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 md:p-8 flex justify-between items-center z-50",children:[t.jsxs("div",{className:"flex items-center gap-4 cursor-pointer group/header",onClick:S,children:[t.jsx("div",{className:"w-10 h-10 md:w-14 md:h-14 bg-white/10 border border-white/10 rounded-lg flex items-center justify-center backdrop-blur-xl shadow-2xl group-hover/header:bg-white/20 transition-all",children:I?t.jsx(W,{size:24,className:"text-white"}):t.jsx(A,{size:24,className:"text-white"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[12px] md:text-[14px] font-black text-white uppercase ",children:"NOC Visual Intel"}),t.jsxs("span",{className:"text-[10px] md:text-[11px] font-bold text-white/30 uppercase tracking-widest leading-none mt-1 group-hover/header:text-white/50 transition-colors",children:["Ref ID ",m+1," of ",u.length," â€¢ Click to ",I?"Exit":"Maximize"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 pointer-events-auto",children:[t.jsx("button",{onClick:z,className:`p-4 rounded-lg border border-white/10 transition-all active:scale-90 flex backdrop-blur-md ${i>1?"bg-white text-black":"bg-white/5 text-white hover:bg-white/10"}`,title:i>1?"Reset Zoom":"Quick Zoom",children:i>1?t.jsx(W,{size:22}):t.jsx(A,{size:22})}),t.jsx("a",{href:C(k),download:!0,target:"_blank",rel:"noreferrer",onClick:o=>o.stopPropagation(),className:"p-4 bg-white/5 hover:bg-white/10 text-white rounded-lg border border-white/10 transition-all active:scale-90 backdrop-blur-md",children:t.jsx(U,{size:22})}),t.jsx("button",{onClick:r,className:"p-4 bg-white text-black rounded-lg shadow-[0_20px_40px_rgba(0,0,0,0.4)] hover:shadow-white/10 hover:bg-zinc-200 transition-all active:scale-90",children:t.jsx(F,{size:24,strokeWidth:3})})]})]}),t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",onClick:r,children:t.jsxs("div",{className:"relative transition-transform duration-200 ease-out",style:{transform:`translate(${v.x}px, ${v.y}px) scale(${i})`,cursor:i>1?x?"grabbing":"grab":"zoom-in"},onClick:o=>{o.stopPropagation(),i===1?y(2.5):h()},onMouseDown:Z,children:[t.jsx(ie,{src:k,alt:"Preview",className:"max-w-[90vw] max-h-[80vh] md:max-w-[85vw] md:max-h-[85vh] rounded-lg md:rounded-xl shadow-[0_0_120px_rgba(0,0,0,0.8)] border border-white/10 animate-in zoom-in-95 duration-500 pointer-events-none",style:{imageRendering:"auto"},loading:"eager",fallback:"https://placehold.co/1200x800?text=Failed+to+load+image"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity",children:i===1&&t.jsx(oe,{size:64,className:"text-white/10"})})]})}),u.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:L,className:"absolute left-4 md:left-12 top-1/2 -translate-y-1/2 w-14 h-14 md:w-20 md:h-20 rounded-lg bg-black/40 hover:bg-white text-white hover:text-black border border-white/10 transition-all duration-500 flex items-center justify-center group active:scale-90 z-50 backdrop-blur-xl shadow-2xl",children:t.jsx($,{size:32,className:"group-hover:-translate-x-1.5 transition-transform",strokeWidth:4})}),t.jsx("button",{onClick:f,className:"absolute right-4 md:right-12 top-1/2 -translate-y-1/2 w-14 h-14 md:w-20 md:h-20 rounded-lg bg-black/40 hover:bg-white text-white hover:text-black border border-white/10 transition-all duration-500 flex items-center justify-center group active:scale-90 z-50 backdrop-blur-xl shadow-2xl",children:t.jsx(J,{size:32,className:"group-hover:translate-x-1.5 transition-transform",strokeWidth:4})})]}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 md:p-12 flex flex-col items-center gap-6 pointer-events-none z-50",children:[u.length>1&&t.jsx("div",{className:"flex gap-2 p-2 bg-black/60 backdrop-blur-2xl rounded-lg border border-white/10 pointer-events-auto overflow-x-auto max-w-[85vw] no-scrollbar shadow-2xl",children:u.map((o,l)=>t.jsx("button",{onClick:N=>{N.stopPropagation(),g(l),h()},className:`h-2.5 rounded-full transition-all duration-700 ease-out ${m===l?"bg-white w-12 md:w-16 shadow-[0_0_20px_rgba(255,255,255,0.4)]":"bg-white/10 hover:bg-white/30 w-2.5"}`},l))}),t.jsx("div",{className:"bg-black/80 backdrop-blur-2xl border border-white/10 rounded-lg px-6 py-3 shadow-2xl animate-in slide-in-from-bottom-4 duration-700",children:t.jsxs("p",{className:"text-[10px] md:text-[11px] font-black text-white/40 uppercase truncate max-w-[250px] md:max-w-2xl",children:["SRC: ",k.split("/").pop().substring(0,60)]})})]})]}),document.body)}const G="https://script.google.com/macros/s/AKfycbzsxHS5m3rN6ZdyHS_iZndg-p9RfF6z7TJh_qLebxnUik724Bjf9fi4eiulZjQLs62JBA/exec",ce=async(e,r,s)=>new Promise((a,c)=>{const m=new FileReader;m.readAsDataURL(e),m.onload=async()=>{try{const g=m.result.split(",")[1],i=await fetch(G,{method:"POST",body:JSON.stringify({action:"upload",name:e.name,mimeType:e.type,base64:g})});a(await i.json())}catch(g){c(g)}}}),le=async e=>{if(!e)return;let r=e;e.includes("id=")&&(r=new URLSearchParams(new URL(e).search).get("id"));try{return await(await fetch(G,{method:"POST",body:JSON.stringify({action:"delete",fileId:r})})).json()}catch(s){console.error("Drive Delete Error:",s)}},be=Object.freeze(Object.defineProperty({__proto__:null,deleteFileFromDrive:le,uploadLocalFileToDrive:ce},Symbol.toStringTag,{value:"Module"}));export{ge as B,xe as C,U as D,V as I,pe as a,fe as b,be as c,le as d,C as g,ce as u};
