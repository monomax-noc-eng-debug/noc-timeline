import{r as g,u as z,a as S,j as e,A as C,T as b}from"./index-B5gZUy_b.js";import{i as D}from"./incidentService-DcJgIx8b.js";import{q as f,w as A,c as p,o as v,l as T,a as E,d as j}from"./firebaseConfig-hLvP2kJq.js";import{f as k}from"./format-B568ns5f.js";import{C as M}from"./clock-hKLIUH9B.js";import{S as $}from"./shield-check-CKuJ_Zxx.js";import{T as G}from"./tv-7iCudncH.js";import{U}from"./users-ByUllLbT.js";import{A as I}from"./arrow-right-BDuAE9MA.js";import{P as Q}from"./plus-BnYRYgUJ.js";import{S as R}from"./search-C_CHO80W.js";import{Z as H}from"./zap-DOh-sc34.js";const P=()=>{const[s,i]=g.useState({incidents:{total:0,critical:0,open:0},matches:{total:0,live:0,upcoming:0},currentShift:{onDuty:[],status:"Normal",lastUpdate:null},loading:!0});return g.useEffect(()=>{const t=D.subscribeIncidents(o=>{const a=o.filter(r=>r.status!=="Closed"&&r.status!=="Resolved"),d=a.filter(r=>r.priority==="Critical"||r.priority==="High").length;i(r=>({...r,incidents:{total:a.length,open:a.filter(l=>l.status==="Open").length,critical:d}}))}),c=k(new Date,"yyyy-MM-dd"),n=f(p(j,"schedules"),A("startDate","==",c)),m=v(n,o=>{const a=o.docs.map(l=>l.data()),d=new Date,r=a.filter(l=>{if(l.hasStartStat&&!l.hasEndStat)return!0;if(!l.startTime)return!1;const u=new Date(`${c}T${l.startTime}`),w=new Date(u.getTime()+7200*1e3);return d>=u&&d<=w}).length;i(l=>({...l,matches:{total:a.length,live:r,upcoming:a.length-r}}))}),y=f(p(j,"shifts"),E("createdAt","desc"),T(1)),N=v(y,o=>{if(!o.empty){const a=o.docs[0].data();i(d=>({...d,currentShift:{onDuty:a.onDuty||[],status:a.status||"Normal",lastUpdate:a.updatedAt||a.createdAt}}))}});return i(o=>({...o,loading:!1})),()=>{t(),m(),N()}},[]),s},h=({title:s,value:i,subValue:t,icon:c,color:n,onClick:m})=>e.jsxs("button",{onClick:m,className:"relative overflow-hidden bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-6 rounded-3xl text-left hover:shadow-lg hover:scale-[1.02] transition-all group",children:[e.jsx("div",{className:`absolute top-4 right-4 p-3 rounded-2xl opacity-20 group-hover:opacity-100 transition-opacity ${n}`,children:e.jsx(c,{size:24})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-2",children:s}),e.jsx("h3",{className:"text-4xl font-black text-zinc-900 dark:text-white mb-1",children:i}),e.jsx("p",{className:"text-xs font-medium text-zinc-500 flex items-center gap-1",children:t})]}),e.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 ${n.replace("bg-","bg-gradient-to-r from-transparent via-")}`})]}),x=({label:s,icon:i,onClick:t,colorClass:c="bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white"})=>e.jsxs("button",{onClick:t,className:`flex items-center gap-3 px-5 py-4 rounded-2xl font-bold text-sm transition-all hover:brightness-95 active:scale-95 ${c}`,children:[e.jsx(i,{size:18}),e.jsx("span",{children:s})]});function _(){const s=z(),{currentUser:i}=S(),t=P(),c=()=>{const n=new Date().getHours();return n<12?"Good Morning":n<18?"Good Afternoon":"Good Evening"};return e.jsx("div",{className:"min-h-full p-4 sm:p-8 bg-zinc-50 dark:bg-black",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 animate-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-[10px] font-black uppercase tracking-widest",children:"NOC Dashboard"}),e.jsxs("span",{className:"text-zinc-400 text-xs font-bold flex items-center gap-1",children:[e.jsx(M,{size:12})," ",k(new Date,"EEE, dd MMM yyyy")]})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl font-black text-zinc-900 dark:text-white tracking-tight",children:[c(),", ",e.jsx("span",{className:"text-indigo-600 dark:text-indigo-500",children:i?.name?.split(" ")[0]||"Engineer"}),"."]}),e.jsxs("p",{className:"text-zinc-500 mt-2 font-medium max-w-lg",children:["System status is currently ",e.jsx("span",{className:"text-emerald-500 font-bold",children:"Stable"}),". You have ",t.incidents.total," active cases and ",t.matches.live," live matches monitored."]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Current Shift"}),e.jsxs("div",{className:"flex items-center -space-x-2",children:[t.currentShift.onDuty.slice(0,4).map((n,m)=>e.jsx("div",{className:"w-8 h-8 rounded-full bg-white dark:bg-zinc-800 border-2 border-zinc-50 dark:border-zinc-900 flex items-center justify-center text-[10px] font-black text-zinc-500",title:n,children:n.charAt(0)},m)),t.currentShift.onDuty.length>4&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-zinc-100 dark:bg-zinc-800 border-2 border-zinc-50 dark:border-zinc-900 flex items-center justify-center text-[9px] font-black text-zinc-500",children:["+",t.currentShift.onDuty.length-4]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 animate-in slide-in-from-bottom-6 duration-700 delay-100",children:[e.jsx(h,{title:"Active Incidents",value:t.incidents.total,subValue:t.incidents.critical>0?e.jsxs("span",{className:"text-red-500 font-bold flex items-center gap-1",children:[e.jsx(b,{size:12})," ",t.incidents.critical," Critical Attention"]}):e.jsxs("span",{className:"text-emerald-500 font-bold flex items-center gap-1",children:[e.jsx($,{size:12})," All Systems Normal"]}),icon:C,color:"bg-rose-100 text-rose-600 dark:bg-rose-900/20 dark:text-rose-500",onClick:()=>s("/cases")}),e.jsx(h,{title:"Live Matches",value:t.matches.live,subValue:`${t.matches.total} Total Scheduled Today`,icon:G,color:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-500",onClick:()=>s("/schedule/today")}),e.jsx(h,{title:"Team Status",value:t.currentShift.onDuty.length,subValue:`Status: ${t.currentShift.status}`,icon:U,color:"bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:text-blue-500",onClick:()=>s("/handover")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in slide-in-from-bottom-8 duration-1000 delay-200",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-black text-zinc-400 uppercase tracking-widest",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(x,{label:"New Incident",icon:b,onClick:()=>s("/cases"),colorClass:"bg-rose-600 text-white hover:bg-rose-700 shadow-lg shadow-rose-500/20"}),e.jsx(x,{label:"Shift Handover",icon:I,onClick:()=>s("/handover"),colorClass:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-500/20"}),e.jsx(x,{label:"Log Ticket",icon:Q,onClick:()=>s("/ticket-log")}),e.jsx(x,{label:"Search Matches",icon:R,onClick:()=>s("/schedule/history")})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black dark:from-zinc-800 dark:to-zinc-900 rounded-3xl p-6 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:e.jsx(H,{size:18,className:"text-yellow-400",fill:"currentColor"})}),e.jsx("span",{className:"font-bold text-sm tracking-wide text-zinc-300",children:"System Tip"})]}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Remember to sync tickets!"}),e.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed mb-6",children:"Ensure all external tickets from Google Sheets are synced before the end of your shift to maintain accurate logs."}),e.jsx("button",{onClick:()=>s("/ticket-log"),className:"text-xs font-black uppercase tracking-widest bg-white text-black px-4 py-3 rounded-xl hover:bg-zinc-200 transition-colors",children:"Sync Now"})]})]})]})]})})}export{_ as default};
