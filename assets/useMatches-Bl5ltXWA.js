import{d as M,r as y,O as T}from"./index-Cd1-0mZ_.js";import{c as S,i as E,f as A}from"./format-B568ns5f.js";import{i as _}from"./isSameMonth-CRYCS6Ki.js";import{u as D,Q as g}from"./useBaseQuery-Dv6Bs-Qs.js";import{g as k,a as L,q as f,n as l,o as d,l as w,i as O}from"./firebaseConfig-Cp-1Ewx5.js";const q=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Q=M("file-spreadsheet",q);const F=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],b=M("radio",F);function H(e,n){return D(e,g)}function C(e){return S(e,Date.now())}function j(e,n){return _(S(e,e),C(e))}const p={MATCHES_AUTO:1e3*30,MATCHES_STALE_AUTO:1e3*20,MATCHES_STALE_DEFAULT:1e3*60*5},x={SOON_MINUTES:15},v=async({queryKey:e})=>{const[n,{dateFilter:a,dateRange:c,limit:u}]=e,s=k(L,"schedules");let r;try{if(a){let o=a;if(a instanceof Date)if(E(a))o=A(a,"yyyy-MM-dd");else return[];r=f(s,l("startDate","==",o),d("startTime","asc"))}else c?.start&&c?.end?r=f(s,l("startDate",">=",c.start),l("startDate","<=",c.end),d("startDate","asc"),d("startTime","asc")):r=f(s,d("startDate","desc"),d("startTime","asc"),w(u));return(await O(r)).docs.map(o=>{const t=o.data();return{id:o.id,...t,hasStartStat:!!t.hasStartStat,hasEndStat:!!t.hasEndStat,_searchString:`${t.teamA||""} ${t.teamB||""} ${t.match||""} ${t.title||""} ${t.league||""} ${t.channel||""}`.toLowerCase()}})}catch(i){throw console.error("Error fetching matches:",i),i}},z=(e,n,a=!1)=>{const[c,u]=y.useState(100),s=H({queryKey:["matches",{dateFilter:e,dateRange:n,limit:c}],queryFn:v,placeholderData:T,staleTime:a?p.MATCHES_STALE_AUTO:p.MATCHES_STALE_DEFAULT,refetchInterval:a?p.MATCHES_AUTO:!1,refetchOnWindowFocus:a}),r=y.useMemo(()=>s.data||[],[s.data]),i=y.useMemo(()=>{if(!r.length)return[];const t={};for(const m of r){const h=m.startDate;t[h]||(t[h]=[]),t[h].push(m)}return Object.entries(t).sort((m,h)=>new Date(m[0])-new Date(h[0]))},[r]),o=()=>{!e&&!n&&u(t=>t+50)};return{matches:r,groupedData:i,loading:s.isLoading,isFetching:s.isFetching,loadMore:o,hasMore:!0,refetch:s.refetch}};export{Q as F,x as M,b as R,j as i,z as u};
