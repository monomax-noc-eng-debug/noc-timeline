import{r as x,A as f,j as e,X as C,C as S}from"./index-DK6B-WCw.js";import{b as h,d as k,k as z}from"./firebaseConfig-BlIlsXYa.js";import{C as N}from"./clock-nIUUpKTM.js";import{C as R}from"./search-Bb0GrWoW.js";import{R as M}from"./radio-BWNKXV_r.js";import{H as E}from"./hash-Cm205t8I.js";import{R as P}from"./refresh-cw-B6gQuUtT.js";import{G as T}from"./gauge-Cb_zC8Y-.js";import{A}from"./arrow-right-DkPDAcYM.js";import{U as B}from"./users-Y6fxBui9.js";import{T as G}from"./tv-loOJGcyQ.js";const F=(s,n)=>{const[t,a]=x.useState({start:null,end:null,loading:!1}),[d,r]=x.useState(null),i=x.useCallback(async()=>{if(s){a(l=>({...l,loading:!0})),r(null);try{const l=h(k,"schedules",s,"statistics","start_stat"),b=h(k,"schedules",s,"statistics","end_stat"),[o,m]=await Promise.all([z(l),z(b)]);a({start:o.exists()?o.data():null,end:m.exists()?m.data():null,loading:!1})}catch(l){console.error("Error fetching match detail stats:",l),r(l.message),a(b=>({...b,loading:!1}))}}},[s]);return x.useEffect(()=>{n&&s&&i()},[n,s,i]),{...t,error:d,refetch:i}},L=s=>{const n=s.hasStartStat,t=s.hasEndStat;let a={text:"Scheduled",value:"scheduled",icon:N,colors:{bg:"bg-zinc-100 dark:bg-zinc-800",text:"text-zinc-500 dark:text-zinc-400",border:"border-zinc-200 dark:border-zinc-800",accent:"bg-zinc-400",gradient:"from-blue-500 to-indigo-600",softBg:"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400"},pulse:!1};return t?a={text:"Completed",value:"completed",icon:R,colors:{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-600 dark:text-emerald-400",border:"border-emerald-200 dark:border-emerald-800/50",accent:"bg-emerald-500",gradient:"from-emerald-500 to-teal-600",softBg:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"},pulse:!1}:n&&(a={text:"Live",value:"live",icon:M,colors:{bg:"bg-orange-50 dark:bg-orange-900/20",text:"text-orange-600 dark:text-orange-400",border:"border-orange-200 dark:border-orange-800/50",accent:"bg-orange-500",gradient:"from-orange-500 to-red-500",softBg:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400"},pulse:!0}),a},q=s=>s?new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"-",j=x.memo(({score:s,label:n,colorClass:t})=>{const d=2*Math.PI*22,r=d-s/100*d;return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"relative flex items-center justify-center w-14 h-14",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"28",cy:"28",r:22,fill:"none",stroke:"currentColor",strokeWidth:"4",className:"text-zinc-100 dark:text-zinc-800"}),e.jsx("circle",{cx:"28",cy:"28",r:22,fill:"none",stroke:"currentColor",strokeWidth:"4",strokeDasharray:d,strokeDashoffset:r,strokeLinecap:"round",className:`${t} transition-all duration-700 ease-out`})]}),e.jsx("span",{className:`absolute text-[10px] font-black ${t}`,children:s})]}),e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:n})]})}),v=()=>e.jsx("div",{className:"h-32 bg-zinc-100 dark:bg-zinc-900 rounded-2xl animate-pulse"});function Z({isOpen:s,onClose:n,matchData:t}){const[a,d]=x.useState(!1),{start:r,end:i,loading:l,refetch:b}=F(t?.id,s),o=x.useMemo(()=>t?L(t):{text:"-",colors:{},icon:f},[t]),m=c=>{if(c==null)return"-";const p=c?.val!==void 0?c.val:c,u=parseFloat(p);return isNaN(u)?p:u.toLocaleString()},g=c=>parseFloat(c?.bwPeakGbps?.val||0)>0?parseFloat(c?.bwPeakGbps?.val)>5?94:78:0,w=()=>{t?.id&&navigator.clipboard.writeText(t.id)},y=async()=>{d(!0),b&&await b(),setTimeout(()=>d(!1),800)};return!s||!t?null:e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm transition-opacity duration-200",onClick:n,children:e.jsxs("div",{className:`\r
          relative w-full max-w-4xl \r
          bg-[#fafafa] dark:bg-[#050505] \r
          rounded-[2rem] shadow-2xl border border-zinc-200 dark:border-zinc-800 \r
          flex flex-col overflow-hidden \r
          animate-in zoom-in-95 duration-200\r
        `,onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:"px-6 pt-5 pb-4 bg-white dark:bg-[#0a0a0a] border-b border-zinc-100 dark:border-zinc-800",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:`px-2.5 py-1 rounded-md text-[10px] font-black uppercase tracking-wider flex items-center gap-1.5 ${o.colors.softBg||"bg-zinc-100 text-zinc-500"}`,children:[e.jsx(o.icon,{size:10,className:o.pulse?"animate-pulse":""}),o.text]}),e.jsx("div",{className:"h-4 w-px bg-zinc-200 dark:bg-zinc-800"}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-wide",children:t.league||"Unknown League"})]}),e.jsx("h1",{className:"text-2xl md:text-3xl font-black text-zinc-900 dark:text-white tracking-tight leading-none",children:t.teamA&&t.teamB?e.jsxs("span",{className:"flex flex-wrap items-center gap-x-2",children:[t.teamA," ",e.jsx("span",{className:"text-zinc-300 dark:text-zinc-700 text-lg",children:"vs"})," ",t.teamB]}):t.title||"Untitled Match"})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("button",{onClick:w,className:"hidden sm:flex group items-center gap-2 px-3 py-2 bg-zinc-100 dark:bg-zinc-900 rounded-xl hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-600 transition-all cursor-pointer border border-transparent hover:border-blue-200 dark:hover:border-blue-800",title:"Copy Match ID",children:[e.jsx(E,{size:12,className:"text-zinc-400 group-hover:text-blue-500"}),e.jsxs("span",{className:"text-[10px] font-mono font-bold text-zinc-500 group-hover:text-blue-600",children:[t.id.slice(0,8),"..."]})]}),e.jsx("button",{onClick:y,disabled:l||a,className:"p-2 bg-zinc-100 dark:bg-zinc-900 rounded-xl text-zinc-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all active:scale-95 disabled:opacity-50",title:"Refresh Stats",children:e.jsx(P,{size:18,className:a||l?"animate-spin":""})}),e.jsx("button",{onClick:n,className:"p-2 bg-zinc-100 dark:bg-zinc-900 rounded-xl text-zinc-400 hover:text-black dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors",children:e.jsx(C,{size:18})})]})]})}),e.jsxs("div",{className:"p-6 space-y-8 bg-[#fafafa] dark:bg-[#050505] overflow-y-auto custom-scrollbar max-h-[70vh]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-zinc-500 flex items-center gap-2",children:[e.jsx(f,{size:14})," Performance Analysis"]}),e.jsxs("div",{className:"text-[10px] font-bold text-zinc-400 bg-zinc-100 dark:bg-zinc-900 px-2 py-1 rounded-md flex items-center gap-1",children:[e.jsx(S,{size:10})," ",q(t.startDate)]})]}),l||a?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{}),e.jsx(v,{})]}):r||i?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900/40 rounded-2xl border border-zinc-200 dark:border-zinc-800 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500",children:e.jsx(T,{size:14})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-zinc-400",children:"Engagement Score"})]}),e.jsxs("div",{className:"flex items-center justify-around py-2",children:[e.jsx(j,{score:r?g(r):0,label:"Start",colorClass:"text-zinc-400"}),e.jsx(A,{size:16,className:"text-zinc-300"}),e.jsx(j,{score:i?g(i):r?g(r):0,label:"End (Final)",colorClass:"text-emerald-500"})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-zinc-50 dark:border-zinc-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-zinc-400 font-medium",children:["Health Consistency: ",e.jsx("span",{className:"text-emerald-500 font-bold",children:"Stable"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900/40 rounded-2xl border border-zinc-200 dark:border-zinc-800 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-violet-50 dark:bg-violet-900/30 text-violet-500",children:e.jsx(B,{size:14})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-zinc-400",children:"Total Viewers"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 p-3 bg-zinc-50 dark:bg-zinc-900/50 rounded-xl",children:[e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase block mb-1",children:"Start"}),e.jsx("div",{className:"text-base font-black text-zinc-600 dark:text-zinc-400",children:m(r?.reqTotal)})]}),e.jsxs("div",{className:"flex-1 p-3 bg-violet-50 dark:bg-violet-900/20 rounded-xl border border-violet-100 dark:border-violet-900/30",children:[e.jsx("span",{className:"text-[9px] font-bold text-violet-400 uppercase block mb-1",children:"End"}),e.jsx("div",{className:"text-xl font-black text-zinc-900 dark:text-white",children:m(i?.reqTotal||r?.reqTotal)})]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center text-[10px] text-zinc-400 px-1",children:[e.jsxs("span",{children:["Peak CCU: ",e.jsx("strong",{className:"text-zinc-600 dark:text-zinc-300",children:m(i?.requestPeak||r?.requestPeak)})]}),i&&r&&e.jsxs("span",{children:["Growth: ",e.jsx("strong",{className:"text-emerald-500",children:"+12%"})]})]})]})]}):e.jsx("div",{className:"h-32 flex items-center justify-center border border-dashed border-zinc-300 dark:border-zinc-700 rounded-2xl bg-zinc-50 dark:bg-zinc-900/20",children:e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 flex items-center gap-2",children:"No telemetry data available"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-800 rounded-lg text-zinc-400",children:e.jsx(G,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-black uppercase text-zinc-400",children:"Channel Feed"}),e.jsx("div",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:t.channel||"Main Feed"})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-800 rounded-lg text-zinc-400",children:e.jsx(N,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-black uppercase text-zinc-400",children:"Start Time"}),e.jsxs("div",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:[t.startTime||"--:--"," ",e.jsx("span",{className:"text-[10px] text-zinc-400 font-normal",children:"Local"})]})]})]})]})]}),e.jsx("div",{className:"p-4 bg-white dark:bg-[#0a0a0a] border-t border-zinc-100 dark:border-zinc-800 flex justify-end",children:e.jsx("button",{onClick:n,className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-[10px] font-black uppercase tracking-widest hover:opacity-90 transition-opacity w-full sm:w-auto",children:"Close Viewer"})})]})})}export{Z as default};
