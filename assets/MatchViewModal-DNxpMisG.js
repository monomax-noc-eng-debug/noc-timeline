import{r as x,j as e,X as k,A as z,C as j}from"./index-NnLxa0C5.js";import{b as m,d as g,m as p}from"./firebaseConfig-B-I4EWGW.js";import{C as h}from"./trash-2-CSAiA0vi.js";import{C as v}from"./search-CBJj41SK.js";import{R as N,b as w}from"./MatchCard-C7HMSZcq.js";import{H as y}from"./hash-Bhx3bf6c.js";import{G as C}from"./gauge-BFzL0GxF.js";import{A as S}from"./arrow-right-Dv9Hf0E0.js";import{U as E}from"./users-DwtRTdTx.js";import"./useQuery-CQxDf1ra.js";import"./useBaseQuery-BoSGXyev.js";import"./format-B2edJEpO.js";const P=(t,i)=>{const[r,s]=x.useState({start:null,end:null,loading:!1}),[n,o]=x.useState(null),c=x.useCallback(async()=>{if(t){s(l=>({...l,loading:!0})),o(null);try{const l=m(g,"schedules",t,"statistics","start_stat"),d=m(g,"schedules",t,"statistics","end_stat"),[b,a]=await Promise.all([p(l),p(d)]);s({start:b.exists()?b.data():null,end:a.exists()?a.data():null,loading:!1})}catch(l){console.error("Error fetching match detail stats:",l),o(l.message),s(d=>({...d,loading:!1}))}}},[t]);return x.useEffect(()=>{i&&t&&c()},[i,t,c]),{...r,error:n,refetch:c}},M=t=>{const i=t.hasStartStat,r=t.hasEndStat;let s={text:"Scheduled",value:"scheduled",icon:h,colors:{bg:"bg-zinc-100 dark:bg-zinc-800",text:"text-zinc-500 dark:text-zinc-400",border:"border-zinc-200 dark:border-zinc-800",accent:"bg-zinc-400",gradient:"from-blue-500 to-indigo-600",softBg:"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400"},pulse:!1};return r?s={text:"Completed",value:"completed",icon:v,colors:{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-600 dark:text-emerald-400",border:"border-emerald-200 dark:border-emerald-800/50",accent:"bg-emerald-500",gradient:"from-emerald-500 to-teal-600",softBg:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"},pulse:!1}:i&&(s={text:"Live",value:"live",icon:N,colors:{bg:"bg-orange-50 dark:bg-orange-900/20",text:"text-orange-600 dark:text-orange-400",border:"border-orange-200 dark:border-orange-800/50",accent:"bg-orange-500",gradient:"from-orange-500 to-red-500",softBg:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400"},pulse:!0}),s},T=t=>t?new Date(t).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"-",u=x.memo(({score:t,label:i,colorClass:r})=>{const n=2*Math.PI*22,o=n-t/100*n;return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"relative flex items-center justify-center w-14 h-14",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"28",cy:"28",r:22,fill:"none",stroke:"currentColor",strokeWidth:"4",className:"text-zinc-100 dark:text-zinc-800"}),e.jsx("circle",{cx:"28",cy:"28",r:22,fill:"none",stroke:"currentColor",strokeWidth:"4",strokeDasharray:n,strokeDashoffset:o,strokeLinecap:"round",className:`${r} transition-all duration-700 ease-out`})]}),e.jsx("span",{className:`absolute text-[10px] font-black ${r}`,children:t})]}),e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:i})]})}),f=()=>e.jsx("div",{className:"h-32 bg-zinc-100 dark:bg-zinc-900 rounded-2xl animate-pulse"});function _({isOpen:t,onClose:i,matchData:r}){const{start:s,end:n,loading:o}=P(r?.id,t),c=x.useMemo(()=>r?M(r):null,[r]),l=a=>a?.val?parseFloat(a.val).toLocaleString():typeof a=="number"?a.toLocaleString():a||"-",d=a=>parseFloat(a?.bwPeakGbps?.val||0)>0?parseFloat(a?.bwPeakGbps?.val)>5?94:78:0,b=()=>{r?.id&&navigator.clipboard.writeText(r.id)};return!t||!r?null:e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm transition-opacity duration-200",onClick:i,children:e.jsxs("div",{className:`\r
          relative w-full max-w-4xl \r
          bg-[#fafafa] dark:bg-[#050505] \r
          rounded-[2rem] shadow-2xl border border-zinc-200 dark:border-zinc-800 \r
          flex flex-col overflow-hidden \r
          animate-in zoom-in-95 duration-200\r
        `,onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"px-6 pt-5 pb-4 bg-white dark:bg-[#0a0a0a] border-b border-zinc-100 dark:border-zinc-800",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:`px-2.5 py-1 rounded-md text-[10px] font-black uppercase tracking-wider flex items-center gap-1.5 ${c.colors.softBg}`,children:[e.jsx(c.icon,{size:10,className:c.pulse?"animate-pulse":""}),c.text]}),e.jsx("div",{className:"h-4 w-px bg-zinc-200 dark:bg-zinc-800"}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-wide",children:r.league})]}),e.jsx("h1",{className:"text-2xl md:text-3xl font-black text-zinc-900 dark:text-white tracking-tight leading-none",children:r.teamA&&r.teamB?e.jsxs("span",{className:"flex flex-wrap items-center gap-x-2",children:[r.teamA," ",e.jsx("span",{className:"text-zinc-300 dark:text-zinc-700 text-lg",children:"vs"})," ",r.teamB]}):r.title})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("button",{onClick:b,className:"group flex items-center gap-2 px-3 py-2 bg-zinc-100 dark:bg-zinc-900 rounded-xl hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-600 transition-all cursor-pointer border border-transparent hover:border-blue-200 dark:hover:border-blue-800",children:[e.jsx(y,{size:12,className:"text-zinc-400 group-hover:text-blue-500"}),e.jsxs("span",{className:"text-[10px] font-mono font-bold text-zinc-500 group-hover:text-blue-600",children:[r.id.slice(0,8),"..."]})]}),e.jsx("button",{onClick:i,className:"p-2 bg-zinc-100 dark:bg-zinc-900 rounded-xl text-zinc-400 hover:text-black dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors",children:e.jsx(k,{size:18})})]})]})}),e.jsxs("div",{className:"p-6 space-y-8 bg-[#fafafa] dark:bg-[#050505] overflow-y-auto custom-scrollbar max-h-[70vh]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-zinc-500 flex items-center gap-2",children:[e.jsx(z,{size:14})," Performance Analysis"]}),e.jsxs("div",{className:"text-[10px] font-bold text-zinc-400 bg-zinc-100 dark:bg-zinc-900 px-2 py-1 rounded-md flex items-center gap-1",children:[e.jsx(j,{size:10})," ",T(r.startDate)]})]}),o?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(f,{}),e.jsx(f,{})]}):s||n?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900/40 rounded-2xl border border-zinc-200 dark:border-zinc-800 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500",children:e.jsx(C,{size:14})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-zinc-400",children:"Engagement Score"})]}),e.jsxs("div",{className:"flex items-center justify-around py-2",children:[e.jsx(u,{score:s?d(s):0,label:"Start",colorClass:"text-zinc-400"}),e.jsx(S,{size:16,className:"text-zinc-300"}),e.jsx(u,{score:n?d(n):s?d(s):0,label:"End (Final)",colorClass:"text-emerald-500"})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-zinc-50 dark:border-zinc-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-zinc-400 font-medium",children:["Health Consistency: ",e.jsx("span",{className:"text-emerald-500 font-bold",children:"Stable"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900/40 rounded-2xl border border-zinc-200 dark:border-zinc-800 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-violet-50 dark:bg-violet-900/30 text-violet-500",children:e.jsx(E,{size:14})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-zinc-400",children:"Total Viewers"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 p-3 bg-zinc-50 dark:bg-zinc-900/50 rounded-xl",children:[e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase block mb-1",children:"Start"}),e.jsx("div",{className:"text-base font-black text-zinc-600 dark:text-zinc-400",children:l(s?.reqTotal)})]}),e.jsxs("div",{className:"flex-1 p-3 bg-violet-50 dark:bg-violet-900/20 rounded-xl border border-violet-100 dark:border-violet-900/30",children:[e.jsx("span",{className:"text-[9px] font-bold text-violet-400 uppercase block mb-1",children:"End"}),e.jsx("div",{className:"text-xl font-black text-zinc-900 dark:text-white",children:l(n?.reqTotal||s?.reqTotal)})]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center text-[10px] text-zinc-400 px-1",children:[e.jsxs("span",{children:["Peak CCU: ",e.jsx("strong",{className:"text-zinc-600 dark:text-zinc-300",children:n?.requestPeak||s?.requestPeak||"-"})]}),e.jsxs("span",{children:["Growth: ",e.jsxs("strong",{className:"text-emerald-500",children:["+",n&&s?"12%":"-"]})]})]})]})]}):e.jsx("div",{className:"h-32 flex items-center justify-center border border-dashed border-zinc-300 dark:border-zinc-700 rounded-2xl bg-zinc-50 dark:bg-zinc-900/20",children:e.jsx("span",{className:"text-[10px] font-bold text-zinc-400 flex items-center gap-2",children:"No telemetry data"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-800 rounded-lg text-zinc-400",children:e.jsx(w,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-black uppercase text-zinc-400",children:"Channel Feed"}),e.jsx("div",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:r.channel||"Main Feed"})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-800 rounded-lg text-zinc-400",children:e.jsx(h,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-black uppercase text-zinc-400",children:"Start Time"}),e.jsxs("div",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100",children:[r.startTime," ",e.jsx("span",{className:"text-[10px] text-zinc-400 font-normal",children:"Local"})]})]})]})]})]}),e.jsx("div",{className:"p-4 bg-white dark:bg-[#0a0a0a] border-t border-zinc-100 dark:border-zinc-800 flex justify-end",children:e.jsx("button",{onClick:i,className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-[10px] font-black uppercase tracking-widest hover:opacity-90 transition-opacity w-full sm:w-auto",children:"Close Viewer"})})]})})}export{_ as default};
