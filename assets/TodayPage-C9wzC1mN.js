import{c as se,r as o,l as Ht,e as Le,j as e,X as Ie,a as Ut,R as Pt,d as Kt,F as Yt,L as wt,f as H,m as jn,n as fe,o as lt,p as Qt,P as kt,q as V,s as Y,t as Xt,v as te,D as Zt,w as Nn,x as Sn,y as ue,b as Jt,V as zn,z as Cn,B as Rt,C as En,E as Tn}from"./index-Cu1hj24i.js";import{u as Mn,T as Pn,E as Rn,M as In}from"./MatchCard-rrkzUfeu.js";import{g as er,b as de,d as ae,u as ct,h as Dn,c as Ke,q as It,o as Ye,w as An,a as _n,i as Dt,n as Qe,s as On}from"./firebaseConfig--jbwBVp3.js";import{c as tr,t as At,m as Ln}from"./protectedTokens-BgWIJsKD.js";import{a as rr}from"./addDays-CsCA8S13.js";import{f as ge}from"./format-Xuj1Wk4j.js";import{p as _t}from"./parse-B5HBKvJx.js";import{a as Bn}from"./addHours-vmlBnVHO.js";import{G as $n}from"./gauge-DUaF9XM_.js";import{C as Be}from"./clock-C3VHd1-G.js";import{A as Fn}from"./arrow-right-b-83yzMy.js";import{b as ie,C as qn,a as Vn}from"./chevron-right-Dsr-MPTf.js";import{G as nr}from"./globe-D8xrZsem.js";import{S as Gn,a as ar,C as Wn}from"./settings-bRGG89hn.js";import{T as yt}from"./trash-2-BELcC8hK.js";import{P as jt}from"./plus-Bqwbh0YV.js";import{U as sr}from"./users-BZQh7dCa.js";import{c as or}from"./configService-Cf9dW1Z_.js";import{L as ir,I as Xe,a as lr}from"./input-DAHaWLSl.js";import{S as cr}from"./save-eic3Sy5Q.js";import{c as Hn,S as Un,B as Te}from"./button-VDX9aikN.js";import{i as Kn,u as re,h as dr,R as ur,c as pr,F as xr,d as mr,e as Yn,A as Qn,f as Xn,g as Zn,P as dt,a as ut,p as Ot,b as pt,C as hr}from"./popover-wuNBjIal.js";import{C as fr}from"./pencil-pPlvHbo3.js";import{S as gr,C as Jn}from"./search-CzE8fqzl.js";import{Z as br}from"./zap-DqWJJD1m.js";import{T as ea}from"./tv-DNDG0Kyq.js";import{C as ta}from"./cloud-download-Ps8WC4wc.js";import{E as ra}from"./eye-phFCFKil.js";import{R as na}from"./radio-DkiJWXVs.js";import{F as aa}from"./addYears-DqfvcqbY.js";import"./useBaseQuery-BnRH9K7T.js";const sa=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],oa=se("arrow-left-right",sa);const ia=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],la=se("bell-off",ia);const ca=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],da=se("bell",ca);const ua=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],pa=se("calendar-check",ua);const xa=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],ma=se("chevrons-up-down",xa);const ha=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],fa=se("external-link",ha);const ga=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],vr=se("file-spreadsheet",ga);const ba=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],va=se("monitor-play",ba);const wa=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],wr=se("server",wa);const ka=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],ya=se("wand-sparkles",ka);const ja=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],kr=se("wifi",ja);function Na(t){return tr(t,Date.now())}function Sa(t){return n=>{const a=(t?Math[t]:Math.trunc)(n);return a===0?0:a}}function za(t,n){return+At(t)-+At(n)}function Lt(t,n,r){const a=za(t,n)/Ln;return Sa(r?.roundingMethod)(a)}function Bt(t,n){return Kn(tr(t,t),Na(t))}function Ca(t,n,r){return rr(t,-1,r)}const Ze={subscribeMatches:(t,n)=>{let r=It(Ke(ae,"schedules"),Ye("startDate","desc"),Ye("startTime","asc"));return t&&(r=It(Ke(ae,"schedules"),An("startDate","==",t),Ye("startTime","asc"))),_n(r,a=>{const s=a.docs.map(l=>({id:l.id,...l.data()}));n(s)})},createMatch:async t=>{try{const n={...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),hasStartStat:!1,hasEndStat:!1};return await Dn(Ke(ae,"schedules"),n)}catch(n){throw console.error("Error creating match:",n),n}},updateMatch:async(t,n)=>{try{const r=de(ae,"schedules",t);await ct(r,{...n,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error updating match:",r),r}},deleteMatch:async t=>{try{await er(de(ae,"schedules",t))}catch(n){throw console.error("Error deleting match:",n),n}}},Ea=(t=new Date)=>{const[n,r]=o.useState(t),a=ge(n,"yyyy-MM-dd"),{matches:s,loading:l}=Mn(n),d=Ht(),{toast:i}=Le(),[c,u]=o.useState(null),[m,f]=o.useState(!1),[k,E]=o.useState(null),[y,w]=o.useState(!1),[j,h]=o.useState({isOpen:!1,id:null}),[g,T]=o.useState(""),[D,I]=o.useState("ALL"),[O,x]=o.useState(!1),[v,A]=o.useState(new Date),[B,P]=o.useState(!1),q=o.useRef(new Set);o.useEffect(()=>{"Notification"in window&&Notification.permission==="granted"&&P(!0);const N=setInterval(()=>A(new Date),6e4);return()=>clearInterval(N)},[]);const W=async()=>{if(!("Notification"in window))return;await Notification.requestPermission()==="granted"&&P(!0)};o.useEffect(()=>{!B||s.length===0||s.forEach(N=>{if(!N.startTime||N.hasStartStat||q.current.has(N.id))return;const p=_t(N.startTime,"HH:mm",n),C=Lt(p,v);C<=15&&C>=0&&(new Notification("Match Alert",{body:`${N.teamA} vs ${N.teamB} starts in ${C} mins!`}),q.current.add(N.id))})},[s,B,v,n]);const U=()=>r(N=>Ca(N)),Q=()=>r(N=>rr(N,1)),_=()=>r(new Date),X=async N=>{w(!0);try{k?(await Ze.updateMatch(k.id,N),i({title:"Updated",description:"Match updated successfully"})):(await Ze.createMatch(N),i({title:"Created",description:"Match created successfully"})),d.invalidateQueries({queryKey:["matches"]}),f(!1),E(null)}catch(p){i({variant:"destructive",title:"Error",description:p.message})}finally{w(!1)}},J=async()=>{try{j.id&&(await Ze.deleteMatch(j.id),d.invalidateQueries({queryKey:["matches"]}),i({title:"Deleted",description:"Match removed"}))}catch(N){i({variant:"destructive",title:"Error",description:N.message})}finally{h({isOpen:!1,id:null})}},G=o.useMemo(()=>s.map(N=>{let p="Upcoming",C=null,S=!1;if(N.startTime){const z=_t(N.startTime,"HH:mm",n),M=Bn(z,2),b=Lt(z,v);N.hasEndStat?p="Finished":N.hasStartStat?(p="Live",S=!0):v>=z&&v<=M?(p="Live (Time)",S=!0):v>M?p="Finished (Time)":b<=60?C=`${b}m`:C=ge(z,"HH:mm")}return{...N,statusDisplay:p,countdown:C,isLiveTime:S}}),[s,v,n]),le=o.useMemo(()=>({total:G.length,live:G.filter(N=>N.isLiveTime).length,finished:G.filter(N=>N.statusDisplay.includes("Finished")).length,pending:G.filter(N=>N.statusDisplay==="Upcoming").length}),[G]);return{selectedDate:n,setSelectedDate:r,dateStr:a,matches:G,loading:l,stats:le,searchQuery:g,setSearchQuery:T,filterType:D,setFilterType:I,selectedMatch:c,setSelectedMatch:u,isManualModalOpen:m,setIsManualModalOpen:f,editingMatch:k,setEditingMatch:E,saving:y,deleteConfirm:j,setDeleteConfirm:h,isDataPreviewOpen:O,setIsDataPreviewOpen:x,notificationEnabled:B,handlePrevDay:U,handleNextDay:Q,handleGoToday:_,handleSaveMatch:X,handleDeleteMatch:J,requestNotifyPermission:W}};function Ta({form:t,setForm:n,isMultiCdnMode:r,toggleCdnMode:a,cdnList:s,onAdd:l,onRemove:d,onUpdate:i,onAutoFix:c,statType:u,masterConfigs:m={channels:[],cdnOptions:[]}}){const[f,k]=o.useState(!1),E=y=>t.cdn===y;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400",children:[e.jsx($n,{size:14,className:"text-orange-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Configuration"})]})}),e.jsxs("div",{className:"group bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-sm overflow-hidden flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-zinc-100 dark:divide-zinc-800",children:[e.jsxs("div",{className:"flex-1 p-2 flex items-center gap-3 relative",children:[e.jsx(Be,{size:14,className:"text-zinc-400 shrink-0"}),e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none mb-0.5",children:"Start"}),e.jsx("input",{type:"time",value:t.rangeStart,onChange:y=>n({...t,rangeStart:y.target.value}),className:"bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none focus:ring-0 w-[60px] h-4 leading-none"})]}),e.jsx(Fn,{size:12,className:"text-zinc-300 dark:text-zinc-700"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none mb-0.5",children:["End ",u==="START"?"(+15m)":"(+2h)"]}),e.jsx("input",{type:"time",value:t.rangeEnd,onChange:y=>n({...t,rangeEnd:y.target.value}),className:"bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none focus:ring-0 w-[60px] h-4 leading-none"})]})]}),c&&e.jsx("button",{onClick:c,title:"Auto Calculate Time",className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-md text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors",children:e.jsx(ya,{size:12})})]}),e.jsxs("div",{className:"flex-[1.5] p-2 flex items-center gap-3 relative",children:[e.jsx(va,{size:14,className:"text-zinc-400 shrink-0"}),e.jsxs("div",{className:"w-full relative",children:[e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none block mb-0.5",children:"Channel Source"}),e.jsx("input",{type:"text",value:t.liveChannel,onChange:y=>n({...t,liveChannel:y.target.value}),onFocus:()=>k(!0),onBlur:()=>setTimeout(()=>k(!1),200),placeholder:"Select Channel...",className:"w-full bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none focus:ring-0 h-4 leading-none placeholder:text-zinc-300 dark:placeholder:text-zinc-700"}),f&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-3 max-h-40 overflow-y-auto bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-xl z-50 py-1",children:m.channels.length>0?m.channels.filter(y=>y.toLowerCase().includes((t.liveChannel||"").toLowerCase())).map(y=>e.jsxs("div",{onMouseDown:()=>n({...t,liveChannel:y}),className:"px-3 py-2 hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer text-xs font-medium text-zinc-700 dark:text-zinc-300 flex items-center justify-between group/item",children:[y,t.liveChannel===y&&e.jsx(ie,{size:12,className:"text-orange-500"})]},y)):e.jsx("div",{className:"px-3 py-2 text-xs text-zinc-400 italic",children:"No channels found"})})]})]})]}),e.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-xl p-2 border border-zinc-200/50 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wide pl-1",children:"CDN Distribution"}),e.jsxs("div",{className:"flex bg-zinc-200 dark:bg-zinc-800 rounded-lg p-0.5",children:[e.jsx("button",{onClick:()=>r&&a(),className:`px-3 py-1 rounded-md text-[10px] font-bold transition-all flex items-center gap-1.5 ${r?"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400":"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm"}`,children:"Single"}),e.jsx("button",{onClick:()=>!r&&a(),className:`px-3 py-1 rounded-md text-[10px] font-bold transition-all flex items-center gap-1.5 ${r?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400"}`,children:"Multi-CDN"})]})]}),r?e.jsxs("div",{className:"space-y-1.5",children:[s.map((y,w)=>e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 shadow-sm group",children:[e.jsx("div",{className:"w-[120px] shrink-0 border-r border-zinc-100 dark:border-zinc-700 pr-2",children:e.jsxs("select",{value:y.provider,onChange:j=>i(y.id,"provider",j.target.value),className:"w-full bg-transparent text-[11px] font-bold text-zinc-700 dark:text-zinc-200 outline-none cursor-pointer py-1",children:[e.jsx("option",{value:"Select Provider",children:"Select Provider"}),m.cdnOptions.filter(j=>j.id!=="Multi CDN").map(j=>e.jsx("option",{value:j.id,children:j.label},j.id))]})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Gn,{size:10,className:"absolute left-0 top-1/2 -translate-y-1/2 text-zinc-300 pointer-events-none"}),e.jsx("input",{type:"text",placeholder:"Enter Config Key...",value:y.key||"",onChange:j=>i(y.id,"key",j.target.value),className:"w-full pl-4 bg-transparent text-[11px] font-medium text-zinc-600 dark:text-zinc-300 placeholder:text-zinc-300 outline-none border-none p-0 focus:ring-0"})]}),s.length>1&&e.jsx("button",{onClick:()=>d(y.id),className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-300 hover:text-red-500 transition-all",children:e.jsx(yt,{size:12})})]},y.id)),e.jsxs("button",{onClick:l,className:"w-full py-1.5 mt-2 rounded-lg border border-dashed border-zinc-300 dark:border-zinc-700 hover:border-orange-300 dark:hover:border-orange-900/50 text-[10px] font-bold text-zinc-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/10 transition-all flex items-center justify-center gap-1",children:[e.jsx(jt,{size:10})," Add Provider Layer"]})]}):e.jsx("div",{className:"flex flex-wrap gap-2",children:m.cdnOptions.filter(y=>y.id!=="Multi CDN").map(y=>e.jsxs("button",{onClick:()=>n({...t,cdn:y.id}),className:`
                    group relative px-3 py-1.5 rounded-lg border text-[11px] font-bold transition-all flex items-center gap-2
                    ${E(y.id)?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 border-zinc-900 dark:border-zinc-100 shadow-md transform scale-[1.02]":"bg-white dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700 hover:border-zinc-300 dark:hover:border-zinc-600 hover:bg-white"}
                  `,children:[e.jsx(nr,{size:12,className:E(y.id)?"opacity-100":"opacity-50 group-hover:opacity-100"}),y.label,E(y.id)&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-orange-500 rounded-full border-2 border-white dark:border-zinc-900"})]},y.id))})]})]})}function Ma({isOpen:t,onClose:n,data:r,headers:a}){const[s,l]=o.useState(!1),{toast:d}=Le();if(!t)return null;const i=()=>{let u="";Array.isArray(r)&&Array.isArray(r[0])?u=r.map(m=>m.join("	")).join(`
`):u=r.join("	"),navigator.clipboard.writeText(u).then(()=>{l(!0),d({title:"Copied!",description:"Data successfully copied to clipboard.",variant:"success"}),setTimeout(()=>{l(!1)},3e3)})},c=Array.isArray(r)&&Array.isArray(r[0]);return e.jsx("div",{className:"fixed inset-0 z-[210] flex items-center justify-center p-4 md:p-8 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-[#0a0a0a] w-full max-w-5xl rounded-[2.5rem] shadow-[0_0_100px_rgba(0,0,0,0.6)] border border-zinc-200 dark:border-zinc-800 overflow-hidden flex flex-col max-h-[85vh] animate-in zoom-in-95 duration-500",children:[e.jsxs("div",{className:"shrink-0 px-6 py-5 md:px-8 bg-zinc-50/50 dark:bg-white/[0.01] border-b border-zinc-100 dark:border-zinc-900 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx("button",{onClick:n,className:"p-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:e.jsx(Ie,{size:16,className:"text-zinc-500"})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl text-white shadow-lg shadow-emerald-500/20",children:e.jsx(vr,{size:20,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-1",children:e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-500 text-[8px] font-black uppercase tracking-widest border border-emerald-500/20",children:"Data Capture"})}),e.jsxs("h3",{className:"text-lg font-black uppercase tracking-tighter text-zinc-900 dark:text-white leading-none",children:["Data ",e.jsx("span",{className:"text-emerald-500",children:"Preview"})]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-4 bg-zinc-50/30 dark:bg-black/20",children:e.jsx("div",{className:"h-full border border-zinc-100 dark:border-zinc-900 rounded-2xl overflow-hidden bg-white dark:bg-[#0c0c0c] shadow-inner flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{className:"sticky top-0 z-20",children:e.jsx("tr",{className:"bg-zinc-50/90 dark:bg-zinc-900/90 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-800",children:a.map((u,m)=>e.jsx("th",{className:"px-3 py-3 text-left text-[8px] font-black uppercase tracking-widest text-zinc-400 whitespace-nowrap first:pl-6 last:pr-6",children:u},m))})}),e.jsx("tbody",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:c?r.map((u,m)=>e.jsx("tr",{className:"group hover:bg-zinc-50/50 dark:hover:bg-white/[0.02] transition-colors",children:u.map((f,k)=>e.jsx("td",{className:"px-3 py-2 text-[10px] font-bold font-mono text-zinc-500 whitespace-nowrap group-hover:text-zinc-900 dark:group-hover:text-white transition-colors first:pl-6 last:pr-6",children:f},k))},m)):e.jsx("tr",{className:"group hover:bg-zinc-50/50 dark:hover:bg-white/[0.02] transition-colors",children:r.map((u,m)=>e.jsx("td",{className:"px-3 py-2 text-[10px] font-bold font-mono text-zinc-500 whitespace-nowrap group-hover:text-zinc-900 dark:group-hover:text-white transition-colors first:pl-6 last:pr-6",children:u},m))})})]})})})}),e.jsxs("div",{className:"shrink-0 p-4 md:px-8 bg-white dark:bg-[#0a0a0a] border-t border-zinc-100 dark:border-zinc-900 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[9px] font-bold text-zinc-400 uppercase",children:[e.jsx(fa,{size:12})," Spreadsheet Ready"]}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:n,className:"flex-1 sm:flex-none px-6 py-2.5 text-[9px] font-black uppercase tracking-widest text-zinc-400 hover:text-black dark:hover:text-white transition-colors rounded-xl",children:"Discard"}),e.jsxs("button",{onClick:i,className:`flex-1 sm:flex-none flex items-center justify-center gap-2 px-8 py-2.5 rounded-xl text-[9px] font-black uppercase tracking-widest shadow-xl transition-all ${s?"bg-emerald-500 text-white shadow-emerald-500/40":"bg-black dark:bg-white text-white dark:text-black shadow-zinc-500/20"}`,children:[s?e.jsx(ie,{size:14,strokeWidth:3}):e.jsx(ar,{size:14}),s?"Captured":"Transfer"]})]})]})]})})}const Pe=(t,n)=>{if(!t||isNaN(t))return 0;const r=parseFloat(t);return n==="TB"?r*1024:n==="MB"?r/1024:r},je=t=>{if(!t)return 0;if(typeof t=="object"&&t.val!==void 0){const a=parseFloat(t.val);if(isNaN(a))return 0;const s=(t.unit||"").toLowerCase();return s==="m"?a*1e6:s==="k"?a*1e3:s==="b"?a*1e9:a}const n=t.toString().toLowerCase().trim(),r=parseFloat(n);return isNaN(r)?0:n.endsWith("m")?r*1e6:n.endsWith("k")?r*1e3:n.endsWith("b")?r*1e9:r},he=(t,n=0)=>t==null||t===""?"0":parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:n,maximumFractionDigits:n}),ze=(t,n=2)=>!t||isNaN(t)?"0 %":`${parseFloat(t).toFixed(n)} %`,ye="schedules",$t={ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:"",muxViewerUniq:"",muxScore:"",rangeStart:"",rangeEnd:"",reqPeakMin:"",reqTotal:{val:"",unit:"k"},bwPeakGbps:{val:"",unit:"GB"},bandwidth:{val:"",unit:"GB"},cdn:"AWS",liveChannel:""};function Pa(t,n){const[r,a]=o.useState("START"),[s,l]=o.useState(!0),[d,i]=o.useState(!1),[c,u]=o.useState(!1),[m,f]=o.useState(!1),[k,E]=o.useState($t),[y,w]=o.useState([]),[j,h]=o.useState(!1),[g,T]=o.useState("Unknown"),[D,I]=o.useState({isOpen:!1,title:"",message:"",onConfirm:null}),[O,x]=o.useState({show:!1,data:[]}),v=Ht(),{currentUser:A}=Ut(),{toast:B}=Le(),P=o.useCallback((N,p="success")=>{N&&B({description:N,variant:p})},[B]),q=o.useCallback(async()=>{if(t?.id){i(!0);try{const N=de(ae,ye,t.id),p=r==="START"?"start_stat":"end_stat",C=de(ae,ye,t.id,"statistics",p),[S,z]=await Promise.all([Dt(N),Dt(C)]),M=S.exists()?S.data():{};if(z.exists()){const b=z.data();E(R=>({...R,...b,liveChannel:b.liveChannel||M.liveChannel||M.channel||t.channel||"",reqTotal:b.reqTotal||{val:"",unit:"k"},bwPeakGbps:b.bwPeakGbps||{val:"",unit:"GB"},bandwidth:b.bandwidth||{val:"",unit:"GB"}})),b.cdnDetails?.length>0?(w(b.cdnDetails),h(!0)):(h(b.cdn==="Multi CDN"),w([])),T(b.reporter||"Unknown")}else{const b=M.cdn||"AWS",R=b==="Multi CDN";E({...$t,liveChannel:M.liveChannel||M.channel||t.channel||"",cdn:b}),h(R),w(R?[{id:Date.now(),provider:"Select Provider",key:"",reqPeakMin:"",reqTotal:{val:"",unit:"k"},bwPeakGbps:{val:"",unit:"GB"},bandwidth:{val:"",unit:"GB"},ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:"",muxViewerUniq:"",muxScore:""}]:[])}}catch(N){console.error("Fetch Error:",N),P("โหลดข้อมูลไม่สำเร็จ","error")}finally{i(!1),l(!1)}}},[t,r,P]);o.useEffect(()=>{q()},[q]),o.useEffect(()=>{!d&&!s&&!k.rangeStart&&!k.rangeEnd&&t&&X()},[d,s,k.rangeStart,k.rangeEnd,t,r]);const W=()=>{h(N=>!N),!j&&y.length===0&&w([{id:Date.now(),provider:"AWS",key:"",reqPeakMin:"",reqTotal:{val:"",unit:"k"},bwPeakGbps:{val:"",unit:"GB"},bandwidth:{val:"",unit:"GB"},ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:"",muxViewerUniq:"",muxScore:""}]),E(N=>({...N,cdn:j?"AWS":"Multi CDN"}))},U=()=>w(N=>[...N,{id:Date.now(),provider:"Select Provider",key:"",reqPeakMin:"",reqTotal:{val:"",unit:"k"},bwPeakGbps:{val:"",unit:"GB"},bandwidth:{val:"",unit:"GB"},ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:"",muxViewerUniq:"",muxScore:""}]),Q=N=>y.length>1&&w(p=>p.filter(C=>C.id!==N)),_=(N,p,C)=>w(S=>S.map(z=>z.id===N?{...z,[p]:C}:z)),X=(N=!1)=>{let p=t?.startTime||t?.start_time||t?.time;if(!p){N&&P("ไม่พบข้อมูลเวลาแข่ง","error");return}try{const S=(R=>{let L=String(R).toLowerCase().trim().replace(".",":"),$=L.replace(/[a-z]/g,"").trim(),[F,K]=$.split(":"),ee=parseInt(F,10),ce=parseInt(K||"0",10);return isNaN(ee)?null:(L.includes("pm")&&ee<12&&(ee+=12),{h:ee,m:ce})})(p);if(!S){N&&P("รูปแบบเวลาไม่ถูกต้อง","error");return}const z=(R,L,$)=>{let F=R*60+L+$;F=(F%1440+1440)%1440;let K=Math.floor(F/60),ee=F%60;return`${String(K).padStart(2,"0")}:${String(ee).padStart(2,"0")}`};let M,b;r==="START"?(M=z(S.h,S.m,0),b=z(S.h,S.m,15)):(M=z(S.h,S.m,0),b=z(S.h,S.m,120)),E(R=>({...R,rangeStart:M,rangeEnd:b}))}catch{N&&P("เกิดข้อผิดพลาดในการคำนวณ","error")}};return{state:{statType:r,loading:s,fetching:d,saving:c,isSuccess:m,form:k,cdnList:y,isMultiCdnMode:j,reporterName:g,confirmModal:D,preview:O},actions:{setStatType:a,setForm:E,toggleCdnMode:W,handleAddCdn:U,handleRemoveCdn:Q,handleUpdateCdnRow:_,handleAutoFixTime:()=>X(!0),handleSmartSave:async N=>{if(t?.id){u(!0);try{const p=r==="START"?"start_stat":"end_stat",C=de(ae,ye,t.id),S=de(ae,ye,t.id,"statistics",p),z=typeof A=="object"?A?.name:A,M={...k,cdn:j?"Multi CDN":k.cdn,cdnDetails:j?y:null,updatedAt:Qe(),statType:r,bwPeakGbps:k.bwPeakGbps||{val:"",unit:"GB"},bandwidth:k.bandwidth||{val:"",unit:"GB"},reqTotal:k.reqTotal||{val:"",unit:"k"},reporter:z||"Unknown"};await On(S,M),await ct(C,{[r==="START"?"hasStartStat":"hasEndStat"]:!0,[r==="START"?"startStats":"endStats"]:M,updatedAt:Qe()}),v.invalidateQueries({queryKey:["matches"]}),P("บันทึกข้อมูลเรียบร้อยแล้ว","success"),f(!0),setTimeout(()=>f(!1),2e3),N&&N()}catch{P("บันทึกข้อมูลล้มเหลว","error")}finally{u(!1)}}},requestDelete:()=>{I({isOpen:!0,title:`Reset ${r} Stats?`,message:`Are you sure you want to delete ${r} data?`,isDanger:!0,onConfirm:async()=>{I(N=>({...N,isOpen:!1})),u(!0);try{const N=r==="START"?"start_stat":"end_stat";await er(de(ae,ye,t.id,"statistics",N)),await ct(de(ae,ye,t.id),{[r==="START"?"hasStartStat":"hasEndStat"]:!1,[r==="START"?"startStats":"endStats"]:null,updatedAt:Qe()}),v.invalidateQueries({queryKey:["matches"]}),P("รีเซ็ตเรียบร้อย","success"),setTimeout(n,1e3)}catch{P("ลบข้อมูลไม่สำเร็จ","error")}finally{u(!1)}}})},handlePreview:()=>{const N=p=>{if(!p)return 0;if(typeof p=="object"&&p.val!==void 0){const C=parseFloat(p.val||0),S=(p.unit||"k").toLowerCase();return S==="m"?C*1e6:S==="b"?C*1e9:C*1e3}return je(p)};try{const p={no:"1",league:t?.league||"-",title:t?.title||t?.match||"-",time:t?.startTime||"-",ecsSport:ze(k.ecsSport,2),ecsEnt:ze(k.ecsEntitlement,2),api:ze(k.apiHuawei,2),reqPeak:he(je(k.requestPeak)),viewers:he(je(k.muxViewerUniq)),score:k.muxScore,start:k.rangeStart||"-",end:k.rangeEnd||"-"},C=j&&y.length>0?y.map(S=>[p.no,p.league,p.title,p.time,p.ecsSport,p.ecsEnt,p.api,p.reqPeak,S.provider||"-",S.key||"-",he(je(S.reqPeakMin)),he(N(S.reqTotal)),Pe(S.bwPeakGbps?.val||S.bwPeakGbps,S.bwPeakGbps?.unit||"GB")?.toLocaleString("en-US",{maximumFractionDigits:4}),Pe(S.bandwidth?.val||S.bandwidth,S.bandwidth?.unit||"GB")?.toLocaleString("en-US",{maximumFractionDigits:4}),p.viewers,p.score,p.start,p.end]):[[p.no,p.league,p.title,p.time,p.ecsSport,p.ecsEnt,p.api,p.reqPeak,k.cdn||"-",k.liveChannel||"-",he(je(k.reqPeakMin)),he(N(k.reqTotal)),Pe(k.bwPeakGbps?.val||k.bwPeakGbps,k.bwPeakGbps?.unit||"GB")?.toLocaleString("en-US",{maximumFractionDigits:4}),Pe(k.bandwidth?.val||k.bandwidth,k.bandwidth?.unit||"GB")?.toLocaleString("en-US",{maximumFractionDigits:4}),p.viewers,p.score,p.start,p.end]];x({show:!0,data:C})}catch{P("Preview Error","error")}},closeConfirm:()=>I(N=>({...N,isOpen:!1})),closePreview:()=>x(N=>({...N,show:!1}))}}}function Z({label:t,value:n,unit:r,onChange:a,onUnitChange:s,placeholder:l,icon:d,color:i="blue",type:c="number",tooltip:u,previousValue:m,compact:f=!1,max:k}){const E=g=>{if(k!==void 0&&g!==""){const T=parseFloat(g);if(!isNaN(T)&&T>k){a(k.toString());return}}a(g)},y={blue:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-100 dark:border-blue-800",text:"text-blue-600 dark:text-blue-400",accent:"bg-blue-500"},emerald:{bg:"bg-emerald-50 dark:bg-emerald-900/20",border:"border-emerald-100 dark:border-emerald-800",text:"text-emerald-600 dark:text-emerald-400",accent:"bg-emerald-500"},orange:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-100 dark:border-orange-800",text:"text-orange-600 dark:text-orange-400",accent:"bg-orange-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-100 dark:border-purple-800",text:"text-purple-600 dark:text-purple-400",accent:"bg-purple-500"},pink:{bg:"bg-pink-50 dark:bg-pink-900/20",border:"border-pink-100 dark:border-pink-800",text:"text-pink-600 dark:text-pink-400",accent:"bg-pink-500"},cyan:{bg:"bg-cyan-50 dark:bg-cyan-900/20",border:"border-cyan-100 dark:border-cyan-800",text:"text-cyan-600 dark:text-cyan-400",accent:"bg-cyan-500"}},w=y[i]||y.blue,h=(()=>{if(!n||isNaN(n))return null;const g=parseFloat(n);let T=g,D="";if(s&&r)switch(r){case"TB":T=g*1024,D="GB";break;case"MB":T=g/1024,D="GB";break;case"KB":T=g/(1024*1024),D="GB";break;case"GB":T=g,D="GB";break;case"k":T=g*1e3,D="";break;case"m":T=g*1e6,D="";break;default:T=g}else if(c==="abbrev")return null;const I=T.toLocaleString(void 0,{minimumFractionDigits:D==="GB"?2:0,maximumFractionDigits:D==="GB"?4:2});return D?`${I} ${D}`:I})();return e.jsxs("div",{className:`relative group rounded-xl border ${w.border} ${w.bg} ${f?"p-2":"p-4"} transition-all hover:shadow-md`,children:[e.jsx("div",{className:`absolute top-0 left-3 right-3 h-0.5 ${w.accent} rounded-b-full opacity-60`}),e.jsx("div",{className:`flex items-start justify-between ${f?"mb-1.5":"mb-3"} pt-1`,children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[d&&e.jsx("div",{className:`${f?"p-1.5":"p-2"} rounded-lg ${w.bg} ${w.text}`,children:e.jsx(d,{size:f?12:16})}),e.jsx("div",{children:e.jsx("label",{className:`${f?"text-[8px]":"text-[10px]"} font-black text-zinc-500 dark:text-zinc-400 uppercase tracking-widest block`,children:t})})]})}),e.jsxs("div",{className:`flex rounded-lg overflow-hidden border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-sm ${f?"h-8":""}`,children:[e.jsx("input",{type:c==="abbrev"?"text":"number",step:"any",value:n,onChange:g=>E(g.target.value),max:k,placeholder:l||(f?"0":"0.00"),className:`flex-1 px-3 bg-transparent outline-none dark:text-white placeholder-zinc-300 dark:placeholder-zinc-600 min-w-0 font-bold ${f?"text-xs":"text-lg"}`}),s?e.jsxs("select",{value:r,onChange:g=>s(g.target.value),className:`bg-zinc-50 dark:bg-zinc-800 border-l border-zinc-200 dark:border-zinc-700 px-1 text-[9px] font-black uppercase outline-none dark:text-zinc-400 cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors text-center ${f?"w-[50px]":"w-[70px]"}`,children:[e.jsxs("optgroup",{label:"Count",children:[e.jsx("option",{value:"k",children:"k"}),e.jsx("option",{value:"m",children:"m"})]}),e.jsxs("optgroup",{label:"Data",children:[e.jsx("option",{value:"GB",children:"GB"}),e.jsx("option",{value:"TB",children:"TB"}),e.jsx("option",{value:"MB",children:"MB"}),e.jsx("option",{value:"KB",children:"KB"})]})]}):c==="percentage"&&e.jsx("div",{className:"bg-zinc-50 dark:bg-zinc-800 border-l border-zinc-200 dark:border-zinc-700 px-3 flex items-center",children:e.jsx("span",{className:`${f?"text-[10px]":"text-sm"} font-black text-zinc-500`,children:"%"})})]}),h&&!f&&e.jsxs("div",{className:"mt-2 flex items-center justify-end gap-1 text-[9px]",children:[e.jsx("span",{className:"text-zinc-400",children:"→"}),e.jsx("span",{className:`font-black ${w.text}`,children:h})]})]})}const Nt=({item:t,index:n,icon:r,onRemove:a,isRemovable:s})=>e.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-zinc-100 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500",children:e.jsx(r,{size:12})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-zinc-900 dark:text-white uppercase tracking-wider",children:t.provider||`Provider ${n+1}`}),e.jsx("p",{className:"text-[9px] text-zinc-400 font-bold uppercase",children:t.key||"No Key Configured"})]})]}),s&&e.jsx("button",{onClick:a,className:"p-1 text-zinc-400 hover:text-red-500 transition-colors",children:e.jsx(yt,{size:14})})]}),St=({onClick:t})=>e.jsxs("button",{onClick:t,className:"w-full py-3 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-xl flex justify-center items-center gap-2 text-zinc-400 font-black text-[10px] uppercase hover:text-orange-500 hover:border-orange-400 transition-all",children:[e.jsx(jt,{size:14})," Add CDN Provider"]}),Ra=({data:t,onChange:n,isMulti:r,cdnList:a,onUpdateCdn:s,onRemoveCdn:l,onAddCdn:d})=>r?e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[a.map((i,c)=>e.jsxs("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/30 rounded-xl p-4 border border-zinc-100 dark:border-zinc-800",children:[e.jsx(Nt,{item:i,index:c,icon:wr,onRemove:()=>l(i.id),isRemovable:a.length>1}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsx(Z,{label:"ECS Sport",value:i.ecsSport,onChange:u=>s(i.id,"ecsSport",u),type:"percentage",color:"blue",max:100,compact:!0}),e.jsx(Z,{label:"ECS Entitlement",value:i.ecsEntitlement,onChange:u=>s(i.id,"ecsEntitlement",u),type:"percentage",color:"purple",max:100,compact:!0}),e.jsx(Z,{label:"API Huawei",value:i.apiHuawei,onChange:u=>s(i.id,"apiHuawei",u),type:"percentage",color:"orange",max:100,compact:!0}),e.jsx(Z,{label:"WWW & API Request",value:i.requestPeak,onChange:u=>s(i.id,"requestPeak",u),type:"number",color:"emerald",compact:!0})]})]},i.id)),e.jsx(St,{onClick:d})]}):e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsx(Z,{label:"ECS Sport",value:t.ecsSport,onChange:i=>n("ecsSport",i),type:"percentage",color:"blue",max:100,compact:!0}),e.jsx(Z,{label:"ECS Entitlement",value:t.ecsEntitlement,onChange:i=>n("ecsEntitlement",i),type:"percentage",color:"purple",max:100,compact:!0}),e.jsx(Z,{label:"API Huawei",value:t.apiHuawei,onChange:i=>n("apiHuawei",i),type:"percentage",color:"orange",max:100,compact:!0}),e.jsx(Z,{label:"WWW & API Request",value:t.requestPeak,onChange:i=>n("requestPeak",i),type:"number",color:"emerald",compact:!0})]}),Ia=({data:t,onChange:n,isMulti:r,cdnList:a,onUpdateCdn:s,onRemoveCdn:l,onAddCdn:d})=>{const i=(c,u)=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsx(Z,{label:"Req Peak",value:c.reqPeakMin,onChange:m=>u("reqPeakMin",m),type:"number",color:"blue",compact:!0}),e.jsx(Z,{label:"Req Total",value:c.reqTotal?.val,unit:c.reqTotal?.unit||"k",onChange:m=>u("reqTotal",{...c.reqTotal,val:m}),onUnitChange:m=>u("reqTotal",{...c.reqTotal,unit:m}),type:"number",color:"cyan",compact:!0}),e.jsx(Z,{label:"BW Peak",value:c.bwPeakGbps?.val,unit:c.bwPeakGbps?.unit||"GB",onChange:m=>u("bwPeakGbps",{...c.bwPeakGbps,val:m}),onUnitChange:m=>u("bwPeakGbps",{...c.bwPeakGbps,unit:m}),type:"number",color:"red",compact:!0}),e.jsx(Z,{label:"BW Total",value:c.bandwidth?.val,unit:c.bandwidth?.unit||"GB",onChange:m=>u("bandwidth",{...c.bandwidth,val:m}),onUnitChange:m=>u("bandwidth",{...c.bandwidth,unit:m}),type:"number",color:"orange",compact:!0})]});return r?e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[a.map((c,u)=>e.jsxs("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/30 rounded-xl p-4 border border-zinc-100 dark:border-zinc-800",children:[e.jsx(Nt,{item:c,index:u,icon:kr,onRemove:()=>l(c.id),isRemovable:a.length>1}),i(c,(m,f)=>s(c.id,m,f))]},c.id)),e.jsx(St,{onClick:d})]}):e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsx(Z,{label:"Req Peak",value:t.reqPeakMin,onChange:c=>n("reqPeakMin",c),type:"number",color:"blue",compact:!0}),e.jsx(Z,{label:"Req Total",value:t.reqTotal?.val,unit:t.reqTotal?.unit||"k",onChange:c=>n("reqTotal",{...t.reqTotal,val:c}),onUnitChange:c=>n("reqTotal",{...t.reqTotal,unit:c}),type:"number",color:"cyan",compact:!0}),e.jsx(Z,{label:"BW Peak",value:t.bwPeakGbps?.val,unit:t.bwPeakGbps?.unit||"GB",onChange:c=>n("bwPeakGbps",{...t.bwPeakGbps,val:c}),onUnitChange:c=>n("bwPeakGbps",{...t.bwPeakGbps,unit:c}),type:"number",color:"red",compact:!0}),e.jsx(Z,{label:"BW Total",value:t.bandwidth?.val,unit:t.bandwidth?.unit||"GB",onChange:c=>n("bandwidth",{...t.bandwidth,val:c}),onUnitChange:c=>n("bandwidth",{...t.bandwidth,unit:c}),type:"number",color:"orange",compact:!0})]})})},Da=({data:t,onChange:n,isMulti:r,cdnList:a,onUpdateCdn:s,onRemoveCdn:l,onAddCdn:d})=>r?e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[a.map((i,c)=>e.jsxs("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/30 rounded-xl p-4 border border-zinc-100 dark:border-zinc-800",children:[e.jsx(Nt,{item:i,index:c,icon:sr,onRemove:()=>l(i.id),isRemovable:a.length>1}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{label:"Live Viewers",value:i.muxViewerUniq,onChange:u=>s(i.id,"muxViewerUniq",u),type:"number",color:"purple",compact:!0}),e.jsx(Z,{label:"Engage Score",value:i.muxScore,onChange:u=>s(i.id,"muxScore",u),type:"number",color:"pink",max:100,compact:!0})]})]},i.id)),e.jsx(St,{onClick:d})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsx(Z,{label:"Live Viewers",value:t.muxViewerUniq,onChange:i=>n("muxViewerUniq",i),type:"number",color:"purple",compact:!0}),e.jsx(Z,{label:"Engage Score",value:t.muxScore,onChange:i=>n("muxScore",i),type:"number",color:"pink",max:100,compact:!0})]}),Aa=()=>e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-pulse pt-4",children:[e.jsx("div",{className:"h-32 rounded-xl bg-zinc-100 dark:bg-zinc-900"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"h-24 rounded-xl bg-zinc-100 dark:bg-zinc-900"}),e.jsx("div",{className:"h-24 rounded-xl bg-zinc-100 dark:bg-zinc-900"})]})]});function _a({isOpen:t,onClose:n,matchData:r}){const{state:a,actions:s}=Pa(r,n),[l,d]=Pt.useState({channels:[],cdnOptions:[]});if(Pt.useEffect(()=>{if(!t)return;const u=or.subscribeConfigs(m=>{d(m)});return()=>u()},[t]),!t)return null;const i=r?.isLiveTime||r?.hasStartStat&&!r?.hasEndStat,c=r?.countdown&&r?.countdown.toString().includes("m");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed z-[200]",children:e.jsx(Kt,{isOpen:a.confirmModal.isOpen,onClose:s.closeConfirm,...a.confirmModal})}),e.jsx(Ma,{isOpen:a.preview.show,onClose:s.closePreview,data:a.preview.data,headers:["#","League","Match","Time","ECS Sport","ECS Entitlement","API Huawei","WWW & API Request","CDN","Key","Req Peak","Req Total","BW Peak","BW Total","Viewers","Score","Start","End"]}),e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:a.loading?void 0:n,children:e.jsxs("div",{className:"bg-white dark:bg-[#09090b] w-full max-w-5xl h-[90vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col border border-zinc-200 dark:border-zinc-800 animate-in zoom-in-95 duration-200",onClick:u=>u.stopPropagation(),children:[e.jsx("div",{className:"shrink-0 bg-white dark:bg-[#09090b] border-b border-zinc-200 dark:border-zinc-800",children:e.jsxs("div",{className:"px-6 pt-5 pb-5 flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i?e.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-wider bg-red-50 text-red-600 border border-red-100 dark:bg-red-900/20 dark:text-red-400 dark:border-red-900/30",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),"LIVE NOW"]}):c?e.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-wider bg-orange-50 text-orange-600 border border-orange-100 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-900/30",children:[e.jsx(Pn,{size:12})," Starts in ",r?.countdown]}):e.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-wider bg-zinc-100 text-zinc-500 border border-zinc-200 dark:bg-zinc-800 dark:text-zinc-400 dark:border-zinc-700",children:[e.jsx(Be,{size:12})," ",r?.startTime||"--:--"]}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-wider border ${a.statType==="START"?"bg-blue-50 text-blue-600 border-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-900/30":"bg-purple-50 text-purple-600 border-purple-100 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-900/30"}`,children:[a.statType," Phase"]})]}),e.jsx("h2",{className:"text-xl md:text-2xl font-black text-zinc-900 dark:text-white tracking-tight truncate max-w-2xl",children:r?.teamA&&r?.teamB?`${r.teamA} vs ${r.teamB}`:r?.title||r?.match||"Match Stats"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:s.toggleCdnMode,className:"hidden md:flex h-9 px-3 items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-xs font-bold hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors",children:[e.jsx(ir,{size:14,className:a.isMultiCdnMode?"text-blue-500":"text-zinc-400"}),a.isMultiCdnMode?"Multi-CDN":"Single CDN"]}),e.jsx("div",{className:"h-6 w-px bg-zinc-200 dark:bg-zinc-800 mx-1"}),e.jsx("button",{onClick:()=>s.setStatType(a.statType==="START"?"END":"START"),className:"h-9 w-9 flex items-center justify-center rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-500 transition-colors",title:"Switch Phase",children:e.jsx(oa,{size:18})}),e.jsx("button",{onClick:s.handlePreview,className:"h-9 w-9 flex items-center justify-center rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-500 transition-colors",title:"Preview Data",children:e.jsx(Yt,{size:18})}),e.jsx("button",{onClick:n,className:"h-9 w-9 flex items-center justify-center rounded-lg hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-colors",title:"Close",children:e.jsx(Ie,{size:20})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-zinc-50/50 dark:bg-[#0c0c0e] p-4 md:p-6 custom-scrollbar",children:a.fetching?e.jsx(Aa,{}):e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 pb-10",children:[e.jsx("div",{className:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800/50 rounded-2xl p-5 shadow-sm",children:e.jsx(Ta,{form:a.form,setForm:s.setForm,isMultiCdnMode:a.isMultiCdnMode,toggleCdnMode:s.toggleCdnMode,cdnList:a.cdnList,onAdd:s.handleAddCdn,onRemove:s.handleRemoveCdn,onUpdate:s.handleUpdateCdnRow,onAutoFix:s.handleAutoFixTime,statType:a.statType,masterConfigs:l})}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800/50 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx(wr,{size:14,className:"text-blue-500"}),e.jsx("h3",{className:"text-xs font-black text-zinc-900 dark:text-white uppercase tracking-tight",children:"System Health"})]}),e.jsx(Ra,{data:a.form,onChange:(u,m)=>s.setForm({...a.form,[u]:m}),isMulti:a.isMultiCdnMode,cdnList:a.cdnList,onUpdateCdn:s.handleUpdateCdnRow,onRemoveCdn:s.handleRemoveCdn,onAddCdn:s.handleAddCdn})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800/50 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx(kr,{size:14,className:"text-red-500"}),e.jsx("h3",{className:"text-xs font-black text-zinc-900 dark:text-white uppercase tracking-tight",children:"Traffic & Bandwidth"})]}),e.jsx(Ia,{data:a.form,onChange:(u,m)=>s.setForm({...a.form,[u]:m}),isMulti:a.isMultiCdnMode,cdnList:a.cdnList,onUpdateCdn:s.handleUpdateCdnRow,onRemoveCdn:s.handleRemoveCdn,onAddCdn:s.handleAddCdn})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800/50 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx(sr,{size:14,className:"text-purple-500"}),e.jsx("h3",{className:"text-xs font-black text-zinc-900 dark:text-white uppercase tracking-tight",children:"Viewers & Engagement"})]}),e.jsx(Da,{data:a.form,onChange:(u,m)=>s.setForm({...a.form,[u]:m}),isMulti:a.isMultiCdnMode,cdnList:a.cdnList,onUpdateCdn:s.handleUpdateCdnRow,onRemoveCdn:s.handleRemoveCdn,onAddCdn:s.handleAddCdn})]})]})}),e.jsxs("div",{className:"shrink-0 p-4 bg-white dark:bg-[#09090b] border-t border-zinc-200 dark:border-zinc-800 flex justify-between items-center gap-4 z-10",children:[e.jsxs("button",{onClick:s.requestDelete,disabled:a.loading,className:"px-4 py-2.5 rounded-lg text-xs font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors flex items-center gap-2",children:[e.jsx(yt,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:"Reset Data"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:n,disabled:a.loading,className:"px-5 py-2.5 rounded-lg text-xs font-bold text-zinc-600 hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>s.handleSmartSave(),disabled:a.loading||a.isSuccess,className:`
                   px-6 py-2.5 rounded-lg text-xs font-black uppercase tracking-wide flex items-center gap-2 shadow-lg transition-all transform active:scale-95
                   ${a.isSuccess?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-black dark:bg-white text-white dark:text-black hover:opacity-90"}
                 `,children:[a.loading?e.jsx(wt,{size:16,className:"animate-spin"}):a.isSuccess?e.jsx(ie,{size:16}):e.jsx(cr,{size:16}),a.loading?"Saving...":a.isSuccess?"Saved":"Save Changes"]})]})]})]})})]})}var Oa=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],La=Oa.reduce((t,n)=>{const r=Hn(`Primitive.${n}`),a=o.forwardRef((s,l)=>{const{asChild:d,...i}=s,c=d?r:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...i,ref:l})});return a.displayName=`Primitive.${n}`,{...t,[n]:a}},{}),Ba="Label",yr=o.forwardRef((t,n)=>e.jsx(La.label,{...t,ref:n,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));yr.displayName=Ba;var $a=yr;function Je({className:t,...n}){return e.jsx($a,{"data-slot":"label",className:H("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...n})}const Fa=jn("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function qa({className:t,variant:n,asChild:r=!1,...a}){const s=r?Un:"span";return e.jsx(s,{"data-slot":"badge",className:H(Fa({variant:n}),t),...a})}function Va(t){const n=Ga(t),r=o.forwardRef((a,s)=>{const{children:l,...d}=a,i=o.Children.toArray(l),c=i.find(Ha);if(c){const u=c.props.children,m=i.map(f=>f===c?o.Children.count(u)>1?o.Children.only(null):o.isValidElement(u)?u.props.children:null:f);return e.jsx(n,{...d,ref:s,children:o.isValidElement(u)?o.cloneElement(u,void 0,m):null})}return e.jsx(n,{...d,ref:s,children:l})});return r.displayName=`${t}.Slot`,r}function Ga(t){const n=o.forwardRef((r,a)=>{const{children:s,...l}=r;if(o.isValidElement(s)){const d=Ka(s),i=Ua(l,s.props);return s.type!==o.Fragment&&(i.ref=a?fe(a,d):d),o.cloneElement(s,i)}return o.Children.count(s)>1?o.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var Wa=Symbol("radix.slottable");function Ha(t){return o.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Wa}function Ua(t,n){const r={...n};for(const a in n){const s=t[a],l=n[a];/^on[A-Z]/.test(a)?s&&l?r[a]=(...i)=>{const c=l(...i);return s(...i),c}:s&&(r[a]=s):a==="style"?r[a]={...s,...l}:a==="className"&&(r[a]=[s,l].filter(Boolean).join(" "))}return{...t,...r}}function Ka(t){let n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var $e="Dialog",[jr]=Qt($e),[Ya,oe]=jr($e),Nr=t=>{const{__scopeDialog:n,children:r,open:a,defaultOpen:s,onOpenChange:l,modal:d=!0}=t,i=o.useRef(null),c=o.useRef(null),[u,m]=lt({prop:a,defaultProp:s??!1,onChange:l,caller:$e});return e.jsx(Ya,{scope:n,triggerRef:i,contentRef:c,contentId:re(),titleId:re(),descriptionId:re(),open:u,onOpenChange:m,onOpenToggle:o.useCallback(()=>m(f=>!f),[m]),modal:d,children:r})};Nr.displayName=$e;var Sr="DialogTrigger",Qa=o.forwardRef((t,n)=>{const{__scopeDialog:r,...a}=t,s=oe(Sr,r),l=te(n,s.triggerRef);return e.jsx(V.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Et(s.open),...a,ref:l,onClick:Y(t.onClick,s.onOpenToggle)})});Qa.displayName=Sr;var zt="DialogPortal",[Xa,zr]=jr(zt,{forceMount:void 0}),Cr=t=>{const{__scopeDialog:n,forceMount:r,children:a,container:s}=t,l=oe(zt,n);return e.jsx(Xa,{scope:n,forceMount:r,children:o.Children.map(a,d=>e.jsx(kt,{present:r||l.open,children:e.jsx(Xt,{asChild:!0,container:s,children:d})}))})};Cr.displayName=zt;var _e="DialogOverlay",Er=o.forwardRef((t,n)=>{const r=zr(_e,t.__scopeDialog),{forceMount:a=r.forceMount,...s}=t,l=oe(_e,t.__scopeDialog);return l.modal?e.jsx(kt,{present:a||l.open,children:e.jsx(Ja,{...s,ref:n})}):null});Er.displayName=_e;var Za=Va("DialogOverlay.RemoveScroll"),Ja=o.forwardRef((t,n)=>{const{__scopeDialog:r,...a}=t,s=oe(_e,r);return e.jsx(ur,{as:Za,allowPinchZoom:!0,shards:[s.contentRef],children:e.jsx(V.div,{"data-state":Et(s.open),...a,ref:n,style:{pointerEvents:"auto",...a.style}})})}),be="DialogContent",Tr=o.forwardRef((t,n)=>{const r=zr(be,t.__scopeDialog),{forceMount:a=r.forceMount,...s}=t,l=oe(be,t.__scopeDialog);return e.jsx(kt,{present:a||l.open,children:l.modal?e.jsx(es,{...s,ref:n}):e.jsx(ts,{...s,ref:n})})});Tr.displayName=be;var es=o.forwardRef((t,n)=>{const r=oe(be,t.__scopeDialog),a=o.useRef(null),s=te(n,r.contentRef,a);return o.useEffect(()=>{const l=a.current;if(l)return dr(l)},[]),e.jsx(Mr,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(t.onCloseAutoFocus,l=>{l.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Y(t.onPointerDownOutside,l=>{const d=l.detail.originalEvent,i=d.button===0&&d.ctrlKey===!0;(d.button===2||i)&&l.preventDefault()}),onFocusOutside:Y(t.onFocusOutside,l=>l.preventDefault())})}),ts=o.forwardRef((t,n)=>{const r=oe(be,t.__scopeDialog),a=o.useRef(!1),s=o.useRef(!1);return e.jsx(Mr,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{t.onCloseAutoFocus?.(l),l.defaultPrevented||(a.current||r.triggerRef.current?.focus(),l.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:l=>{t.onInteractOutside?.(l),l.defaultPrevented||(a.current=!0,l.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const d=l.target;r.triggerRef.current?.contains(d)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&s.current&&l.preventDefault()}})}),Mr=o.forwardRef((t,n)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:l,...d}=t,i=oe(be,r),c=o.useRef(null),u=te(n,c);return pr(),e.jsxs(e.Fragment,{children:[e.jsx(xr,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:l,children:e.jsx(Zt,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":Et(i.open),...d,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(ns,{titleId:i.titleId}),e.jsx(ss,{contentRef:c,descriptionId:i.descriptionId})]})]})}),Ct="DialogTitle",Pr=o.forwardRef((t,n)=>{const{__scopeDialog:r,...a}=t,s=oe(Ct,r);return e.jsx(V.h2,{id:s.titleId,...a,ref:n})});Pr.displayName=Ct;var Rr="DialogDescription",rs=o.forwardRef((t,n)=>{const{__scopeDialog:r,...a}=t,s=oe(Rr,r);return e.jsx(V.p,{id:s.descriptionId,...a,ref:n})});rs.displayName=Rr;var Ir="DialogClose",Dr=o.forwardRef((t,n)=>{const{__scopeDialog:r,...a}=t,s=oe(Ir,r);return e.jsx(V.button,{type:"button",...a,ref:n,onClick:Y(t.onClick,()=>s.onOpenChange(!1))})});Dr.displayName=Ir;function Et(t){return t?"open":"closed"}var Ar="DialogTitleWarning",[ki,_r]=Nn(Ar,{contentName:be,titleName:Ct,docsSlug:"dialog"}),ns=({titleId:t})=>{const n=_r(Ar),r=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return o.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},as="DialogDescriptionWarning",ss=({contentRef:t,descriptionId:n})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_r(as).contentName}}.`;return o.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");n&&s&&(document.getElementById(n)||console.warn(a))},[a,t,n]),null},Or=Nr,Lr=Cr,Br=Er,$r=Tr,os=Pr,Fr=Dr;function is({...t}){return e.jsx(Or,{"data-slot":"dialog",...t})}function ls({...t}){return e.jsx(Lr,{"data-slot":"dialog-portal",...t})}function cs({...t}){return e.jsx(Fr,{"data-slot":"dialog-close",...t})}function ds({className:t,...n}){return e.jsx(Br,{"data-slot":"dialog-overlay",className:H("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...n})}function us({className:t,children:n,showCloseButton:r=!0,...a}){return e.jsxs(ls,{"data-slot":"dialog-portal",children:[e.jsx(ds,{}),e.jsxs($r,{"data-slot":"dialog-content",className:H("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...a,children:[n,r&&e.jsxs(Fr,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Ie,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ps({className:t,...n}){return e.jsx("div",{"data-slot":"dialog-header",className:H("flex flex-col gap-2 text-center sm:text-left",t),...n})}function xs({className:t,...n}){return e.jsx("div",{"data-slot":"dialog-footer",className:H("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...n})}function ms({className:t,...n}){return e.jsx(os,{"data-slot":"dialog-title",className:H("text-lg leading-none font-semibold",t),...n})}function Ft(t,[n,r]){return Math.min(r,Math.max(n,t))}var hs=o.createContext(void 0);function fs(t){const n=o.useContext(hs);return t||n||"ltr"}function gs(t){const n=bs(t),r=o.forwardRef((a,s)=>{const{children:l,...d}=a,i=o.Children.toArray(l),c=i.find(ws);if(c){const u=c.props.children,m=i.map(f=>f===c?o.Children.count(u)>1?o.Children.only(null):o.isValidElement(u)?u.props.children:null:f);return e.jsx(n,{...d,ref:s,children:o.isValidElement(u)?o.cloneElement(u,void 0,m):null})}return e.jsx(n,{...d,ref:s,children:l})});return r.displayName=`${t}.Slot`,r}function bs(t){const n=o.forwardRef((r,a)=>{const{children:s,...l}=r;if(o.isValidElement(s)){const d=ys(s),i=ks(l,s.props);return s.type!==o.Fragment&&(i.ref=a?fe(a,d):d),o.cloneElement(s,i)}return o.Children.count(s)>1?o.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var vs=Symbol("radix.slottable");function ws(t){return o.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===vs}function ks(t,n){const r={...n};for(const a in n){const s=t[a],l=n[a];/^on[A-Z]/.test(a)?s&&l?r[a]=(...i)=>{const c=l(...i);return s(...i),c}:s&&(r[a]=s):a==="style"?r[a]={...s,...l}:a==="className"&&(r[a]=[s,l].filter(Boolean).join(" "))}return{...t,...r}}function ys(t){let n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function js(t){const n=o.useRef({value:t,previous:t});return o.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var Ns=[" ","Enter","ArrowUp","ArrowDown"],Ss=[" ","Enter"],ve="Select",[Fe,qe,zs]=Sn(ve),[Ce]=Qt(ve,[zs,mr]),Ve=mr(),[Cs,xe]=Ce(ve),[Es,Ts]=Ce(ve),qr=t=>{const{__scopeSelect:n,children:r,open:a,defaultOpen:s,onOpenChange:l,value:d,defaultValue:i,onValueChange:c,dir:u,name:m,autoComplete:f,disabled:k,required:E,form:y}=t,w=Ve(n),[j,h]=o.useState(null),[g,T]=o.useState(null),[D,I]=o.useState(!1),O=fs(u),[x,v]=lt({prop:a,defaultProp:s??!1,onChange:l,caller:ve}),[A,B]=lt({prop:d,defaultProp:i,onChange:c,caller:ve}),P=o.useRef(null),q=j?y||!!j.closest("form"):!0,[W,U]=o.useState(new Set),Q=Array.from(W).map(_=>_.props.value).join(";");return e.jsx(Yn,{...w,children:e.jsxs(Cs,{required:E,scope:n,trigger:j,onTriggerChange:h,valueNode:g,onValueNodeChange:T,valueNodeHasChildren:D,onValueNodeHasChildrenChange:I,contentId:re(),value:A,onValueChange:B,open:x,onOpenChange:v,dir:O,triggerPointerDownPosRef:P,disabled:k,children:[e.jsx(Fe.Provider,{scope:n,children:e.jsx(Es,{scope:t.__scopeSelect,onNativeOptionAdd:o.useCallback(_=>{U(X=>new Set(X).add(_))},[]),onNativeOptionRemove:o.useCallback(_=>{U(X=>{const J=new Set(X);return J.delete(_),J})},[]),children:r})}),q?e.jsxs(un,{"aria-hidden":!0,required:E,tabIndex:-1,name:m,autoComplete:f,value:A,onChange:_=>B(_.target.value),disabled:k,form:y,children:[A===void 0?e.jsx("option",{value:""}):null,Array.from(W)]},Q):null]})})};qr.displayName=ve;var Vr="SelectTrigger",Gr=o.forwardRef((t,n)=>{const{__scopeSelect:r,disabled:a=!1,...s}=t,l=Ve(r),d=xe(Vr,r),i=d.disabled||a,c=te(n,d.onTriggerChange),u=qe(r),m=o.useRef("touch"),[f,k,E]=xn(w=>{const j=u().filter(T=>!T.disabled),h=j.find(T=>T.value===d.value),g=mn(j,w,h);g!==void 0&&d.onValueChange(g.value)}),y=w=>{i||(d.onOpenChange(!0),E()),w&&(d.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return e.jsx(Qn,{asChild:!0,...l,children:e.jsx(V.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":pn(d.value)?"":void 0,...s,ref:c,onClick:Y(s.onClick,w=>{w.currentTarget.focus(),m.current!=="mouse"&&y(w)}),onPointerDown:Y(s.onPointerDown,w=>{m.current=w.pointerType;const j=w.target;j.hasPointerCapture(w.pointerId)&&j.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(y(w),w.preventDefault())}),onKeyDown:Y(s.onKeyDown,w=>{const j=f.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&k(w.key),!(j&&w.key===" ")&&Ns.includes(w.key)&&(y(),w.preventDefault())})})})});Gr.displayName=Vr;var Wr="SelectValue",Hr=o.forwardRef((t,n)=>{const{__scopeSelect:r,className:a,style:s,children:l,placeholder:d="",...i}=t,c=xe(Wr,r),{onValueNodeHasChildrenChange:u}=c,m=l!==void 0,f=te(n,c.onValueNodeChange);return ue(()=>{u(m)},[u,m]),e.jsx(V.span,{...i,ref:f,style:{pointerEvents:"none"},children:pn(c.value)?e.jsx(e.Fragment,{children:d}):l})});Hr.displayName=Wr;var Ms="SelectIcon",Ur=o.forwardRef((t,n)=>{const{__scopeSelect:r,children:a,...s}=t;return e.jsx(V.span,{"aria-hidden":!0,...s,ref:n,children:a||"▼"})});Ur.displayName=Ms;var Ps="SelectPortal",Kr=t=>e.jsx(Xt,{asChild:!0,...t});Kr.displayName=Ps;var we="SelectContent",Yr=o.forwardRef((t,n)=>{const r=xe(we,t.__scopeSelect),[a,s]=o.useState();if(ue(()=>{s(new DocumentFragment)},[]),!r.open){const l=a;return l?Jt.createPortal(e.jsx(Qr,{scope:t.__scopeSelect,children:e.jsx(Fe.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(Xr,{...t,ref:n})});Yr.displayName=we;var ne=10,[Qr,me]=Ce(we),Rs="SelectContentImpl",Is=gs("SelectContent.RemoveScroll"),Xr=o.forwardRef((t,n)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:l,onPointerDownOutside:d,side:i,sideOffset:c,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:k,collisionPadding:E,sticky:y,hideWhenDetached:w,avoidCollisions:j,...h}=t,g=xe(we,r),[T,D]=o.useState(null),[I,O]=o.useState(null),x=te(n,b=>D(b)),[v,A]=o.useState(null),[B,P]=o.useState(null),q=qe(r),[W,U]=o.useState(!1),Q=o.useRef(!1);o.useEffect(()=>{if(T)return dr(T)},[T]),pr();const _=o.useCallback(b=>{const[R,...L]=q().map(K=>K.ref.current),[$]=L.slice(-1),F=document.activeElement;for(const K of b)if(K===F||(K?.scrollIntoView({block:"nearest"}),K===R&&I&&(I.scrollTop=0),K===$&&I&&(I.scrollTop=I.scrollHeight),K?.focus(),document.activeElement!==F))return},[q,I]),X=o.useCallback(()=>_([v,T]),[_,v,T]);o.useEffect(()=>{W&&X()},[W,X]);const{onOpenChange:J,triggerPointerDownPosRef:G}=g;o.useEffect(()=>{if(T){let b={x:0,y:0};const R=$=>{b={x:Math.abs(Math.round($.pageX)-(G.current?.x??0)),y:Math.abs(Math.round($.pageY)-(G.current?.y??0))}},L=$=>{b.x<=10&&b.y<=10?$.preventDefault():T.contains($.target)||J(!1),document.removeEventListener("pointermove",R),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",R),document.addEventListener("pointerup",L,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",L,{capture:!0})}}},[T,J,G]),o.useEffect(()=>{const b=()=>J(!1);return window.addEventListener("blur",b),window.addEventListener("resize",b),()=>{window.removeEventListener("blur",b),window.removeEventListener("resize",b)}},[J]);const[le,N]=xn(b=>{const R=q().filter(F=>!F.disabled),L=R.find(F=>F.ref.current===document.activeElement),$=mn(R,b,L);$&&setTimeout(()=>$.ref.current.focus())}),p=o.useCallback((b,R,L)=>{const $=!Q.current&&!L;(g.value!==void 0&&g.value===R||$)&&(A(b),$&&(Q.current=!0))},[g.value]),C=o.useCallback(()=>T?.focus(),[T]),S=o.useCallback((b,R,L)=>{const $=!Q.current&&!L;(g.value!==void 0&&g.value===R||$)&&P(b)},[g.value]),z=a==="popper"?xt:Zr,M=z===xt?{side:i,sideOffset:c,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:k,collisionPadding:E,sticky:y,hideWhenDetached:w,avoidCollisions:j}:{};return e.jsx(Qr,{scope:r,content:T,viewport:I,onViewportChange:O,itemRefCallback:p,selectedItem:v,onItemLeave:C,itemTextRefCallback:S,focusSelectedItem:X,selectedItemText:B,position:a,isPositioned:W,searchRef:le,children:e.jsx(ur,{as:Is,allowPinchZoom:!0,children:e.jsx(xr,{asChild:!0,trapped:g.open,onMountAutoFocus:b=>{b.preventDefault()},onUnmountAutoFocus:Y(s,b=>{g.trigger?.focus({preventScroll:!0}),b.preventDefault()}),children:e.jsx(Zt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:b=>b.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:e.jsx(z,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:b=>b.preventDefault(),...h,...M,onPlaced:()=>U(!0),ref:x,style:{display:"flex",flexDirection:"column",outline:"none",...h.style},onKeyDown:Y(h.onKeyDown,b=>{const R=b.ctrlKey||b.altKey||b.metaKey;if(b.key==="Tab"&&b.preventDefault(),!R&&b.key.length===1&&N(b.key),["ArrowUp","ArrowDown","Home","End"].includes(b.key)){let $=q().filter(F=>!F.disabled).map(F=>F.ref.current);if(["ArrowUp","End"].includes(b.key)&&($=$.slice().reverse()),["ArrowUp","ArrowDown"].includes(b.key)){const F=b.target,K=$.indexOf(F);$=$.slice(K+1)}setTimeout(()=>_($)),b.preventDefault()}})})})})})})});Xr.displayName=Rs;var Ds="SelectItemAlignedPosition",Zr=o.forwardRef((t,n)=>{const{__scopeSelect:r,onPlaced:a,...s}=t,l=xe(we,r),d=me(we,r),[i,c]=o.useState(null),[u,m]=o.useState(null),f=te(n,x=>m(x)),k=qe(r),E=o.useRef(!1),y=o.useRef(!0),{viewport:w,selectedItem:j,selectedItemText:h,focusSelectedItem:g}=d,T=o.useCallback(()=>{if(l.trigger&&l.valueNode&&i&&u&&w&&j&&h){const x=l.trigger.getBoundingClientRect(),v=u.getBoundingClientRect(),A=l.valueNode.getBoundingClientRect(),B=h.getBoundingClientRect();if(l.dir!=="rtl"){const F=B.left-v.left,K=A.left-F,ee=x.left-K,ce=x.width+ee,We=Math.max(ce,v.width),He=window.innerWidth-ne,Ue=Ft(K,[ne,Math.max(ne,He-We)]);i.style.minWidth=ce+"px",i.style.left=Ue+"px"}else{const F=v.right-B.right,K=window.innerWidth-A.right-F,ee=window.innerWidth-x.right-K,ce=x.width+ee,We=Math.max(ce,v.width),He=window.innerWidth-ne,Ue=Ft(K,[ne,Math.max(ne,He-We)]);i.style.minWidth=ce+"px",i.style.right=Ue+"px"}const P=k(),q=window.innerHeight-ne*2,W=w.scrollHeight,U=window.getComputedStyle(u),Q=parseInt(U.borderTopWidth,10),_=parseInt(U.paddingTop,10),X=parseInt(U.borderBottomWidth,10),J=parseInt(U.paddingBottom,10),G=Q+_+W+J+X,le=Math.min(j.offsetHeight*5,G),N=window.getComputedStyle(w),p=parseInt(N.paddingTop,10),C=parseInt(N.paddingBottom,10),S=x.top+x.height/2-ne,z=q-S,M=j.offsetHeight/2,b=j.offsetTop+M,R=Q+_+b,L=G-R;if(R<=S){const F=P.length>0&&j===P[P.length-1].ref.current;i.style.bottom="0px";const K=u.clientHeight-w.offsetTop-w.offsetHeight,ee=Math.max(z,M+(F?C:0)+K+X),ce=R+ee;i.style.height=ce+"px"}else{const F=P.length>0&&j===P[0].ref.current;i.style.top="0px";const ee=Math.max(S,Q+w.offsetTop+(F?p:0)+M)+L;i.style.height=ee+"px",w.scrollTop=R-S+w.offsetTop}i.style.margin=`${ne}px 0`,i.style.minHeight=le+"px",i.style.maxHeight=q+"px",a?.(),requestAnimationFrame(()=>E.current=!0)}},[k,l.trigger,l.valueNode,i,u,w,j,h,l.dir,a]);ue(()=>T(),[T]);const[D,I]=o.useState();ue(()=>{u&&I(window.getComputedStyle(u).zIndex)},[u]);const O=o.useCallback(x=>{x&&y.current===!0&&(T(),g?.(),y.current=!1)},[T,g]);return e.jsx(_s,{scope:r,contentWrapper:i,shouldExpandOnScrollRef:E,onScrollButtonChange:O,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:e.jsx(V.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Zr.displayName=Ds;var As="SelectPopperPosition",xt=o.forwardRef((t,n)=>{const{__scopeSelect:r,align:a="start",collisionPadding:s=ne,...l}=t,d=Ve(r);return e.jsx(Xn,{...d,...l,ref:n,align:a,collisionPadding:s,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xt.displayName=As;var[_s,Tt]=Ce(we,{}),mt="SelectViewport",Jr=o.forwardRef((t,n)=>{const{__scopeSelect:r,nonce:a,...s}=t,l=me(mt,r),d=Tt(mt,r),i=te(n,l.onViewportChange),c=o.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Fe.Slot,{scope:r,children:e.jsx(V.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Y(s.onScroll,u=>{const m=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:k}=d;if(k?.current&&f){const E=Math.abs(c.current-m.scrollTop);if(E>0){const y=window.innerHeight-ne*2,w=parseFloat(f.style.minHeight),j=parseFloat(f.style.height),h=Math.max(w,j);if(h<y){const g=h+E,T=Math.min(y,g),D=g-T;f.style.height=T+"px",f.style.bottom==="0px"&&(m.scrollTop=D>0?D:0,f.style.justifyContent="flex-end")}}}c.current=m.scrollTop})})})]})});Jr.displayName=mt;var en="SelectGroup",[Os,Ls]=Ce(en),Bs=o.forwardRef((t,n)=>{const{__scopeSelect:r,...a}=t,s=re();return e.jsx(Os,{scope:r,id:s,children:e.jsx(V.div,{role:"group","aria-labelledby":s,...a,ref:n})})});Bs.displayName=en;var tn="SelectLabel",$s=o.forwardRef((t,n)=>{const{__scopeSelect:r,...a}=t,s=Ls(tn,r);return e.jsx(V.div,{id:s.id,...a,ref:n})});$s.displayName=tn;var Oe="SelectItem",[Fs,rn]=Ce(Oe),nn=o.forwardRef((t,n)=>{const{__scopeSelect:r,value:a,disabled:s=!1,textValue:l,...d}=t,i=xe(Oe,r),c=me(Oe,r),u=i.value===a,[m,f]=o.useState(l??""),[k,E]=o.useState(!1),y=te(n,g=>c.itemRefCallback?.(g,a,s)),w=re(),j=o.useRef("touch"),h=()=>{s||(i.onValueChange(a),i.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Fs,{scope:r,value:a,disabled:s,textId:w,isSelected:u,onItemTextChange:o.useCallback(g=>{f(T=>T||(g?.textContent??"").trim())},[]),children:e.jsx(Fe.ItemSlot,{scope:r,value:a,disabled:s,textValue:m,children:e.jsx(V.div,{role:"option","aria-labelledby":w,"data-highlighted":k?"":void 0,"aria-selected":u&&k,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...d,ref:y,onFocus:Y(d.onFocus,()=>E(!0)),onBlur:Y(d.onBlur,()=>E(!1)),onClick:Y(d.onClick,()=>{j.current!=="mouse"&&h()}),onPointerUp:Y(d.onPointerUp,()=>{j.current==="mouse"&&h()}),onPointerDown:Y(d.onPointerDown,g=>{j.current=g.pointerType}),onPointerMove:Y(d.onPointerMove,g=>{j.current=g.pointerType,s?c.onItemLeave?.():j.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Y(d.onPointerLeave,g=>{g.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Y(d.onKeyDown,g=>{c.searchRef?.current!==""&&g.key===" "||(Ss.includes(g.key)&&h(),g.key===" "&&g.preventDefault())})})})})});nn.displayName=Oe;var Re="SelectItemText",an=o.forwardRef((t,n)=>{const{__scopeSelect:r,className:a,style:s,...l}=t,d=xe(Re,r),i=me(Re,r),c=rn(Re,r),u=Ts(Re,r),[m,f]=o.useState(null),k=te(n,h=>f(h),c.onItemTextChange,h=>i.itemTextRefCallback?.(h,c.value,c.disabled)),E=m?.textContent,y=o.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:E},c.value),[c.disabled,c.value,E]),{onNativeOptionAdd:w,onNativeOptionRemove:j}=u;return ue(()=>(w(y),()=>j(y)),[w,j,y]),e.jsxs(e.Fragment,{children:[e.jsx(V.span,{id:c.textId,...l,ref:k}),c.isSelected&&d.valueNode&&!d.valueNodeHasChildren?Jt.createPortal(l.children,d.valueNode):null]})});an.displayName=Re;var sn="SelectItemIndicator",on=o.forwardRef((t,n)=>{const{__scopeSelect:r,...a}=t;return rn(sn,r).isSelected?e.jsx(V.span,{"aria-hidden":!0,...a,ref:n}):null});on.displayName=sn;var ht="SelectScrollUpButton",ln=o.forwardRef((t,n)=>{const r=me(ht,t.__scopeSelect),a=Tt(ht,t.__scopeSelect),[s,l]=o.useState(!1),d=te(n,a.onScrollButtonChange);return ue(()=>{if(r.viewport&&r.isPositioned){let i=function(){const u=c.scrollTop>0;l(u)};const c=r.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[r.viewport,r.isPositioned]),s?e.jsx(dn,{...t,ref:d,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=r;i&&c&&(i.scrollTop=i.scrollTop-c.offsetHeight)}}):null});ln.displayName=ht;var ft="SelectScrollDownButton",cn=o.forwardRef((t,n)=>{const r=me(ft,t.__scopeSelect),a=Tt(ft,t.__scopeSelect),[s,l]=o.useState(!1),d=te(n,a.onScrollButtonChange);return ue(()=>{if(r.viewport&&r.isPositioned){let i=function(){const u=c.scrollHeight-c.clientHeight,m=Math.ceil(c.scrollTop)<u;l(m)};const c=r.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[r.viewport,r.isPositioned]),s?e.jsx(dn,{...t,ref:d,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=r;i&&c&&(i.scrollTop=i.scrollTop+c.offsetHeight)}}):null});cn.displayName=ft;var dn=o.forwardRef((t,n)=>{const{__scopeSelect:r,onAutoScroll:a,...s}=t,l=me("SelectScrollButton",r),d=o.useRef(null),i=qe(r),c=o.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return o.useEffect(()=>()=>c(),[c]),ue(()=>{i().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[i]),e.jsx(V.div,{"aria-hidden":!0,...s,ref:n,style:{flexShrink:0,...s.style},onPointerDown:Y(s.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(a,50))}),onPointerMove:Y(s.onPointerMove,()=>{l.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(a,50))}),onPointerLeave:Y(s.onPointerLeave,()=>{c()})})}),qs="SelectSeparator",Vs=o.forwardRef((t,n)=>{const{__scopeSelect:r,...a}=t;return e.jsx(V.div,{"aria-hidden":!0,...a,ref:n})});Vs.displayName=qs;var gt="SelectArrow",Gs=o.forwardRef((t,n)=>{const{__scopeSelect:r,...a}=t,s=Ve(r),l=xe(gt,r),d=me(gt,r);return l.open&&d.position==="popper"?e.jsx(Zn,{...s,...a,ref:n}):null});Gs.displayName=gt;var Ws="SelectBubbleInput",un=o.forwardRef(({__scopeSelect:t,value:n,...r},a)=>{const s=o.useRef(null),l=te(a,s),d=js(n);return o.useEffect(()=>{const i=s.current;if(!i)return;const c=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(d!==n&&m){const f=new Event("change",{bubbles:!0});m.call(i,n),i.dispatchEvent(f)}},[d,n]),e.jsx(V.select,{...r,style:{...zn,...r.style},ref:l,defaultValue:n})});un.displayName=Ws;function pn(t){return t===""||t===void 0}function xn(t){const n=Cn(t),r=o.useRef(""),a=o.useRef(0),s=o.useCallback(d=>{const i=r.current+d;n(i),(function c(u){r.current=u,window.clearTimeout(a.current),u!==""&&(a.current=window.setTimeout(()=>c(""),1e3))})(i)},[n]),l=o.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return o.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,s,l]}function mn(t,n,r){const s=n.length>1&&Array.from(n).every(u=>u===n[0])?n[0]:n,l=r?t.indexOf(r):-1;let d=Hs(t,Math.max(l,0));s.length===1&&(d=d.filter(u=>u!==r));const c=d.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function Hs(t,n){return t.map((r,a)=>t[(n+a)%t.length])}var Us=qr,Ks=Gr,Ys=Hr,Qs=Ur,Xs=Kr,Zs=Yr,Js=Jr,eo=nn,to=an,ro=on,no=ln,ao=cn;function et({...t}){return e.jsx(Us,{"data-slot":"select",...t})}function tt({...t}){return e.jsx(Ys,{"data-slot":"select-value",...t})}function rt({className:t,size:n="default",children:r,...a}){return e.jsxs(Ks,{"data-slot":"select-trigger","data-size":n,className:H("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a,children:[r,e.jsx(Qs,{asChild:!0,children:e.jsx(fr,{className:"size-4 opacity-50"})})]})}function nt({className:t,children:n,position:r="item-aligned",align:a="center",...s}){return e.jsx(Xs,{children:e.jsxs(Zs,{"data-slot":"select-content",className:H("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,align:a,...s,children:[e.jsx(so,{}),e.jsx(Js,{className:H("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),e.jsx(oo,{})]})})}function at({className:t,children:n,...r}){return e.jsxs(eo,{"data-slot":"select-item",className:H("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[e.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(ro,{children:e.jsx(ie,{className:"size-4"})})}),e.jsx(to,{children:n})]})}function so({className:t,...n}){return e.jsx(no,{"data-slot":"select-scroll-up-button",className:H("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(Wn,{className:"size-4"})})}function oo({className:t,...n}){return e.jsx(ao,{"data-slot":"select-scroll-down-button",className:H("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(fr,{className:"size-4"})})}var qt=1,io=.9,lo=.8,co=.17,st=.1,ot=.999,uo=.9999,po=.99,xo=/[\\\/_+.#"@\[\(\{&]/,mo=/[\\\/_+.#"@\[\(\{&]/g,ho=/[\s-]/,hn=/[\s-]/g;function bt(t,n,r,a,s,l,d){if(l===n.length)return s===t.length?qt:po;var i=`${s},${l}`;if(d[i]!==void 0)return d[i];for(var c=a.charAt(l),u=r.indexOf(c,s),m=0,f,k,E,y;u>=0;)f=bt(t,n,r,a,u+1,l+1,d),f>m&&(u===s?f*=qt:xo.test(t.charAt(u-1))?(f*=lo,E=t.slice(s,u-1).match(mo),E&&s>0&&(f*=Math.pow(ot,E.length))):ho.test(t.charAt(u-1))?(f*=io,y=t.slice(s,u-1).match(hn),y&&s>0&&(f*=Math.pow(ot,y.length))):(f*=co,s>0&&(f*=Math.pow(ot,u-s))),t.charAt(u)!==n.charAt(l)&&(f*=uo)),(f<st&&r.charAt(u-1)===a.charAt(l+1)||a.charAt(l+1)===a.charAt(l)&&r.charAt(u-1)!==a.charAt(l))&&(k=bt(t,n,r,a,u+1,l+2,d),k*st>f&&(f=k*st)),f>m&&(m=f),u=r.indexOf(c,u+1);return d[i]=m,m}function Vt(t){return t.toLowerCase().replace(hn," ")}function fo(t,n,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,bt(t,n,Vt(t),Vt(n),0,0,{})}var Me='[cmdk-group=""]',it='[cmdk-group-items=""]',go='[cmdk-group-heading=""]',fn='[cmdk-item=""]',Gt=`${fn}:not([aria-disabled="true"])`,vt="cmdk-item-select",Ne="data-value",bo=(t,n,r)=>fo(t,n,r),gn=o.createContext(void 0),De=()=>o.useContext(gn),bn=o.createContext(void 0),Mt=()=>o.useContext(bn),vn=o.createContext(void 0),wn=o.forwardRef((t,n)=>{let r=Se(()=>{var p,C;return{search:"",value:(C=(p=t.value)!=null?p:t.defaultValue)!=null?C:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=Se(()=>new Set),s=Se(()=>new Map),l=Se(()=>new Map),d=Se(()=>new Set),i=kn(t),{label:c,children:u,value:m,onValueChange:f,filter:k,shouldFilter:E,loop:y,disablePointerSelection:w=!1,vimBindings:j=!0,...h}=t,g=re(),T=re(),D=re(),I=o.useRef(null),O=To();ke(()=>{if(m!==void 0){let p=m.trim();r.current.value=p,x.emit()}},[m]),ke(()=>{O(6,W)},[]);let x=o.useMemo(()=>({subscribe:p=>(d.current.add(p),()=>d.current.delete(p)),snapshot:()=>r.current,setState:(p,C,S)=>{var z,M,b,R;if(!Object.is(r.current[p],C)){if(r.current[p]=C,p==="search")q(),B(),O(1,P);else if(p==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let L=document.getElementById(D);L?L.focus():(z=document.getElementById(g))==null||z.focus()}if(O(7,()=>{var L;r.current.selectedItemId=(L=U())==null?void 0:L.id,x.emit()}),S||O(5,W),((M=i.current)==null?void 0:M.value)!==void 0){let L=C??"";(R=(b=i.current).onValueChange)==null||R.call(b,L);return}}x.emit()}},emit:()=>{d.current.forEach(p=>p())}}),[]),v=o.useMemo(()=>({value:(p,C,S)=>{var z;C!==((z=l.current.get(p))==null?void 0:z.value)&&(l.current.set(p,{value:C,keywords:S}),r.current.filtered.items.set(p,A(C,S)),O(2,()=>{B(),x.emit()}))},item:(p,C)=>(a.current.add(p),C&&(s.current.has(C)?s.current.get(C).add(p):s.current.set(C,new Set([p]))),O(3,()=>{q(),B(),r.current.value||P(),x.emit()}),()=>{l.current.delete(p),a.current.delete(p),r.current.filtered.items.delete(p);let S=U();O(4,()=>{q(),S?.getAttribute("id")===p&&P(),x.emit()})}),group:p=>(s.current.has(p)||s.current.set(p,new Set),()=>{l.current.delete(p),s.current.delete(p)}),filter:()=>i.current.shouldFilter,label:c||t["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:g,inputId:D,labelId:T,listInnerRef:I}),[]);function A(p,C){var S,z;let M=(z=(S=i.current)==null?void 0:S.filter)!=null?z:bo;return p?M(p,r.current.search,C):0}function B(){if(!r.current.search||i.current.shouldFilter===!1)return;let p=r.current.filtered.items,C=[];r.current.filtered.groups.forEach(z=>{let M=s.current.get(z),b=0;M.forEach(R=>{let L=p.get(R);b=Math.max(L,b)}),C.push([z,b])});let S=I.current;Q().sort((z,M)=>{var b,R;let L=z.getAttribute("id"),$=M.getAttribute("id");return((b=p.get($))!=null?b:0)-((R=p.get(L))!=null?R:0)}).forEach(z=>{let M=z.closest(it);M?M.appendChild(z.parentElement===M?z:z.closest(`${it} > *`)):S.appendChild(z.parentElement===S?z:z.closest(`${it} > *`))}),C.sort((z,M)=>M[1]-z[1]).forEach(z=>{var M;let b=(M=I.current)==null?void 0:M.querySelector(`${Me}[${Ne}="${encodeURIComponent(z[0])}"]`);b?.parentElement.appendChild(b)})}function P(){let p=Q().find(S=>S.getAttribute("aria-disabled")!=="true"),C=p?.getAttribute(Ne);x.setState("value",C||void 0)}function q(){var p,C,S,z;if(!r.current.search||i.current.shouldFilter===!1){r.current.filtered.count=a.current.size;return}r.current.filtered.groups=new Set;let M=0;for(let b of a.current){let R=(C=(p=l.current.get(b))==null?void 0:p.value)!=null?C:"",L=(z=(S=l.current.get(b))==null?void 0:S.keywords)!=null?z:[],$=A(R,L);r.current.filtered.items.set(b,$),$>0&&M++}for(let[b,R]of s.current)for(let L of R)if(r.current.filtered.items.get(L)>0){r.current.filtered.groups.add(b);break}r.current.filtered.count=M}function W(){var p,C,S;let z=U();z&&(((p=z.parentElement)==null?void 0:p.firstChild)===z&&((S=(C=z.closest(Me))==null?void 0:C.querySelector(go))==null||S.scrollIntoView({block:"nearest"})),z.scrollIntoView({block:"nearest"}))}function U(){var p;return(p=I.current)==null?void 0:p.querySelector(`${fn}[aria-selected="true"]`)}function Q(){var p;return Array.from(((p=I.current)==null?void 0:p.querySelectorAll(Gt))||[])}function _(p){let C=Q()[p];C&&x.setState("value",C.getAttribute(Ne))}function X(p){var C;let S=U(),z=Q(),M=z.findIndex(R=>R===S),b=z[M+p];(C=i.current)!=null&&C.loop&&(b=M+p<0?z[z.length-1]:M+p===z.length?z[0]:z[M+p]),b&&x.setState("value",b.getAttribute(Ne))}function J(p){let C=U(),S=C?.closest(Me),z;for(;S&&!z;)S=p>0?Co(S,Me):Eo(S,Me),z=S?.querySelector(Gt);z?x.setState("value",z.getAttribute(Ne)):X(p)}let G=()=>_(Q().length-1),le=p=>{p.preventDefault(),p.metaKey?G():p.altKey?J(1):X(1)},N=p=>{p.preventDefault(),p.metaKey?_(0):p.altKey?J(-1):X(-1)};return o.createElement(V.div,{ref:n,tabIndex:-1,...h,"cmdk-root":"",onKeyDown:p=>{var C;(C=h.onKeyDown)==null||C.call(h,p);let S=p.nativeEvent.isComposing||p.keyCode===229;if(!(p.defaultPrevented||S))switch(p.key){case"n":case"j":{j&&p.ctrlKey&&le(p);break}case"ArrowDown":{le(p);break}case"p":case"k":{j&&p.ctrlKey&&N(p);break}case"ArrowUp":{N(p);break}case"Home":{p.preventDefault(),_(0);break}case"End":{p.preventDefault(),G();break}case"Enter":{p.preventDefault();let z=U();if(z){let M=new Event(vt);z.dispatchEvent(M)}}}}},o.createElement("label",{"cmdk-label":"",htmlFor:v.inputId,id:v.labelId,style:Po},c),Ge(t,p=>o.createElement(bn.Provider,{value:x},o.createElement(gn.Provider,{value:v},p))))}),vo=o.forwardRef((t,n)=>{var r,a;let s=re(),l=o.useRef(null),d=o.useContext(vn),i=De(),c=kn(t),u=(a=(r=c.current)==null?void 0:r.forceMount)!=null?a:d?.forceMount;ke(()=>{if(!u)return i.item(s,d?.id)},[u]);let m=yn(s,l,[t.value,t.children,l],t.keywords),f=Mt(),k=pe(O=>O.value&&O.value===m.current),E=pe(O=>u||i.filter()===!1?!0:O.search?O.filtered.items.get(s)>0:!0);o.useEffect(()=>{let O=l.current;if(!(!O||t.disabled))return O.addEventListener(vt,y),()=>O.removeEventListener(vt,y)},[E,t.onSelect,t.disabled]);function y(){var O,x;w(),(x=(O=c.current).onSelect)==null||x.call(O,m.current)}function w(){f.setState("value",m.current,!0)}if(!E)return null;let{disabled:j,value:h,onSelect:g,forceMount:T,keywords:D,...I}=t;return o.createElement(V.div,{ref:fe(l,n),...I,id:s,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!k,"data-disabled":!!j,"data-selected":!!k,onPointerMove:j||i.getDisablePointerSelection()?void 0:w,onClick:j?void 0:y},t.children)}),wo=o.forwardRef((t,n)=>{let{heading:r,children:a,forceMount:s,...l}=t,d=re(),i=o.useRef(null),c=o.useRef(null),u=re(),m=De(),f=pe(E=>s||m.filter()===!1?!0:E.search?E.filtered.groups.has(d):!0);ke(()=>m.group(d),[]),yn(d,i,[t.value,t.heading,c]);let k=o.useMemo(()=>({id:d,forceMount:s}),[s]);return o.createElement(V.div,{ref:fe(i,n),...l,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&o.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),Ge(t,E=>o.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},o.createElement(vn.Provider,{value:k},E))))}),ko=o.forwardRef((t,n)=>{let{alwaysRender:r,...a}=t,s=o.useRef(null),l=pe(d=>!d.search);return!r&&!l?null:o.createElement(V.div,{ref:fe(s,n),...a,"cmdk-separator":"",role:"separator"})}),yo=o.forwardRef((t,n)=>{let{onValueChange:r,...a}=t,s=t.value!=null,l=Mt(),d=pe(u=>u.search),i=pe(u=>u.selectedItemId),c=De();return o.useEffect(()=>{t.value!=null&&l.setState("search",t.value)},[t.value]),o.createElement(V.input,{ref:n,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":i,id:c.inputId,type:"text",value:s?t.value:d,onChange:u=>{s||l.setState("search",u.target.value),r?.(u.target.value)}})}),jo=o.forwardRef((t,n)=>{let{children:r,label:a="Suggestions",...s}=t,l=o.useRef(null),d=o.useRef(null),i=pe(u=>u.selectedItemId),c=De();return o.useEffect(()=>{if(d.current&&l.current){let u=d.current,m=l.current,f,k=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let E=u.offsetHeight;m.style.setProperty("--cmdk-list-height",E.toFixed(1)+"px")})});return k.observe(u),()=>{cancelAnimationFrame(f),k.unobserve(u)}}},[]),o.createElement(V.div,{ref:fe(l,n),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":a,id:c.listId},Ge(t,u=>o.createElement("div",{ref:fe(d,c.listInnerRef),"cmdk-list-sizer":""},u)))}),No=o.forwardRef((t,n)=>{let{open:r,onOpenChange:a,overlayClassName:s,contentClassName:l,container:d,...i}=t;return o.createElement(Or,{open:r,onOpenChange:a},o.createElement(Lr,{container:d},o.createElement(Br,{"cmdk-overlay":"",className:s}),o.createElement($r,{"aria-label":t.label,"cmdk-dialog":"",className:l},o.createElement(wn,{ref:n,...i}))))}),So=o.forwardRef((t,n)=>pe(r=>r.filtered.count===0)?o.createElement(V.div,{ref:n,...t,"cmdk-empty":"",role:"presentation"}):null),zo=o.forwardRef((t,n)=>{let{progress:r,children:a,label:s="Loading...",...l}=t;return o.createElement(V.div,{ref:n,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ge(t,d=>o.createElement("div",{"aria-hidden":!0},d)))}),Ee=Object.assign(wn,{List:jo,Item:vo,Input:yo,Group:wo,Separator:ko,Dialog:No,Empty:So,Loading:zo});function Co(t,n){let r=t.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function Eo(t,n){let r=t.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function kn(t){let n=o.useRef(t);return ke(()=>{n.current=t}),n}var ke=typeof window>"u"?o.useEffect:o.useLayoutEffect;function Se(t){let n=o.useRef();return n.current===void 0&&(n.current=t()),n}function pe(t){let n=Mt(),r=()=>t(n.snapshot());return o.useSyncExternalStore(n.subscribe,r,r)}function yn(t,n,r,a=[]){let s=o.useRef(),l=De();return ke(()=>{var d;let i=(()=>{var u;for(let m of r){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(u=m.current.textContent)==null?void 0:u.trim():s.current}})(),c=a.map(u=>u.trim());l.value(t,i,c),(d=n.current)==null||d.setAttribute(Ne,i),s.current=i}),s}var To=()=>{let[t,n]=o.useState(),r=Se(()=>new Map);return ke(()=>{r.current.forEach(a=>a()),r.current=new Map},[t]),(a,s)=>{r.current.set(a,s),n({})}};function Mo(t){let n=t.type;return typeof n=="function"?n(t.props):"render"in n?n.render(t.props):t}function Ge({asChild:t,children:n},r){return t&&o.isValidElement(n)?o.cloneElement(Mo(n),{ref:n.ref},r(n.props.children)):r(n)}var Po={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Ro({className:t,...n}){return e.jsx(Ee,{"data-slot":"command",className:H("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...n})}function Io({className:t,...n}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(gr,{className:"size-4 shrink-0 opacity-50"}),e.jsx(Ee.Input,{"data-slot":"command-input",className:H("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...n})]})}function Do({className:t,...n}){return e.jsx(Ee.List,{"data-slot":"command-list",className:H("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...n})}function Ao({...t}){return e.jsx(Ee.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function _o({className:t,...n}){return e.jsx(Ee.Group,{"data-slot":"command-group",className:H("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...n})}function Oo({className:t,...n}){return e.jsx(Ee.Item,{"data-slot":"command-item",className:H("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function Lo({isOpen:t,onClose:n,onSubmit:r,initialData:a,selectedDate:s,saving:l}){const{currentUser:d}=Ut(),[i,c]=o.useState({league:"",match:"",teamA:"",teamB:"",startTime:"",startDate:"",channel:"",cdn:"AWS"}),[u,m]=o.useState({leagues:[],channels:[],cdnOptions:[]}),[f,k]=o.useState(!1);o.useEffect(()=>{const h=or.subscribeConfigs(g=>m(g));return()=>h()},[]),o.useEffect(()=>{t&&c(a?{league:a.league||"",match:a.match||a.title||"",teamA:a.teamA||"",teamB:a.teamB||"",startTime:a.startTime||"",startDate:a.startDate||"",channel:a.channel||a.liveChannel||"",cdn:a.cdn||"AWS"}:{league:"",match:"",teamA:"",teamB:"",startTime:"",startDate:s||new Date().toISOString().split("T")[0],channel:"",cdn:"AWS"})},[t,a,s]);const E=h=>{let g={...i,match:h};const D=[" vs "," VS "," Vs "," - "," v "].find(I=>h.includes(I));if(D){const I=h.split(D);I.length>=2&&(g.teamA=I[0].trim(),g.teamB=I.slice(1).join(D).trim())}c(g)},y=h=>{h.preventDefault();const T=(typeof d=="object"?d?.name:d)||"System",D={...i,...a?{updatedBy:T}:{createdBy:T}};r(D)},w=i.teamA&&i.teamB&&i.startDate&&i.startTime,j=({children:h,icon:g})=>e.jsxs(Je,{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-500 mb-1.5 flex items-center gap-1.5",children:[g&&e.jsx(g,{size:12}),h]});return e.jsx(is,{open:t,onOpenChange:n,children:e.jsx(us,{showCloseButton:!1,className:"sm:max-w-[700px] p-0 gap-0 overflow-hidden bg-white dark:bg-[#09090b] border-zinc-200 dark:border-zinc-800 shadow-2xl block",children:e.jsxs("form",{id:"match-form",onSubmit:y,children:[e.jsxs("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/50 border-b border-zinc-100 dark:border-zinc-800 p-6 pb-10 relative overflow-hidden",children:[e.jsx(ps,{className:"mb-6 relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs(ms,{className:"text-xl font-bold tracking-tight flex items-center gap-2",children:[a?"Edit Match Details":"Create New Match",a&&e.jsx(qa,{variant:"secondary",className:"px-2 py-0 h-4 text-[9px] uppercase font-black",children:"Updating"})]})}),e.jsx(cs,{asChild:!0,children:e.jsx(Te,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors",children:e.jsx(Ie,{size:16})})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2 relative z-10",children:[e.jsx("div",{className:"w-full md:w-[140px] shrink-0",children:e.jsxs(et,{value:i.league,onValueChange:h=>c({...i,league:h}),children:[e.jsx(rt,{className:"bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 h-10 shadow-sm text-[11px] font-bold",children:e.jsx(tt,{placeholder:"League"})}),e.jsx(nt,{children:u.leagues.map(h=>e.jsx(at,{value:h,className:"text-xs",children:h},h))})]})}),e.jsxs("div",{className:"flex-1 w-full relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:e.jsx(br,{size:14,className:"text-indigo-500 fill-indigo-500/20"})}),e.jsx(Xe,{placeholder:"Paste details to auto-fill...",value:i.match,onChange:h=>E(h.target.value),className:"pl-9 h-10 bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 shadow-sm focus-visible:ring-indigo-500 text-xs font-medium"})]})]})]}),e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"relative -mt-14 bg-white dark:bg-zinc-950 rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-xl p-5 md:p-6 mx-2",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsxs("div",{className:"flex-1 w-full space-y-2",children:[e.jsx(Je,{className:"text-[10px] font-black text-zinc-400 text-center block uppercase tracking-widest",children:"Home Team"}),e.jsx(Xe,{value:i.teamA,onChange:h=>c({...i,teamA:h.target.value}),placeholder:"Team A",className:"h-10 text-center text-base font-bold bg-zinc-50 dark:bg-zinc-900 border-transparent focus:bg-white dark:focus:bg-black focus:border-indigo-500 transition-all rounded-xl"})]}),e.jsx("div",{className:"shrink-0 flex items-center justify-center w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 font-black text-[10px] border border-zinc-200 dark:border-zinc-700 shadow-sm z-10",children:"VS"}),e.jsxs("div",{className:"flex-1 w-full space-y-2",children:[e.jsx(Je,{className:"text-[10px] font-black text-zinc-400 text-center block uppercase tracking-widest",children:"Away Team"}),e.jsx(Xe,{value:i.teamB,onChange:h=>c({...i,teamB:h.target.value}),placeholder:"Team B",className:"h-10 text-center text-base font-bold bg-zinc-50 dark:bg-zinc-900 border-transparent focus:bg-white dark:focus:bg-black focus:border-red-500 transition-all rounded-xl"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch",children:[e.jsxs("div",{className:"space-y-4 p-4 rounded-2xl bg-zinc-50/50 dark:bg-zinc-900/30 border border-zinc-100 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-zinc-100/50 dark:border-zinc-800/50",children:[e.jsx(Rt,{size:16,className:"text-zinc-500"}),e.jsx("span",{className:"text-sm font-semibold tracking-tight",children:"Schedule & Source"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(j,{icon:En,children:"Kick-off Date"}),e.jsxs(dt,{children:[e.jsx(ut,{asChild:!0,children:e.jsx(Te,{variant:"outline",className:H("w-full h-10 justify-start text-[11px] font-bold bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 shadow-sm",!i.startDate&&"text-muted-foreground"),children:e.jsx("span",{className:"truncate",children:i.startDate?ge(Ot(i.startDate),"dd MMM yyyy"):"Pick date"})})}),e.jsx(pt,{className:"w-auto p-0",align:"start",children:e.jsx(hr,{mode:"single",selected:i.startDate?Ot(i.startDate):void 0,onSelect:h=>h&&c({...i,startDate:ge(h,"yyyy-MM-dd")}),initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(j,{icon:Be,children:"Kick-off Time"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(et,{value:i.startTime?.split(":")[0]||"00",onValueChange:h=>c({...i,startTime:`${h}:${i.startTime?.split(":")[1]||"00"}`}),children:[e.jsx(rt,{className:"h-10 text-[11px] font-bold bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 shadow-sm",children:e.jsx(tt,{placeholder:"HH"})}),e.jsx(nt,{position:"popper",className:"h-48",children:Array.from({length:24},(h,g)=>g.toString().padStart(2,"0")).map(h=>e.jsx(at,{value:h,children:h},h))})]}),e.jsx("span",{className:"text-zinc-400 font-bold",children:":"}),e.jsxs(et,{value:i.startTime?.split(":")[1]||"00",onValueChange:h=>c({...i,startTime:`${i.startTime?.split(":")[0]||"00"}:${h}`}),children:[e.jsx(rt,{className:"h-10 text-[11px] font-bold bg-white dark:bg-black border-zinc-200 dark:border-zinc-800 shadow-sm",children:e.jsx(tt,{placeholder:"MM"})}),e.jsx(nt,{position:"popper",className:"h-48",children:["00","05","10","15","20","25","30","35","40","45","50","55"].map(h=>e.jsx(at,{value:h,children:h},h))})]})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{icon:ea,children:"Channel Source"}),e.jsxs(dt,{open:f,onOpenChange:k,children:[e.jsx(ut,{asChild:!0,children:e.jsxs(Te,{variant:"outline",role:"combobox","aria-expanded":f,className:"w-full justify-between h-10 text-xs",children:[i.channel?i.channel:"Select channel source...",e.jsx(ma,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(pt,{className:"w-[300px] p-0",children:e.jsxs(Ro,{children:[e.jsx(Io,{placeholder:"Search channel..."}),e.jsxs(Do,{children:[e.jsx(Ao,{children:"No channel found."}),e.jsx(_o,{children:u.channels.map(h=>e.jsxs(Oo,{value:h,onSelect:g=>{c({...i,channel:g===i.channel?"":g}),k(!1)},children:[e.jsx(ie,{className:H("mr-2 h-4 w-4",i.channel===h?"opacity-100":"opacity-0")}),h]},h))})]})]})})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 rounded-2xl bg-zinc-50/50 dark:bg-zinc-900/30 border border-zinc-100 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-zinc-100/50 dark:border-zinc-800/50",children:[e.jsx(nr,{size:16,className:"text-zinc-500"}),e.jsx("span",{className:"text-sm font-semibold tracking-tight",children:"Distribution (CDN)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.cdnOptions.map(h=>e.jsxs("div",{onClick:()=>c({...i,cdn:h.id}),className:H("cursor-pointer rounded-lg border p-3 flex flex-col gap-2 transition-all hover:border-zinc-400",i.cdn===h.id?"bg-zinc-50 dark:bg-zinc-900 border-zinc-900 dark:border-zinc-100 shadow-sm":"bg-white dark:bg-zinc-950 border-zinc-200 dark:border-zinc-800"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:H("w-2 h-2 rounded-full",h.color||"bg-zinc-400")}),i.cdn===h.id&&e.jsx(ie,{size:12,className:"text-zinc-900 dark:text-zinc-100"})]}),e.jsx("span",{className:"text-xs font-bold truncate",children:h.label})]},h.id)),e.jsxs(Tn,{to:"/settings/config",className:"flex flex-col items-center justify-center gap-1 rounded-lg border border-dashed border-zinc-300 dark:border-zinc-700 p-2 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500 hover:bg-indigo-50/50 transition-colors",children:[e.jsx(Rt,{size:14}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Manage"})]})]})]})]})]}),e.jsxs(xs,{className:"px-6 py-4 bg-zinc-50/50 dark:bg-zinc-900/50 border-t border-zinc-100 dark:border-zinc-800",children:[e.jsx(Te,{type:"button",variant:"outline",onClick:n,disabled:l,className:"h-10",children:"Cancel"}),e.jsxs(Te,{type:"submit",disabled:l||!w,className:H("h-10 min-w-[140px] font-bold transition-all",a?"bg-emerald-600 hover:bg-emerald-700":""),children:[l?e.jsx(wt,{className:"mr-2 h-4 w-4 animate-spin"}):a?e.jsx(ie,{className:"mr-2 h-4 w-4"}):e.jsx(cr,{className:"mr-2 h-4 w-4"}),l?"Processing...":a?"Update Match":"Create Match"]})]})]})})})}const Bo="https://script.google.com/macros/s/AKfycbzbW8G0iM3zGwl7QNaL1mX6oJtqWv3yjRNfXR_gPHSjzY5wm-WjHl3xpVu9oU71si6hhQ/exec",$o={exportCombinedMatches:async(t,n,r,a)=>{const s={action:"export_combined_matches",date:t,headers:n,startRows:r,endRows:a};try{return await fetch(Bo,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(s)}),console.log("✅ Export request sent successfully"),!0}catch(l){throw console.error("❌ Export Error:",l),l}}},Wt=["No.","League","Match","Time","ECS Sport","ECS Ent","API Huawei","WWW & API Peak","CDN","Channel","Req Peak","Req Total","BW Peak","BW Total","Viewers","Score","Start","End"];function Fo({matches:t,isOpen:n,onClose:r}){const[a,s]=o.useState(new Set),[l,d]=o.useState("end_stat"),{toast:i}=Le(),[c,u]=o.useState("table"),[m,f]=o.useState(!1);o.useEffect(()=>{n&&t?.length>0&&s(new Set(t.map(x=>x.id)))},[n,t]);const k=o.useMemo(()=>t?t.map((x,v)=>{const A=l==="start_stat"?"startStats":"endStats",B=x[A]||{};return{...x,...B,originalNo:v+1,hasStats:!!x[A]}}):[],[t,l]),E=x=>{try{const v=je(x||"0");return he(v)||"0"}catch{return"0"}},y=x=>{try{const v=x?.val??x??0,A=x?.unit||"GB";return Pe(v,A)?.toLocaleString("en-US",{maximumFractionDigits:4})||"0"}catch{return"0"}},w=x=>{const v={no:x.originalNo,league:x.league||x.calendar||"-",title:x.teamA&&x.teamB?`${x.teamA} vs ${x.teamB}`:x.title||x.match||"-",time:x.startTime||"-",ecsSport:ze(x.ecsSport,2)||"0.00 %",ecsEnt:ze(x.ecsEntitlement,2)||"0.00 %",api:ze(x.apiHuawei,2)||"0.00 %",reqPeak:E(x.requestPeak),viewers:E(x.muxViewerUniq),score:x.muxScore||"0",start:x.rangeStart||"-",end:x.rangeEnd||"-"},A=[];return x.cdn==="Multi CDN"&&Array.isArray(x.cdnDetails)&&x.cdnDetails.length>0?x.cdnDetails.forEach((P,q)=>{A.push({id:`${x.id}-cdn-${q}`,matchId:x.id,hasStats:x.hasStats,cells:[v.no,v.league,v.title,v.time,v.ecsSport,v.ecsEnt,v.api,v.reqPeak,P.provider||"Unknown",P.key||"-",E(P.reqPeakMin),E(P.reqTotal),y(P.bwPeakGbps),y(P.bandwidth),v.viewers,v.score,v.start,v.end]})}):A.push({id:x.id,matchId:x.id,hasStats:x.hasStats,cells:[v.no,v.league,v.title,v.time,v.ecsSport,v.ecsEnt,v.api,v.reqPeak,x.cdn||"-",x.liveChannel||x.channel||"-",E(x.reqPeakMin),E(x.reqTotal),y(x.bwPeakGbps),y(x.bandwidth),v.viewers,v.score,v.start,v.end]}),A},j=o.useMemo(()=>k.flatMap(x=>w(x)),[k]),h=o.useMemo(()=>j.filter(x=>a.has(x.matchId)),[j,a]),g=x=>{const v=new Set(a);v.has(x)?v.delete(x):v.add(x),s(v)},T=()=>{a.size===t?.length?s(new Set):s(new Set(t.map(x=>x.id)))},D=(x=!1)=>{const v=x?j:h;if(v.length===0){i({title:"Copy Failed",description:"No data to copy",variant:"destructive"});return}const A=v.map(B=>B.cells.join("	")).join(`
`);navigator.clipboard.writeText(A).then(()=>{i({title:"Success",description:`Copied ${v.length} rows.`,variant:"success"})})},I=x=>{const v=x==="start_stat"?"startStats":"endStats",A=t.map((P,q)=>({...P,...P[v]||{},originalNo:q+1,hasStats:!!P[v]}));return(a.size>0?A.filter(P=>a.has(P.id)):A).flatMap(P=>w(P).map(W=>W.cells))},O=async(x="all")=>{if((a.size>0?h:j).length===0){i({title:"No Data",description:"No matches selected to export.",variant:"destructive"});return}f(!0);try{const A=ge(new Date,"dd-MM-yyyy");let B=[],P=[];(x==="all"||x==="start")&&(B=I("start_stat")),(x==="all"||x==="end")&&(P=I("end_stat")),await $o.exportCombinedMatches(A,Wt,B,P),i({title:"Export Success!",description:`Sent ${x==="all"?"All":x==="start"?"Start":"End"} stats for ${a.size>0?a.size:t.length} matches.`,variant:"default",className:"bg-emerald-500 text-white border-none"})}catch(A){console.error(A),i({title:"Export Error",description:"Check console for details.",variant:"destructive"})}finally{f(!1)}};return n?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-2 md:p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-[#080808] w-full max-w-[95vw] rounded-2xl shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-500",children:[e.jsx("div",{className:"shrink-0 px-3 py-2 bg-zinc-50/50 dark:bg-white/[0.01] border-b border-zinc-100 dark:border-zinc-900",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-violet-500 to-purple-600 rounded-lg text-white shadow-md shadow-violet-500/20",children:e.jsx(vr,{size:16})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h2",{className:"text-sm font-black text-zinc-900 dark:text-white uppercase tracking-tighter leading-none",children:["Data ",e.jsx("span",{className:"text-violet-500",children:"Preview"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[8px] font-black text-zinc-400 uppercase tracking-widest leading-none mt-0.5",children:[e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(br,{size:8,className:"text-amber-500"})," ",t?.length||0]}),e.jsx("div",{className:"w-0.5 h-0.5 rounded-full bg-zinc-300 dark:bg-zinc-700"}),e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(ir,{size:8,className:"text-blue-500"})," ",j.length]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"flex items-center p-0.5 bg-zinc-100/80 dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[e.jsx("button",{onClick:()=>d("start_stat"),className:`px-2 py-1 rounded-md text-[8px] font-black uppercase tracking-widest transition-all ${l==="start_stat"?"bg-white dark:bg-zinc-800 text-violet-600 dark:text-violet-400 shadow-sm border border-zinc-200 dark:border-zinc-700":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300"}`,children:"Start"}),e.jsx("button",{onClick:()=>d("end_stat"),className:`px-2 py-1 rounded-md text-[8px] font-black uppercase tracking-widest transition-all ${l==="end_stat"?"bg-white dark:bg-zinc-800 text-violet-600 dark:text-violet-400 shadow-sm border border-zinc-200 dark:border-zinc-700":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300"}`,children:"End"})]}),e.jsx("div",{className:"h-4 w-px bg-zinc-200 dark:bg-zinc-800 mx-0.5"}),e.jsx("button",{onClick:()=>u(c==="table"?"compact":"table"),className:"p-1.5 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-zinc-500 hover:text-black dark:hover:text-white transition-all shadow-sm",children:e.jsx(lr,{size:12})}),e.jsx("button",{onClick:r,className:"p-1.5 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all text-zinc-400 hover:text-red-500",children:e.jsx(Ie,{size:12})})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col bg-zinc-50/30 dark:bg-black/20",children:e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:c==="table"?e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"relative border-b border-zinc-100 dark:border-zinc-900 bg-white dark:bg-[#0a0a0a] min-h-full",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{className:"sticky top-0 z-20 bg-zinc-50/95 dark:bg-zinc-900/95 backdrop-blur-sm border-b border-zinc-200 dark:border-zinc-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"pl-2 py-1.5 text-left w-6",children:e.jsx("button",{onClick:T,className:`w-3.5 h-3.5 rounded-[3px] flex items-center justify-center transition-all border ${a.size===t?.length?"bg-violet-600 border-violet-600 text-white":"bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600 text-transparent hover:border-violet-400"}`,children:e.jsx(ie,{size:9,strokeWidth:4})})}),Wt.map((x,v)=>e.jsx("th",{className:"px-1.5 py-1.5 text-left text-[8px] font-black uppercase tracking-widest text-zinc-400 whitespace-nowrap select-none",children:x},v))]})}),e.jsx("tbody",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:j.map(x=>{const v=a.has(x.matchId);return e.jsxs("tr",{onClick:()=>g(x.matchId),className:`group cursor-pointer transition-colors ${v?"bg-violet-50/50 dark:bg-violet-500/10":"hover:bg-zinc-50 dark:hover:bg-white/[0.02]"}`,children:[e.jsx("td",{className:"pl-2 py-1",children:e.jsx("div",{className:`w-3 h-3 rounded-[3px] flex items-center justify-center transition-all border ${v?"bg-violet-500 border-violet-500 text-white":"bg-transparent border-zinc-300 dark:border-zinc-700 text-transparent group-hover:border-violet-300"}`,children:e.jsx(ie,{size:7,strokeWidth:4})})}),x.cells.map((A,B)=>e.jsx("td",{className:`px-1.5 py-0.5 text-[9px] font-medium whitespace-nowrap font-mono ${v?"text-violet-700 dark:text-violet-300 font-bold":"text-zinc-600 dark:text-zinc-400"}`,children:A},B))]},x.id)})})]})})}):e.jsx("div",{className:"p-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:k.map(x=>{const v=a.has(x.id);return e.jsx("div",{onClick:()=>g(x.id),className:`group relative p-2.5 rounded-lg border transition-all duration-200 cursor-pointer ${v?"border-violet-500 bg-violet-50/50 dark:bg-violet-500/10 shadow-sm":"border-zinc-200 dark:border-zinc-800 bg-white dark:bg-[#0c0c0e] hover:border-violet-300"}`,children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[7px] font-black uppercase text-zinc-400 tracking-widest truncate max-w-[100px]",children:x.league||x.calendar}),v&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-violet-500 flex items-center justify-center text-white",children:e.jsx(ie,{size:8,strokeWidth:3})})]}),e.jsx("h4",{className:`text-[10px] font-bold tracking-tight leading-tight line-clamp-1 ${v?"text-violet-700 dark:text-violet-300":"text-zinc-700 dark:text-zinc-300"}`,children:x.teamA&&x.teamB?`${x.teamA} vs ${x.teamB}`:x.title||x.match||"-"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:e.jsx("div",{className:"px-1.5 py-0.5 rounded bg-zinc-100 dark:bg-zinc-800 text-[8px] font-mono font-bold text-zinc-500 border border-zinc-200 dark:border-zinc-700",children:x.startTime||"-"})})]})},x.id)})})})}),e.jsxs("div",{className:"shrink-0 px-3 py-2 bg-white dark:bg-[#080808] border-t border-zinc-100 dark:border-zinc-900 flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("p",{className:"text-[9px] font-black text-zinc-900 dark:text-white uppercase tracking-widest leading-none flex items-center gap-1.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),h.length," Selected"]})}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"flex items-center p-0.5 bg-zinc-100 dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 mr-2",children:[e.jsx("button",{onClick:()=>O("start"),disabled:m,className:"px-3 py-1.5 text-[8px] font-black uppercase tracking-widest text-zinc-500 hover:text-emerald-600 hover:bg-white dark:hover:bg-zinc-800 rounded-md transition-all disabled:opacity-50",title:"Export ONLY Start stats",children:"Ex. Start"}),e.jsx("div",{className:"w-px h-3 bg-zinc-300 dark:bg-zinc-700 mx-0.5"}),e.jsx("button",{onClick:()=>O("end"),disabled:m,className:"px-3 py-1.5 text-[8px] font-black uppercase tracking-widest text-zinc-500 hover:text-emerald-600 hover:bg-white dark:hover:bg-zinc-800 rounded-md transition-all disabled:opacity-50",title:"Export ONLY End stats",children:"Ex. End"}),e.jsx("div",{className:"w-px h-3 bg-zinc-300 dark:bg-zinc-700 mx-0.5"}),e.jsxs("button",{onClick:()=>O("all"),disabled:m,className:"flex items-center gap-1.5 px-3 py-1.5 bg-emerald-500 text-white rounded-md text-[8px] font-black uppercase tracking-widest shadow-sm hover:bg-emerald-600 transition-all disabled:opacity-50",title:"Export BOTH Start & End",children:[m?e.jsx(wt,{size:10,className:"animate-spin"}):e.jsx(ta,{size:10}),"All"]})]}),e.jsx("div",{className:"h-4 w-px bg-zinc-200 dark:bg-zinc-800"}),e.jsx("button",{onClick:()=>D(!0),className:"px-3 py-1.5 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 text-zinc-400 hover:text-black dark:hover:text-white rounded-md text-[8px] font-black uppercase tracking-widest transition-all hover:bg-zinc-100 dark:hover:bg-zinc-800",children:"Copy All"}),e.jsxs("button",{onClick:()=>D(!1),disabled:h.length===0,className:"flex items-center justify-center gap-1.5 px-4 py-1.5 bg-black dark:bg-white text-white dark:text-black rounded-md text-[8px] font-black uppercase tracking-widest shadow-lg hover:shadow-violet-500/20 hover:scale-105 active:scale-95 transition-all disabled:opacity-30 disabled:pointer-events-none",children:[e.jsx(ar,{size:10}),l==="start_stat"?"Copy Start":"Copy End"]})]})]})]})}):null}const Ae=({label:t,icon:n,count:r,active:a,onClick:s,isLive:l})=>e.jsxs("button",{onClick:s,title:t,className:`
      flex items-center gap-1.5 px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all whitespace-nowrap border
      ${a?l?"bg-red-500 text-white border-red-500 shadow-md shadow-red-500/20":"bg-zinc-900 dark:bg-white text-white dark:text-black border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-900 text-zinc-500 border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700"}
    `,children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[l&&a&&e.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-white opacity-30 animate-ping"}),e.jsx(n,{size:14,className:l&&a?"animate-pulse":""})]}),e.jsx("span",{className:"hidden lg:inline",children:t}),e.jsx("span",{className:`px-1.5 py-0.5 rounded-sm text-[9px] min-w-[18px] text-center ${a?"bg-white/20 text-white dark:text-black":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:r})]}),qo=()=>{const[t,n]=o.useState(new Date);return o.useEffect(()=>{const r=setInterval(()=>n(new Date),1e3);return()=>clearInterval(r)},[]),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-md",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-mono font-bold text-zinc-700 dark:text-zinc-300 min-w-[60px]",children:ge(t,"HH:mm:ss")})]})},Vo=o.memo(({matches:t,loading:n,setSelectedMatch:r,setEditingMatch:a,setIsManualModalOpen:s,setDeleteConfirm:l})=>n?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[1,2,3,4].map(d=>e.jsx("div",{className:"h-32 bg-zinc-100 dark:bg-zinc-900 rounded-xl animate-pulse"},d))}):t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 opacity-60",children:[e.jsx(aa,{size:48,className:"text-zinc-300",strokeWidth:1}),e.jsx("p",{className:"text-sm font-medium text-zinc-500",children:"No matches found"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 pb-10",children:t.map(d=>e.jsx(In,{match:d,onClick:()=>r(d),onEdit:i=>{a(i),s(!0)},onDelete:i=>l({isOpen:!0,id:i})},d.id))}));function yi(){const{selectedDate:t,setSelectedDate:n,dateStr:r,matches:a,loading:s,stats:l,searchQuery:d,setSearchQuery:i,filterType:c,setFilterType:u,selectedMatch:m,setSelectedMatch:f,isManualModalOpen:k,setIsManualModalOpen:E,editingMatch:y,setEditingMatch:w,saving:j,deleteConfirm:h,setDeleteConfirm:g,isDataPreviewOpen:T,setIsDataPreviewOpen:D,notificationEnabled:I,handlePrevDay:O,handleNextDay:x,handleGoToday:v,handleSaveMatch:A,handleDeleteMatch:B,requestNotifyPermission:P}=Ea(),q=o.useDeferredValue(d),[W,U]=o.useState(!1),Q=o.useMemo(()=>a.filter(_=>{const X=q.toLowerCase(),G=`${_.teamA||""} ${_.teamB||""} ${_.league||""} ${_.match||""} ${_.title||""}`.toLowerCase().includes(X);return c==="ALL"&&W&&_.statusDisplay?.includes("Finished")?!1:c==="LIVE"?G&&_.isLiveTime:c==="FINISHED"?G&&_.statusDisplay?.includes("Finished"):c==="PENDING"?G&&_.statusDisplay==="Upcoming":G}),[a,q,c,W]);return e.jsxs("div",{className:"flex flex-col h-full w-full bg-white dark:bg-black overflow-hidden",children:[m&&e.jsx(_a,{isOpen:!!m,onClose:()=>f(null),matchData:m}),e.jsx(Lo,{isOpen:k,onClose:()=>{E(!1),w(null)},onSubmit:A,initialData:y,selectedDate:r,saving:j}),e.jsx(Kt,{isOpen:h.isOpen,onClose:()=>g({isOpen:!1,id:null}),title:"Delete Match?",message:"Are you sure? This cannot be undone.",onConfirm:B,isDanger:!0}),e.jsx(Fo,{matches:a,isOpen:T,onClose:()=>D(!1)}),e.jsx("header",{className:"shrink-0 bg-white dark:bg-[#09090b] border-b border-zinc-200 dark:border-zinc-800 p-3 shadow-sm z-20 transition-all",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center bg-zinc-100 dark:bg-zinc-900/50 p-0.5 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[e.jsx("button",{onClick:O,className:"w-7 h-7 flex items-center justify-center hover:bg-white dark:hover:bg-zinc-800 rounded-md text-zinc-500 hover:text-black dark:hover:text-white transition-all",children:e.jsx(qn,{size:16})}),e.jsxs(dt,{children:[e.jsx(ut,{asChild:!0,children:e.jsx("button",{className:"h-7 px-3 text-xs font-bold text-zinc-700 dark:text-zinc-200 min-w-[120px] text-center hover:text-blue-600 transition-colors",children:ge(t,"EEE, dd MMM yyyy")})}),e.jsx(pt,{className:"w-auto p-0",align:"start",children:e.jsx(hr,{mode:"single",selected:t,onSelect:_=>_&&n(_),initialFocus:!0})})]}),e.jsx("button",{onClick:x,className:"w-7 h-7 flex items-center justify-center hover:bg-white dark:hover:bg-zinc-800 rounded-md text-zinc-500 hover:text-black dark:hover:text-white transition-all",children:e.jsx(Vn,{size:16})}),e.jsx("div",{className:"w-px h-4 bg-zinc-300 dark:bg-zinc-700 mx-1"}),e.jsxs("button",{onClick:v,disabled:Bt(t),className:`px-3 h-7 text-[10px] font-black uppercase rounded-md transition-all flex items-center gap-1.5 ${Bt(t)?"text-zinc-400 cursor-default":"bg-blue-600 text-white hover:bg-blue-700 shadow-sm"}`,children:[e.jsx(pa,{size:14}),e.jsx("span",{className:"hidden lg:inline",children:"Today"})]}),e.jsx("div",{className:"w-px h-4 bg-zinc-200 dark:bg-zinc-800 mx-1"}),e.jsx("button",{onClick:()=>U(!W),className:`w-7 h-7 flex items-center justify-center rounded-md transition-all ${W?"bg-amber-500 text-white shadow-sm":"text-zinc-400 hover:text-blue-600"}`,children:W?e.jsx(Rn,{size:14}):e.jsx(ra,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(qo,{})}),e.jsx("div",{className:"h-6 w-px bg-zinc-200 dark:bg-zinc-800 mx-1 hidden sm:block"}),e.jsx("button",{onClick:P,className:`w-8 h-8 flex items-center justify-center rounded-md border transition-all ${I?"bg-emerald-50 border-emerald-200 text-emerald-600":"bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 text-zinc-400"}`,children:I?e.jsx(da,{size:14}):e.jsx(la,{size:14})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"relative group flex-1 sm:flex-none sm:w-64",children:[e.jsx(gr,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Search...",value:d,onChange:_=>i(_.target.value),className:"w-full h-8 pl-9 pr-3 bg-zinc-100 dark:bg-zinc-900/50 border-none rounded-md text-xs font-medium focus:ring-1 focus:ring-blue-500 transition-all placeholder:text-zinc-500"})]}),e.jsx("div",{className:"hidden sm:block w-px h-5 bg-zinc-200 dark:bg-zinc-800"}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1 sm:pb-0 flex-1",children:[e.jsx(Ae,{label:"All",icon:lr,count:l.total,active:c==="ALL",onClick:()=>u("ALL")}),e.jsx("div",{className:"h-4 w-px bg-zinc-200 dark:bg-zinc-800 mx-1 hidden sm:block"}),e.jsx(Ae,{label:"Live",icon:na,count:l.live,active:c==="LIVE",onClick:()=>u("LIVE"),isLive:!0}),e.jsx(Ae,{label:"Upcoming",icon:Be,count:l.pending,active:c==="PENDING",onClick:()=>u("PENDING")}),e.jsx(Ae,{label:"Finished",icon:Jn,count:l.finished,active:c==="FINISHED",onClick:()=>u("FINISHED")})]}),e.jsxs("div",{className:"flex items-center gap-2 border-l pl-2 border-zinc-200 dark:border-zinc-800",children:[e.jsx("button",{onClick:()=>D(!0),className:"w-8 h-8 flex items-center justify-center rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 text-violet-500 hover:bg-violet-50 dark:hover:bg-violet-900/10 transition-colors",children:e.jsx(Yt,{size:14})}),e.jsxs("button",{onClick:()=>{w(null),E(!0)},className:"h-8 px-3 flex items-center gap-1.5 bg-black dark:bg-white text-white dark:text-black rounded-md text-[10px] font-bold hover:opacity-90 transition-opacity shadow-sm whitespace-nowrap",children:[e.jsx(jt,{size:14})," ",e.jsx("span",{className:"hidden lg:inline",children:"Add"})]})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 custom-scrollbar",children:e.jsx(Vo,{matches:Q,loading:s,setSelectedMatch:f,setEditingMatch:w,setIsManualModalOpen:E,setDeleteConfirm:g})})]})}export{yi as default};
