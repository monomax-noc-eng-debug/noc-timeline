import{d as Q,r as a,a7 as G,a8 as X,j as e,a9 as J,aa as q,ab as Y,y as D,u as ee,a as F,b as te,N as se,L as B,B as _,z as M,ac as ie,Z as re,O as ae}from"./index-CDkxVpyL.js";import{c as L,C as ne}from"./configService-BD4Z94ql.js";import{u as ce,T as oe}from"./TimeInput-DdCTDIEQ.js";import{A as de}from"./arrow-left-BMDr9Vtj.js";import{S as U}from"./settings-8m0tr3JQ.js";import{S as le}from"./save-1idTjAku.js";import{T as I,a as ue}from"./tv-w1waPvMI.js";import{T as H}from"./tag-DJ5affvW.js";import{C as xe}from"./chevron-right-C7jt9gz_.js";import{G as me}from"./globe-CW3ERab5.js";import{C as he}from"./circle-check-big-GocMzVxW.js";import{L as be}from"./layers-DgNtJKN-.js";import{S as pe}from"./search-B_qFLBYc.js";import{P as fe,T as ge}from"./trash-2-CUm5-oxb.js";import{L as ke}from"./layout-grid-4-J4Ng0Z.js";const ve=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]],je=Q("layout-panel-top",ve),ze=()=>{const[i,o]=a.useState(!0),[m,r]=a.useState({leagues:[],channels:[],cdnOptions:[],ticketSync:{autoSync:!1,syncTime:"08:00",lastSync:null}}),[n,d]=a.useState({types:[],statuses:[],severities:[],categories:[],subCategories:[]}),[b,h]=a.useState([]),[x,w]=a.useState([]);return a.useEffect(()=>{const p=L.subscribeConfigs(l=>{r(y=>({...y,...l}))}),v=L.subscribeTicketOptions(d),j=L.subscribeTeam(h),z=L.subscribeProjects(w);return setTimeout(()=>o(!1),0),()=>{p(),v(),j(),z()}},[]),{configs:m,setConfigs:r,ticketOptions:n,setTicketOptions:d,team:b,setTeam:h,projects:x,setProjects:w,loading:i}};function we(i){const o=a.useRef({value:i,previous:i});return a.useMemo(()=>(o.current.value!==i&&(o.current.previous=o.current.value,o.current.value=i),o.current.previous),[i])}var A="Switch",[ye]=J(A),[Ne,Ce]=ye(A),$=a.forwardRef((i,o)=>{const{__scopeSwitch:m,name:r,checked:n,defaultChecked:d,required:b,disabled:h,value:x="on",onCheckedChange:w,form:p,...v}=i,[j,z]=a.useState(null),l=G(o,t=>z(t)),y=a.useRef(!1),u=j?p||!!j.closest("form"):!0,[f,c]=X({prop:n,defaultProp:d??!1,onChange:w,caller:A});return e.jsxs(Ne,{scope:m,checked:f,disabled:h,children:[e.jsx(q.button,{type:"button",role:"switch","aria-checked":f,"aria-required":b,"data-state":Z(f),"data-disabled":h?"":void 0,disabled:h,value:x,...v,ref:l,onClick:Y(i.onClick,t=>{c(g=>!g),u&&(y.current=t.isPropagationStopped(),y.current||t.stopPropagation())})}),u&&e.jsx(W,{control:j,bubbles:!y.current,name:r,value:x,checked:f,required:b,disabled:h,form:p,style:{transform:"translateX(-100%)"}})]})});$.displayName=A;var K="SwitchThumb",V=a.forwardRef((i,o)=>{const{__scopeSwitch:m,...r}=i,n=Ce(K,m);return e.jsx(q.span,{"data-state":Z(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:o})});V.displayName=K;var Se="SwitchBubbleInput",W=a.forwardRef(({__scopeSwitch:i,control:o,checked:m,bubbles:r=!0,...n},d)=>{const b=a.useRef(null),h=G(b,d),x=we(m),w=ce(o);return a.useEffect(()=>{const p=b.current;if(!p)return;const v=window.HTMLInputElement.prototype,z=Object.getOwnPropertyDescriptor(v,"checked").set;if(x!==m&&z){const l=new Event("click",{bubbles:r});z.call(p,m),p.dispatchEvent(l)}},[x,m,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:m,...n,tabIndex:-1,ref:h,style:{...n.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});W.displayName=Se;function Z(i){return i?"checked":"unchecked"}var Te=$,De=V;function Pe({className:i,...o}){return e.jsx(Te,{"data-slot":"switch",className:D("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",i),...o,children:e.jsx(De,{"data-slot":"switch-thumb",className:D("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const T=a.memo(({items:i=[],onAdd:o,onRemove:m,onUpdate:r,canEdit:n,title:d,icon:b,placeholder:h="Search or Add..."})=>{const[x,w]=a.useState(""),[p,v]=a.useState(null),[j,z]=a.useState(""),{toast:l}=F(),y=a.useMemo(()=>{if(!x)return i.map((t,g)=>({item:t,idx:g}));const c=x.toLowerCase();return i.map((t,g)=>({item:t,idx:g})).filter(({item:t})=>(typeof t=="string"?t:t.label).toLowerCase().includes(c))},[i,x]),u=()=>{const c=x.trim();if(c){if(i.some(t=>(typeof t=="string"?t:t.label).toLowerCase()===c.toLowerCase())){l({variant:"destructive",title:"Duplicate",description:`"${c}" already exists.`});return}o(c),w("")}},f=c=>{const t=j.trim();if(t&&t!==i[c]){if(i.some((g,P)=>P!==c&&(typeof g=="string"?g:g.label).toLowerCase()===t.toLowerCase())){l({variant:"destructive",title:"Duplicate",description:`"${t}" already exists.`});return}r(c,t)}v(null)};return e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"shrink-0 p-4 border-b border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-white dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 rounded-lg shadow-sm",children:e.jsx(b,{size:16,className:"text-zinc-600 dark:text-zinc-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100 uppercase tracking-wide",children:d}),e.jsxs("p",{className:"text-[10px] font-medium text-zinc-400",children:[i.length," Records"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 group",children:[e.jsx(pe,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-[#0078D4] transition-colors"}),e.jsx("input",{value:x,onChange:c=>w(c.target.value),onKeyDown:c=>c.key==="Enter"&&n&&u(),placeholder:h,className:"w-full bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-md pl-9 pr-3 py-2 text-xs font-medium outline-none focus:border-[#0078D4] focus:ring-1 focus:ring-[#0078D4] transition-all placeholder:font-medium"})]}),n&&e.jsx("button",{onClick:u,disabled:!x.trim(),className:"px-3 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-md hover:bg-zinc-800 dark:hover:bg-zinc-200 disabled:opacity-50 transition-colors",children:e.jsx(fe,{size:16})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:y.length>0?y.map(({item:c,idx:t})=>{const g=p===t,P=typeof c=="string"?c:c.label;return e.jsxs("div",{className:"group flex items-center justify-between px-3 py-2 rounded-md hover:bg-zinc-50 dark:hover:bg-zinc-800/50 border border-transparent hover:border-zinc-100 dark:hover:border-zinc-800 transition-all",children:[g?e.jsx("input",{autoFocus:!0,value:j,onChange:s=>z(s.target.value),onBlur:()=>f(t),onKeyDown:s=>{s.key==="Enter"&&f(t),s.key==="Escape"&&v(null)},className:"flex-1 bg-transparent text-xs font-semibold text-[#0078D4] dark:text-[#0078D4] outline-none"}):e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("span",{className:"text-[10px] font-mono text-zinc-300 dark:text-zinc-600 w-6 shrink-0",children:String(t+1).padStart(2,"0")}),e.jsx("span",{onClick:()=>{n&&(v(t),z(P))},className:D("text-xs font-medium truncate cursor-pointer select-none text-zinc-600 dark:text-zinc-300",n&&"hover:text-[#0078D4] dark:hover:text-[#0078D4]"),children:P})]}),n&&!g&&e.jsx("button",{onClick:()=>m(t),className:"opacity-0 group-hover:opacity-100 p-1.5 text-zinc-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-all",children:e.jsx(ge,{size:12})})]},t)}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-300 dark:text-zinc-700 opacity-60",children:[e.jsx(ke,{size:32,strokeWidth:1,className:"mb-2"}),e.jsx("span",{className:"text-xs font-medium",children:"No items found"})]})})]})});function Ke(){const i=ee(),{toast:o}=F(),{currentUser:m}=te(),{configs:r,setConfigs:n,ticketOptions:d,setTicketOptions:b,projects:h,setProjects:x,loading:w}=ze(),[p,v]=a.useState(!1),[j,z]=a.useState(!1),[l,y]=a.useState("broadcast"),u=se(m,[ae.LEAD]),f=a.useCallback(()=>z(!0),[]),c=async()=>{if(u){v(!0);try{await Promise.all([L.updateConfigs(r),L.updateTicketOptions(d),L.updateProjects(h)]),o({title:"Deployed",description:"Changes synced successfully.",className:"bg-emerald-500 text-white border-none font-bold"}),z(!1)}catch(s){o({variant:"destructive",title:"Failed",description:s.message})}finally{v(!1)}}},t=(s,k,C)=>({onAdd:S=>{f(),k(N=>C?{...N,[C]:[...N[C],S]}:[...N,S])},onRemove:S=>{f(),k(N=>C?{...N,[C]:N[C].filter((R,E)=>E!==S)}:N.filter((R,E)=>E!==S))},onUpdate:(S,N)=>{f(),k(R=>C?{...R,[C]:R[C].map((E,O)=>O===S?N:E)}:R.map((E,O)=>O===S?N:E))}}),g={onAdd:s=>{f(),n(k=>({...k,cdnOptions:[...k.cdnOptions,{id:s,label:s,color:"bg-zinc-500"}]}))},onRemove:t(r,n,"cdnOptions").onRemove,onUpdate:(s,k)=>{}};if(w)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx(B,{className:"animate-spin text-zinc-400"})});const P=[{id:"broadcast",label:"Broadcast",icon:I,desc:"Channels, Leagues, CDN"},{id:"tickets",label:"Ticketing",icon:H,desc:"Types, Severity, Status"},{id:"org",label:"Organization",icon:M,desc:"Projects, Teams"},{id:"system",label:"System",icon:U,desc:"Sync, Preferences"}];return e.jsxs("div",{className:"h-screen bg-zinc-50 dark:bg-black flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"shrink-0 h-14 bg-white dark:bg-zinc-950 border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-between px-4 z-40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i(-1),className:"p-2 -ml-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:e.jsx(de,{size:18,className:"text-zinc-500"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-zinc-900 dark:bg-white rounded-lg flex items-center justify-center text-white dark:text-black",children:e.jsx(U,{size:16})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold uppercase tracking-wide text-zinc-900 dark:text-white leading-none",children:"Registry Hub"}),e.jsxs("span",{className:"text-[10px] font-medium text-zinc-400 uppercase tracking-widest",children:[r.leagues?.length+r.channels?.length||0," Records"]})]})]})]}),u&&e.jsxs(_,{onClick:c,disabled:!j||p,className:D("h-9 rounded-md px-6 font-semibold uppercase text-[10px] tracking-widest transition-all",j?"bg-[#0078D4] hover:bg-[#106EBE] text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-400"),children:[p?e.jsx(B,{size:14,className:"animate-spin mr-2"}):e.jsx(le,{size:14,className:"mr-2"}),p?"Saving...":"Commit Changes"]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("nav",{className:"w-64 shrink-0 bg-white dark:bg-zinc-950 border-r border-zinc-200 dark:border-zinc-800 flex flex-col py-4 overflow-y-auto hidden md:flex",children:[e.jsx("div",{className:"px-4 mb-2 text-[10px] font-semibold text-zinc-400 tracking-widest",children:"Domains"}),e.jsx("div",{className:"space-y-1 px-2",children:P.map(s=>e.jsxs("button",{onClick:()=>y(s.id),className:D("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left transition-all",l===s.id?"bg-[#eff6fc] dark:bg-[#0078D4]/20 text-[#0078D4] dark:text-[#0078D4] shadow-sm font-semibold":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-zinc-200"),children:[e.jsx("div",{className:D("p-1.5 rounded-md",l===s.id?"bg-white dark:bg-zinc-900 shadow-sm text-[#0078D4]":"text-zinc-400 dark:text-zinc-500"),children:e.jsx(s.icon,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold uppercase tracking-wide leading-none mb-0.5",children:s.label}),e.jsx("div",{className:"text-[9px] font-medium opacity-70",children:s.desc})]}),l===s.id&&e.jsx(xe,{size:14,className:"ml-auto text-[#0078D4]"})]},s.id))})]}),e.jsx("main",{className:"flex-1 overflow-hidden bg-zinc-50/50 dark:bg-black/50 p-4 md:p-6",children:e.jsxs("div",{className:"h-full w-full max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l==="broadcast"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 h-full",children:[e.jsx(T,{title:"Leagues",icon:ue,items:r.leagues,...t(r,n,"leagues"),canEdit:u}),e.jsx(T,{title:"Channels",icon:I,items:r.channels,...t(r,n,"channels"),canEdit:u,placeholder:"Add Channel..."}),e.jsx(T,{title:"CDN Providers",icon:me,items:r.cdnOptions,...g,canEdit:u,placeholder:"Add Provider..."})]}),l==="tickets"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 h-full",children:[e.jsx(T,{title:"Types",icon:H,items:d.types,...t(d,b,"types"),canEdit:u}),e.jsx(T,{title:"Status",icon:he,items:d.statuses,...t(d,b,"statuses"),canEdit:u}),e.jsx(T,{title:"Severity",icon:ie,items:d.severities,...t(d,b,"severities"),canEdit:u}),e.jsx(T,{title:"Category",icon:be,items:d.categories,...t(d,b,"categories"),canEdit:u})]}),l==="org"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full items-start",children:[e.jsx("div",{className:"h-[500px]",children:e.jsx(T,{title:"Projects / Tenants",icon:je,items:h,...t(h,x),canEdit:u})}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-8 flex flex-col items-center justify-center text-center space-y-4 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center text-[#0078D4] mb-2",children:e.jsx(M,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Team Management"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-2 max-w-sm mx-auto",children:"Configure User Roles, Access Control lists, and Team Member profiles in the dedicated security module."})]}),e.jsx(_,{onClick:()=>window.location.href="/settings/team",className:"mt-4 bg-[#0078D4] hover:bg-[#106EBE] text-white rounded-lg px-8 font-bold uppercase text-xs tracking-widest shadow-sm",children:"Manage Team"})]})]}),l==="system"&&e.jsx("div",{className:"max-w-2xl mx-auto h-full overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50/80 dark:bg-zinc-900/80 flex items-center gap-3",children:[e.jsx(re,{size:18,className:"text-[#0078D4]"}),e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wide text-zinc-700 dark:text-zinc-200",children:"Automated Sync"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:"Google Sheet Sync"}),e.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:"Automatically fetch ticket data daily."})]}),e.jsx(Pe,{checked:r.ticketSync?.autoSync,onCheckedChange:s=>{f(),n(k=>({...k,ticketSync:{...k.ticketSync,autoSync:s}}))},disabled:!u,className:"data-[state=checked]:bg-[#0078D4]"})]}),r.ticketSync?.autoSync&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-100 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{size:16,className:"text-zinc-400"}),e.jsx("span",{className:"text-xs font-bold uppercase text-zinc-600 dark:text-zinc-300",children:"Schedule Time"})]}),e.jsx(oe,{value:r.ticketSync?.syncTime||"08:00",onChange:s=>{f(),n(k=>({...k,ticketSync:{...k.ticketSync,syncTime:s.target.value}}))},className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-md px-2 py-1 text-xs font-bold outline-none w-[100px] focus:border-[#0078D4]"})]})]})]})})]})})]}),e.jsx("div",{className:"md:hidden shrink-0 bg-white dark:bg-zinc-950 border-t border-zinc-200 dark:border-zinc-800 p-2 flex justify-between",children:P.map(s=>e.jsxs("button",{onClick:()=>y(s.id),className:D("flex flex-col items-center justify-center p-2 rounded-md transition-all flex-1",l===s.id?"text-[#0078D4] dark:text-white bg-zinc-50 dark:bg-zinc-900":"text-zinc-400"),children:[e.jsx(s.icon,{size:20,className:D("mb-1",l===s.id&&"fill-current opacity-20")}),e.jsx("span",{className:"text-[9px] font-medium",children:s.label.split(" ")[0]})]},s.id))})]})}export{Ke as default};
