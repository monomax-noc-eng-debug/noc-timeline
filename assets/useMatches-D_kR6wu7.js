import{c as g,r as M,J as D}from"./index-B5gZUy_b.js";import{c as p,t as y,m as k,a as w,i as S,f as q}from"./format-B568ns5f.js";import{i as I}from"./isSameMonth-CRYCS6Ki.js";import{u as v,Q as F}from"./useBaseQuery-Bu4CR-PA.js";import{c as $,d as L,q as l,w as m,a as u,l as _,m as T}from"./firebaseConfig-hLvP2kJq.js";const E=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],V=g("file-spreadsheet",E);const Q=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],J=g("radio",Q);function b(t,a){return v(t,F)}function j(t,a,s){return p(t,+y(t)+a)}function K(t,a,s){return j(t,a*k)}function x(t){return p(t,Date.now())}function z(t){return a=>{const r=(t?Math[t]:Math.trunc)(a);return r===0?0:r}}function B(t,a){return+y(t)-+y(a)}function P(t,a,s){const r=B(t,a)/w;return z(s?.roundingMethod)(r)}function W(t,a){return I(p(t,t),x(t))}const N=async({queryKey:t})=>{const[a,{dateFilter:s,dateRange:r,limit:f}]=t,o=$(L,"schedules");let n;try{if(s){let i=s;if(s instanceof Date)if(S(s))i=q(s,"yyyy-MM-dd");else return[];n=l(o,m("startDate","==",i),u("startTime","asc"))}else r?.start&&r?.end?n=l(o,m("startDate",">=",r.start),m("startDate","<=",r.end),u("startDate","asc"),u("startTime","asc")):n=l(o,u("startDate","desc"),u("startTime","asc"),_(f));return(await T(n)).docs.map(i=>{const e=i.data();return{id:i.id,...e,hasStartStat:!!e.hasStartStat,hasEndStat:!!e.hasEndStat,_searchString:`${e.teamA||""} ${e.teamB||""} ${e.match||""} ${e.title||""} ${e.league||""} ${e.channel||""}`.toLowerCase()}})}catch(c){throw console.error("Error fetching matches:",c),c}},G=(t,a,s=!1)=>{const[r,f]=M.useState(100),o=b({queryKey:["matches",{dateFilter:t,dateRange:a,limit:r}],queryFn:N,placeholderData:D,staleTime:s?1e3*20:1e3*60*5,refetchInterval:s?1e3*30:!1,refetchOnWindowFocus:s}),n=o.data||[],c=M.useMemo(()=>{if(!n.length)return[];const e={};for(const h of n){const d=h.startDate;e[d]||(e[d]=[]),e[d].push(h)}return Object.entries(e).sort((h,d)=>new Date(h[0])-new Date(d[0]))},[n]),i=()=>{!t&&!a&&f(e=>e+50)};return{matches:n,groupedData:c,loading:o.isLoading,isFetching:o.isFetching,loadMore:i,hasMore:!0,refetch:o.refetch}};export{V as F,J as R,K as a,P as d,W as i,G as u};
