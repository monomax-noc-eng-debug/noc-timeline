import{e as G,r as f,j as e,J as ie,F as Ae,P as se,X as ne,l as _,i as O,v as xe,ac as ae,ab as Re,b as Le,a as Ie,s as te,z as Fe,m as pe,o as Be,f as W,ad as $e,T as K,D as fe,K as Ge,L as De}from"./index-DeB0UNQi.js";import{a as ge,T as be,d as B,e as re,p as Ee,g as _e,C as he}from"./formatters-BaVPdGTo.js";import{G as Oe}from"./gauge-C00xYb0O.js";import{A as Ue}from"./arrow-right-BKpbOeSf.js";import{G as He}from"./globe-Cuqv8OAl.js";import{T as le,P as ve}from"./trash-2-I2HcWu5d.js";import{C as Ve}from"./copy-Fz2oJR8g.js";import{c as We}from"./configService-LpWpRo6h.js";import{L as Ke}from"./layers-CqHJUMeP.js";import{S as Qe}from"./save-C3fkMG-Q.js";import"./format-DGoV6LV2.js";import"./setYear-D3UzLEUF.js";import"./chevron-down-C0MtzhZK.js";import"./rotate-ccw-BIVUIMXV.js";const Je=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],Ye=G("arrow-left-right",Je);const Xe=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],Ze=G("eraser",Xe);const et=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],tt=G("monitor-play",et);const rt=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ke=G("server",rt);const st=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nt=G("settings",st);const at=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],we=G("wand-sparkles",at);const it=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],je=G("wifi",it);function lt({form:t,setForm:u,isMultiCdnMode:n,toggleCdnMode:m,cdnList:r,onAdd:o,onRemove:v,onUpdate:g,onAutoFix:h,statType:x,masterConfigs:s={channels:[],cdnOptions:[]},canEdit:l=!0}){const[p,z]=f.useState(!1),y=c=>t.cdn===c;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400",children:[e.jsx(Oe,{size:14,className:"text-orange-500"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Configuration"})]})}),e.jsxs("div",{className:"group bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-sm overflow-hidden flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-zinc-100 dark:divide-zinc-800",children:[e.jsxs("div",{className:"flex-1 p-2 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx(ge,{size:14,className:"text-zinc-400 shrink-0"}),e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none mb-0.5",children:"Start"}),e.jsx(be,{value:t.rangeStart,onChange:c=>u({...t,rangeStart:c.target.value}),disabled:!l,showIcon:!1,className:"bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none w-[70px] h-6 disabled:opacity-50",placeholder:"00:00"})]}),e.jsx(Ue,{size:12,className:"text-zinc-300 dark:text-zinc-700"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none mb-0.5",children:["End ",x==="START"?"(+15m)":"(+2h)"]}),e.jsx(be,{value:t.rangeEnd,onChange:c=>u({...t,rangeEnd:c.target.value}),disabled:!l,showIcon:!1,className:"bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none w-[70px] h-6 disabled:opacity-50",placeholder:"00:00"})]})]})]}),h&&l&&e.jsx("button",{onClick:h,title:"Auto Calculate Time",className:"shrink-0 p-1.5 rounded-md text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors",children:e.jsx(we,{size:12})})]}),e.jsxs("div",{className:"flex-[1.5] p-2 flex items-center gap-3 relative",children:[e.jsx(tt,{size:14,className:"text-zinc-400 shrink-0"}),e.jsxs("div",{className:"w-full relative",children:[e.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase leading-none block mb-0.5",children:"Channel Source"}),e.jsx("input",{type:"text",value:t.liveChannel,onChange:c=>u({...t,liveChannel:c.target.value}),onFocus:()=>l&&z(!0),onBlur:()=>setTimeout(()=>z(!1),200),disabled:!l,placeholder:"Select Channel...",className:"w-full bg-transparent text-xs font-bold text-zinc-900 dark:text-zinc-100 p-0 border-none focus:ring-0 h-4 leading-none placeholder:text-zinc-300 dark:placeholder:text-zinc-700 disabled:opacity-50"}),p&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-3 max-h-40 overflow-y-auto bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-xl z-50 py-1",children:s.channels.length>0?s.channels.filter(c=>c.toLowerCase().includes((t.liveChannel||"").toLowerCase())).map(c=>e.jsxs("div",{onMouseDown:()=>u({...t,liveChannel:c}),className:"px-3 py-2 hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer text-xs font-medium text-zinc-700 dark:text-zinc-300 flex items-center justify-between group/item",children:[c,t.liveChannel===c&&e.jsx(ie,{size:12,className:"text-orange-500"})]},c)):e.jsx("div",{className:"px-3 py-2 text-xs text-zinc-400 italic",children:"No channels found"})})]})]})]}),e.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-lg p-2 border border-zinc-200/50 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wide pl-1",children:"CDN Distribution"}),e.jsxs("div",{className:"flex bg-zinc-200 dark:bg-zinc-800 rounded-lg p-0.5",children:[e.jsx("button",{onClick:()=>l&&n&&m(),disabled:!l,className:`px-3 py-1 rounded-md text-[10px] font-bold transition-all flex items-center gap-1.5 ${n?"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400":"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm"} ${!l&&"cursor-not-allowed opacity-50"}`,children:"Single"}),e.jsx("button",{onClick:()=>l&&!n&&m(),disabled:!l,className:`px-3 py-1 rounded-md text-[10px] font-bold transition-all flex items-center gap-1.5 ${n?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400"} ${!l&&"cursor-not-allowed opacity-50"}`,children:"Multi-CDN"})]})]}),n?e.jsxs("div",{className:"space-y-1.5",children:[r.map(c=>e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 shadow-sm group",children:[e.jsx("div",{className:"w-[120px] shrink-0 border-r border-zinc-100 dark:border-zinc-700 pr-2",children:e.jsxs("select",{value:c.provider,onChange:N=>g(c.id,"provider",N.target.value),className:"w-full bg-transparent text-[11px] font-bold text-zinc-700 dark:text-zinc-200 outline-none cursor-pointer py-1",children:[e.jsx("option",{value:"Select Provider",children:"Select Provider"}),s.cdnOptions.filter(N=>N.id!=="Multi CDN").map(N=>e.jsx("option",{value:N.id,children:N.label},N.id))]})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(nt,{size:10,className:"absolute left-0 top-1/2 -translate-y-1/2 text-zinc-300 pointer-events-none"}),e.jsx("input",{type:"text",placeholder:"Enter Config Key...",value:c.key||"",onChange:N=>g(c.id,"key",N.target.value),className:"w-full pl-4 bg-transparent text-[11px] font-medium text-zinc-600 dark:text-zinc-300 placeholder:text-zinc-300 outline-none border-none p-0 focus:ring-0"})]}),r.length>1&&e.jsx("button",{onClick:()=>v(c.id),className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-300 hover:text-red-500 transition-all",children:e.jsx(le,{size:12})})]},c.id)),e.jsxs("button",{onClick:o,className:"w-full py-1.5 mt-2 rounded-lg border border-dashed border-zinc-300 dark:border-zinc-700 hover:border-orange-300 dark:hover:border-orange-900/50 text-[10px] font-bold text-zinc-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/10 transition-all flex items-center justify-center gap-1",children:[e.jsx(ve,{size:10})," Add Provider Layer"]})]}):e.jsx("div",{className:"flex flex-wrap gap-2",children:s.cdnOptions.filter(c=>c.id!=="Multi CDN").map(c=>e.jsxs("button",{onClick:()=>u({...t,cdn:c.id}),className:`group relative px-3 py-1.5 rounded-lg border text-[11px] font-bold transition-all flex items-center gap-2 ${y(c.id)?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 border-zinc-900 dark:border-zinc-100 shadow-md transform scale-[1.02]":"bg-white dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 border-zinc-200 dark:border-zinc-700 hover:border-zinc-300 dark:hover:border-zinc-600 hover:bg-white"}`,children:[e.jsx(He,{size:12,className:y(c.id)?"opacity-100":"opacity-50 group-hover:opacity-100"}),c.label,y(c.id)&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-orange-500 rounded-full border-2 border-white dark:border-zinc-900"})]},c.id))})]})]})}function ot({isOpen:t,onClose:u,data:n,headers:m}){const[r,o]=f.useState(!1);if(!t)return null;const v=async()=>{if(n)try{const g=m.join("	"),h=n.map(s=>Object.values(s).join("	")).join(`
`),x=`${g}
${h}`;await navigator.clipboard.writeText(x),o(!0),setTimeout(()=>o(!1),2e3)}catch(g){console.error("Failed to copy:",g)}};return e.jsx(Ae,{isOpen:t,onClose:u,size:"2xl",showCloseButton:!1,className:"z-[150]",headerClassName:"px-6 py-4 border-b border-slate-100 dark:border-zinc-800 flex justify-between items-center bg-white dark:bg-zinc-900",header:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-[#0078D4]/10 dark:bg-[#0078D4]/20 text-[#0078D4] rounded-lg",children:e.jsx(se,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Data Preview"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Review data before exporting"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:v,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${r?"bg-emerald-500 text-white shadow-lg shadow-emerald-200":"bg-slate-900 text-white hover:bg-slate-800 shadow-md"}`,children:[r?e.jsx(ie,{size:16}):e.jsx(Ve,{size:16}),r?"Copied!":"Copy Data"]}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-slate-100 dark:hover:bg-zinc-800 rounded-lg text-slate-400 hover:text-rose-500 transition-colors",children:e.jsx(ne,{size:20})})]})]}),bodyClassName:"p-0 overflow-auto custom-scrollbar bg-slate-50 dark:bg-[#0c0c0e]",footerClassName:"px-6 py-3 bg-slate-50 dark:bg-zinc-900 border-t border-slate-200 dark:border-zinc-800 text-xs text-slate-400 flex justify-between",footer:e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Total Rows: ",n?n.length:0]}),e.jsx("span",{children:"Tab-separated format ready for Excel/Sheets"})]}),children:!n||n.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 gap-3 min-h-[300px]",children:[e.jsx(se,{size:48,className:"opacity-20"}),e.jsx("p",{children:"No data available to preview"})]}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-zinc-900/50 sticky top-0 z-10 shadow-sm",children:e.jsx("tr",{children:m.map((g,h)=>e.jsx("th",{className:"px-4 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-wider whitespace-nowrap border-b border-slate-200 dark:border-zinc-800",children:g},h))})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-zinc-800/50 bg-white dark:bg-zinc-900",children:n.map((g,h)=>e.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-zinc-800/50 transition-colors",children:Object.values(g).map((x,s)=>e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300 whitespace-nowrap border-r border-transparent last:border-0",children:x===null||x===""?e.jsx("span",{className:"text-slate-300",children:"-"}):x},s))},h))})]})})}const me="schedules",M=(t,u="")=>{if(!t&&t!==0)return{val:"",unit:u};if(typeof t=="object"&&t.val!==void 0)return t;const n=String(t).toLowerCase();let m=parseFloat(n),r=u;return n.endsWith("m")?r="m":n.endsWith("k")?r="k":n.endsWith("gb")?r="GB":n.endsWith("tb")?r="TB":n.endsWith("mb")&&(r="MB"),{val:isNaN(m)?"":m,unit:r}},Y={ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:"",rangeStart:"",rangeEnd:"",reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},cdn:"AWS",liveChannel:""},ze=(t="")=>({id:Date.now(),provider:"Select Provider",key:t,reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:""});function dt(t,u,n){const[m,r]=f.useState(!0),[o,v]=f.useState(!1),[g,h]=f.useState("Unknown"),x=f.useRef(null),s=t?.id?`draft_stats_${t.id}_${u}`:null,l=f.useCallback(async()=>{if(!t?.id)return{form:Y,cdnList:[],isMultiCdnMode:!1};v(!0),x.current=null;try{const y=_(O,me,t.id),c=u==="START"?"start_stat":"end_stat",N=_(O,me,t.id,"statistics",c),[S,P]=await Promise.all([xe(y),xe(N)]),A=S.exists()?S.data():{};let d={...Y},a=[],i=!1;if(P.exists()){const b=P.data();d={...d,...b,liveChannel:b.liveChannel||A.liveChannel||A.channel||t.channel||"",requestPeak:M(b.requestPeak,""),muxViewerUniq:M(b.muxViewerUniq,""),reqPeakMin:M(b.reqPeakMin,""),reqTotal:M(b.reqTotal,""),bwPeakGbps:M(b.bwPeakGbps,""),bandwidth:M(b.bandwidth,"")},b.cdnDetails?.length>0?(a=b.cdnDetails.map(k=>({...k,requestPeak:M(k.requestPeak,""),reqPeakMin:M(k.reqPeakMin,""),reqTotal:M(k.reqTotal,""),bwPeakGbps:M(k.bwPeakGbps,""),bandwidth:M(k.bandwidth,""),muxViewerUniq:M(k.muxViewerUniq,"")})),i=!0):i=b.cdn==="Multi CDN",h(b.reporter||"Unknown")}else{const b=A.cdn||"AWS";i=b==="Multi CDN",d.cdn=b,d.liveChannel=A.liveChannel||A.channel||t.channel||"",i?a=[ze(d.liveChannel)]:a=[],h("Unknown")}if(s){const b=localStorage.getItem(s);if(b)try{const k=JSON.parse(b);k.matchId===t.id&&(k.form&&(d={...d,...k.form}),k.cdnList&&(a=k.cdnList),k.isMultiCdnMode!==void 0&&(i=k.isMultiCdnMode))}catch(k){console.error("Draft load error",k)}}return x.current=t.id,{form:d,cdnList:a,isMultiCdnMode:i}}catch(y){return console.error("Fetch Error:",y),n(ae(y),"error"),{form:Y,cdnList:[],isMultiCdnMode:!1}}finally{v(!1),r(!1)}},[t,u,n,s]),p=f.useCallback((y,c,N)=>{if(!s||x.current!==t?.id)return;const S={matchId:t.id,form:y,cdnList:c,isMultiCdnMode:N,timestamp:Date.now()};localStorage.setItem(s,JSON.stringify(S))},[s,t?.id]),z=f.useCallback(()=>{s&&localStorage.removeItem(s)},[s]);return{loading:m,fetching:o,reporterName:g,currentLoadedId:x,DRAFT_KEY:s,fetchMatchData:l,saveDraft:p,clearDraft:z,setLoading:r,setFetching:v,setReporterName:h}}function ct(t,u,n,m){const[r,o]=f.useState(Y),[v,g]=f.useState([]),[h,x]=f.useState(!1),s=f.useCallback(d=>{o(d.form),g(d.cdnList),x(d.isMultiCdnMode)},[]);f.useEffect(()=>{h&&r.liveChannel&&v.length>0&&(!v[0].key||v[0].key.trim()==="")&&g(d=>d.map((a,i)=>i===0?{...a,key:r.liveChannel}:a))},[r.liveChannel,h,v]);const l=f.useCallback(()=>{x(d=>{const a=!d;return a&&v.length===0&&g([ze(r.liveChannel)]),o(i=>({...i,cdn:a?"Multi CDN":"AWS"})),a})},[v.length,r.liveChannel]),p=f.useCallback(()=>{g(d=>[...d,{id:Date.now(),provider:"Select Provider",key:"",reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:""}])},[]),z=f.useCallback(d=>{v.length>1&&g(a=>a.filter(i=>i.id!==d))},[v.length]),y=f.useCallback((d,a,i)=>{g(b=>b.map(k=>k.id!==d?k:typeof k[a]=="object"&&k[a]!==null?{...k,[a]:{...k[a],...i}}:{...k,[a]:i}))},[]),c=f.useCallback(()=>{if(v.length<2)return;const d=v[0];g(a=>a.map((i,b)=>b===0?i:{...i,ecsSport:d.ecsSport,ecsEntitlement:d.ecsEntitlement,apiHuawei:d.apiHuawei})),n("Autofilled System Health values","success")},[v,n]),N=f.useCallback(d=>{g(a=>a.map(i=>i.id!==d?i:{...i,ecsSport:"",ecsEntitlement:"",apiHuawei:"",requestPeak:{val:"",unit:""},reqPeakMin:{val:"",unit:""},reqTotal:{val:"",unit:""},bwPeakGbps:{val:"",unit:""},bandwidth:{val:"",unit:""},muxViewerUniq:{val:"",unit:""},muxScore:""})),n("Cleared row data","default")},[n]),S=f.useCallback(d=>{if(!d||!Array.isArray(d)||d.length===0)return;const a=d.map(i=>({id:Date.now()+Math.random(),provider:i.provider||"Select Provider",key:i.key||"",ecsSport:i.ecsSport||"",ecsEntitlement:i.ecsEntitlement||"",apiHuawei:i.apiHuawei||"",requestPeak:M(i.requestPeak),reqPeakMin:M(i.reqPeakMin),reqTotal:M(i.reqTotal),bwPeakGbps:M(i.bwPeakGbps),bandwidth:M(i.bandwidth),muxViewerUniq:M(i.muxViewerUniq),muxScore:i.muxScore||""}));return a.length>0?(g(a),x(!0),n(`Imported ${a.length} rows successfully`,"success"),!0):!1},[n]),P=f.useCallback((d=!1)=>{let a=t?.startTime||t?.start_time||t?.time;if(!a){d&&n("Time not found","error");return}try{const b=(T=>{let R=String(T).toLowerCase().trim().replace(".",":"),V=R.replace(/[a-z]/g,"").trim(),[F,X]=V.split(":"),E=parseInt(F,10),Z=parseInt(X||"0",10);return isNaN(E)?null:(R.includes("pm")&&E<12&&(E+=12),{h:E,m:Z})})(a);if(!b)return;const k=(T,R,V)=>{let F=T*60+R+V;return F=(F%1440+1440)%1440,`${String(Math.floor(F/60)).padStart(2,"0")}:${String(F%60).padStart(2,"0")}`},D=k(b.h,b.m,0),C=k(b.h,b.m,u==="START"?15:120);m?.current===t?.id&&o(T=>!d&&T.rangeStart&&T.rangeEnd?T:{...T,rangeStart:D,rangeEnd:C})}catch{}},[t,u,n,m]),A=f.useCallback(()=>{const d=[];(!r.rangeStart||!r.rangeEnd)&&d.push("กรุณาระบุเวลา Start/End"),r.liveChannel||d.push("กรุณาระบุ Channel");const a=i=>{const b=typeof i=="object"?i?.val:i;return b===""||b===null||b===void 0};return h?(v.length===0&&d.push("At least one CDN provider is required"),v.forEach((i,b)=>{const k=`CDN #${b+1}`;(!i.provider||i.provider==="Select Provider")&&d.push(`${k}: Provider required`),a(i.ecsSport)&&d.push(`${k}: ECS Sport required`),a(i.muxScore)&&d.push(`${k}: Score required`)})):(a(r.ecsSport)&&d.push("ECS Sport required"),a(r.muxScore)&&d.push("Smoothness Score required")),d.length>0?(n(d[0],"error"),!1):!0},[r,v,h,n]);return{form:r,cdnList:v,isMultiCdnMode:h,setForm:o,setCdnList:g,setIsMultiCdnMode:x,initializeForm:s,toggleCdnMode:l,handleAddCdn:p,handleRemoveCdn:z,handleUpdateCdnRow:y,handleAutofillSystemHealth:c,handleClearCdnRow:N,handleApplyImport:S,handleAutoFixTime:P,validateForm:A}}const Q="schedules";function ut(t,u){const[n,m]=f.useState("START"),[r,o]=f.useState(!1),[v,g]=f.useState(!1),[h,x]=f.useState({isOpen:!1,title:"",message:"",onConfirm:null}),[s,l]=f.useState({show:!1,data:[]}),[p,z]=f.useState({isOpen:!1,data:[]}),y=Re(),{currentUser:c}=Le(),{toast:N}=Ie(),S=f.useCallback((j,L="success")=>{j&&N({description:j,variant:L})},[N]),{loading:P,fetching:A,reporterName:d,currentLoadedId:a,DRAFT_KEY:i,fetchMatchData:b,saveDraft:k,clearDraft:D}=dt(t,n,S),{form:C,cdnList:T,isMultiCdnMode:R,setForm:V,initializeForm:F,toggleCdnMode:X,handleAddCdn:E,handleRemoveCdn:Z,handleUpdateCdnRow:Ce,handleAutofillSystemHealth:Ne,handleClearCdnRow:Se,handleApplyImport:ce,handleAutoFixTime:ee,validateForm:ue}=ct(t,n,S,a);f.useEffect(()=>{(async()=>{const L=await b();F(L)})()},[b,F]),f.useEffect(()=>{!P&&!A&&i&&a.current===t?.id&&k(C,T,R)},[C,T,R,i,P,A,t?.id,k]),f.useEffect(()=>{!A&&!P&&t&&ee()},[A,P,t,n,ee]);const Me=f.useCallback(j=>{ce(j)&&z({isOpen:!1,data:[]})},[ce]),Te=f.useCallback(async j=>{if(t?.id&&ue()){o(!0);try{const L=n==="START"?"start_stat":"end_stat",w={...C,cdn:R?"Multi CDN":C.cdn,cdnDetails:R?T:null,updatedAt:te(),statType:n,reporter:typeof c=="object"?c?.name:c||"Unknown"};await Fe(_(O,Q,t.id,"statistics",L),w),await pe(_(O,Q,t.id),{[n==="START"?"hasStartStat":"hasEndStat"]:!0,[n==="START"?"startStats":"endStats"]:w,liveChannel:C.liveChannel,channel:C.liveChannel,updatedAt:te()}),D(),y.invalidateQueries({queryKey:["matches"]}),S("บันทึกข้อมูลเรียบร้อยแล้ว","success"),g(!0),setTimeout(()=>g(!1),2e3),j&&j()}catch(L){S(ae(L),"error")}finally{o(!1)}}},[t?.id,ue,n,C,R,T,c,D,y,S]),Pe=f.useCallback(()=>{const j=w=>{if(!w)return 0;if(typeof w=="object"&&w.val!==void 0){const $=parseFloat(w.val||0),q=(w.unit||"").toLowerCase();return q==="m"?$*1e6:q==="b"?$*1e9:q==="k"?$*1e3:$}return Ee(w)},L=w=>{const $=w?.val||0,q=w?.unit||"";return _e($,q===""?"GB":q)?.toLocaleString("en-US",{maximumFractionDigits:4})};try{const w={no:"1",league:t?.league||"-",title:t?.title||t?.match||"-",time:t?.startTime||"-",ecsSport:re(C.ecsSport,2),ecsEnt:re(C.ecsEntitlement,2),api:re(C.apiHuawei,2),reqPeak:B(j(C.requestPeak)),viewers:B(j(C.muxViewerUniq)),score:C.muxScore,start:C.rangeStart||"-",end:C.rangeEnd||"-"},$=R&&T.length>0?T.map(q=>[w.no,w.league,w.title,w.time,w.ecsSport,w.ecsEnt,w.api,B(j(q.requestPeak)),q.provider||"-",q.key||"-",B(j(q.reqPeakMin)),B(j(q.reqTotal)),L(q.bwPeakGbps),L(q.bandwidth),B(j(q.muxViewerUniq)),w.score,w.start,w.end]):[[w.no,w.league,w.title,w.time,w.ecsSport,w.ecsEnt,w.api,B(j(C.requestPeak)),C.cdn||"-",C.liveChannel||"-",B(j(C.reqPeakMin)),B(j(C.reqTotal)),L(C.bwPeakGbps),L(C.bandwidth),w.viewers,w.score,w.start,w.end]];l({show:!0,data:$})}catch{S("Preview Error","error")}},[t,C,R,T,S]),qe=f.useCallback(()=>{x({isOpen:!0,title:`Reset ${n}?`,message:"Sure to delete?",isDanger:!0,onConfirm:async()=>{x(j=>({...j,isOpen:!1})),o(!0);try{const j=n==="START"?"start_stat":"end_stat";await Be(_(O,Q,t.id,"statistics",j)),await pe(_(O,Q,t.id),{[n==="START"?"hasStartStat":"hasEndStat"]:!1,[n==="START"?"startStats":"endStats"]:null,updatedAt:te()}),D(),y.invalidateQueries({queryKey:["matches"]}),S("Reset Success","success"),setTimeout(u,1e3)}catch(j){S(ae(j),"error")}finally{o(!1)}}})},[n,t?.id,D,y,S,u]);return{state:{statType:n,loading:P,fetching:A,saving:r,isSuccess:v,form:C,cdnList:T,isMultiCdnMode:R,reporterName:d,confirmModal:h,preview:s,importModal:p},actions:{setStatType:m,setForm:V,toggleCdnMode:X,handleAddCdn:E,handleRemoveCdn:Z,handleUpdateCdnRow:Ce,handleAutoFixTime:()=>ee(!0),handleSmartSave:Te,requestDelete:qe,handlePreview:Pe,closeConfirm:()=>x(j=>({...j,isOpen:!1})),closePreview:()=>l(j=>({...j,show:!1})),handleAutofillSystemHealth:Ne,handleClearCdnRow:Se,openImportModal:j=>z({isOpen:!0,data:j}),closeImportModal:()=>z({isOpen:!1,data:[]}),handleApplyImport:Me}}}function I({label:t,value:u,unit:n,onChange:m,onUnitChange:r,placeholder:o,color:v="blue",type:g="text",tooltip:h,compact:x=!1,max:s,readOnly:l=!1,thresholds:p,thresholdType:z="lower-is-bad"}){let y=null,c=null;if(p&&u!==""&&u!==null&&u!==void 0){const a=parseFloat(u);isNaN(a)||(z==="higher-is-bad"?a>=p.critical?(y="red",c=K):a>=p.warning?(y="orange",c=K):(y="emerald",c=he):a<=p.critical?(y="red",c=K):a<=p.warning?(y="orange",c=K):(y="emerald",c=he))}const N=a=>{if(!l){if(s!==void 0&&a!==""){const i=parseFloat(a);if(!isNaN(i)&&i>s){m(s.toString());return}if(i<0){m("0");return}}m(a)}},P=y?{emerald:{indicator:"bg-emerald-500",text:"text-emerald-600 dark:text-emerald-400"},orange:{indicator:"bg-amber-500",text:"text-amber-600 dark:text-amber-400"},red:{indicator:"bg-red-500",text:"text-red-600 dark:text-red-400"}}[y]:null,d=(()=>{if(!u||isNaN(u))return null;const a=parseFloat(u);if(r){if(!n||n==="raw")return a.toLocaleString();let i=a,b="";switch(n){case"TB":i=a*1024,b="GB";break;case"MB":i=a/1024,b="GB";break;case"KB":i=a/(1024*1024),b="GB";break;case"GB":i=a,b="GB";break;case"k":i=a*1e3,b="";break;case"m":i=a*1e6,b="";break;default:i=a}return b?`${i.toLocaleString(void 0,{maximumFractionDigits:2})} ${b}`:i.toLocaleString()}return null})();return e.jsxs("div",{className:W("relative rounded-lg border bg-white dark:bg-zinc-900 transition-all","border-zinc-200 dark:border-zinc-800",x?"p-3":"p-4",l&&"opacity-70",!l&&"hover:border-[#0078D4]/50 hover:shadow-sm"),children:[P&&e.jsx("div",{className:W("absolute left-0 top-0 bottom-0 w-1 rounded-l-lg",P.indicator)}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:W("font-semibold uppercase tracking-wide leading-none truncate pr-2 flex items-center gap-1.5",x?"text-[10px]":"text-[11px]","text-zinc-600 dark:text-zinc-400"),children:[c&&e.jsx(c,{size:12,className:P?.text}),t]}),h&&e.jsx($e,{size:12,className:"text-zinc-400 cursor-help"})]}),e.jsxs("div",{className:W("flex items-center rounded-md overflow-hidden bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 transition-all",!l&&"focus-within:border-[#0078D4] focus-within:ring-1 focus-within:ring-[#0078D4]/30",x?"h-9":"h-10"),children:[e.jsx("input",{type:g==="percentage"?"number":g,step:"any",value:u,onChange:a=>N(a.target.value),readOnly:l,placeholder:o||"0",className:W("flex-1 bg-transparent border-none outline-none px-3 font-mono font-semibold tabular-nums transition-colors min-w-0","placeholder:text-zinc-400 dark:placeholder:text-zinc-600",x?"text-sm":"text-base","text-zinc-900 dark:text-white",l&&"cursor-not-allowed text-zinc-500",P?.text)}),r?e.jsxs("select",{value:n||"",onChange:a=>!l&&r(a.target.value),disabled:l,className:"h-full w-[55px] shrink-0 bg-zinc-100 dark:bg-zinc-800 border-l border-zinc-200 dark:border-zinc-700 px-1 text-[10px] font-semibold uppercase text-zinc-600 dark:text-zinc-400 outline-none cursor-pointer hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors text-center disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Raw"}),e.jsxs("optgroup",{label:"Count",className:"dark:bg-zinc-900",children:[e.jsx("option",{value:"k",children:"k"}),e.jsx("option",{value:"m",children:"m"})]}),e.jsxs("optgroup",{label:"Data",className:"dark:bg-zinc-900",children:[e.jsx("option",{value:"GB",children:"GB"}),e.jsx("option",{value:"TB",children:"TB"}),e.jsx("option",{value:"MB",children:"MB"}),e.jsx("option",{value:"KB",children:"KB"})]})]}):g==="percentage"?e.jsx("div",{className:"h-full px-3 flex items-center bg-zinc-100 dark:bg-zinc-800 border-l border-zinc-200 dark:border-zinc-700 shrink-0",children:e.jsx("span",{className:"text-xs font-semibold text-zinc-500",children:"%"})}):null]}),d&&e.jsxs("div",{className:"mt-2 flex items-center justify-end gap-1.5",children:[e.jsx("span",{className:"text-[9px] font-medium text-zinc-400 uppercase",children:"Converted"}),e.jsx("span",{className:"text-[11px] font-semibold text-[#0078D4] dark:text-[#4ba0e8]",children:d})]})]})}const oe=({item:t,index:u,icon:n,onRemove:m,onClear:r,isRemovable:o})=>{const v=n;return e.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-7 h-7 rounded-md bg-[#0078D4] text-white flex items-center justify-center",children:e.jsx(v,{size:14})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold text-zinc-800 dark:text-zinc-200",children:t.provider||`Provider ${u+1}`}),e.jsx("p",{className:"text-[10px] text-zinc-500 dark:text-zinc-500",children:t.key||"Universal Node"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[r&&e.jsx("button",{onClick:r,className:"w-7 h-7 flex items-center justify-center text-zinc-400 hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-md transition-all",title:"Clear Data",children:e.jsx(Ze,{size:14})}),o&&e.jsx("button",{onClick:m,className:"w-7 h-7 flex items-center justify-center text-zinc-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-all",children:e.jsx(le,{size:14})})]})]})},de=({onClick:t})=>e.jsxs("button",{onClick:t,className:"w-full py-2.5 border border-dashed border-zinc-300 dark:border-zinc-700 rounded-md flex justify-center items-center gap-2 text-zinc-500 font-medium text-xs hover:text-[#0078D4] hover:border-[#0078D4] hover:bg-[#0078D4]/5 dark:hover:bg-[#0078D4]/10 transition-all active:scale-[0.99]",children:[e.jsx(ve,{size:14})," Add Provider Layer"]}),U=(t,u)=>({...t,val:u}),H=(t,u)=>({...t,unit:u}),ye="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",xt=({data:t,onChange:u,isMulti:n,cdnList:m,onUpdateCdn:r,onRemoveCdn:o,onAddCdn:v,onAutofill:g,onClearRow:h,canEdit:x=!0})=>{const s=(l,p)=>e.jsxs("div",{className:ye,children:[e.jsx(I,{label:"ECS Sport",value:l.ecsSport,onChange:z=>p("ecsSport",z),type:"percentage",max:100,thresholdType:"higher-is-bad",thresholds:{warning:80,critical:95},readOnly:!x}),e.jsx(I,{label:"ECS Entitlement",value:l.ecsEntitlement,onChange:z=>p("ecsEntitlement",z),type:"percentage",max:100,thresholdType:"higher-is-bad",thresholds:{warning:80,critical:95},readOnly:!x}),e.jsx(I,{label:"API Huawei",value:l.apiHuawei,onChange:z=>p("apiHuawei",z),type:"percentage",max:100,thresholdType:"higher-is-bad",thresholds:{warning:80,critical:95},readOnly:!x}),e.jsx(I,{label:"WWW & API REQ",value:l.requestPeak?.val,unit:l.requestPeak?.unit,onChange:z=>p("requestPeak",U(l.requestPeak,z)),onUnitChange:z=>p("requestPeak",H(l.requestPeak,z)),type:"number",compact:!0,readOnly:!x})]});return n?e.jsxs("div",{className:"space-y-4",children:[m.length>1&&x&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:g,className:"flex items-center gap-1.5 px-3 py-1.5 bg-[#0078D4]/10 text-[#0078D4] rounded-md text-xs font-medium hover:bg-[#0078D4]/20 transition-colors",children:[e.jsx(we,{size:12})," Autofill System Health"]})}),m.map((l,p)=>e.jsxs("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/30 rounded-lg p-4 border border-zinc-100 dark:border-zinc-800",children:[e.jsx(oe,{item:l,index:p,icon:ke,onRemove:x?()=>o(l.id):null,onClear:x?()=>h(l.id):null,isRemovable:x&&m.length>1}),s(l,(z,y)=>r(l.id,z,y))]},l.id)),x&&e.jsx(de,{onClick:v})]}):e.jsx("div",{children:s(t,u)})},pt=({data:t,onChange:u,isMulti:n,cdnList:m,onUpdateCdn:r,onRemoveCdn:o,onAddCdn:v,onClearRow:g,canEdit:h=!0})=>{const x=(s,l)=>e.jsxs("div",{className:ye,children:[e.jsx(I,{label:"Req Peak",value:s.reqPeakMin?.val,unit:s.reqPeakMin?.unit,onChange:p=>l("reqPeakMin",U(s.reqPeakMin,p)),onUnitChange:p=>l("reqPeakMin",H(s.reqPeakMin,p)),type:"number",compact:!0,readOnly:!h}),e.jsx(I,{label:"Req Total",value:s.reqTotal?.val,unit:s.reqTotal?.unit,onChange:p=>l("reqTotal",U(s.reqTotal,p)),onUnitChange:p=>l("reqTotal",H(s.reqTotal,p)),type:"number",compact:!0,readOnly:!h}),e.jsx(I,{label:"BW Peak",value:s.bwPeakGbps?.val,unit:s.bwPeakGbps?.unit,onChange:p=>l("bwPeakGbps",U(s.bwPeakGbps,p)),onUnitChange:p=>l("bwPeakGbps",H(s.bwPeakGbps,p)),type:"number",compact:!0,readOnly:!h}),e.jsx(I,{label:"BW Total",value:s.bandwidth?.val,unit:s.bandwidth?.unit,onChange:p=>l("bandwidth",U(s.bandwidth,p)),onUnitChange:p=>l("bandwidth",H(s.bandwidth,p)),type:"number",compact:!0,readOnly:!h})]});return n?e.jsxs("div",{className:"space-y-4",children:[m.map((s,l)=>e.jsxs("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/30 rounded-lg p-4 border border-zinc-100 dark:border-zinc-800",children:[e.jsx(oe,{item:s,index:l,icon:je,onRemove:h?()=>o(s.id):null,onClear:h?()=>g(s.id):null,isRemovable:h&&m.length>1}),x(s,(p,z)=>r(s.id,p,z))]},s.id)),h&&e.jsx(de,{onClick:v})]}):e.jsx("div",{children:x(t,u)})},bt=({data:t,onChange:u,isMulti:n,cdnList:m,onUpdateCdn:r,onRemoveCdn:o,onAddCdn:v,onClearRow:g,canEdit:h=!0})=>{const x=(s,l)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(I,{label:"Live Viewers",value:s.muxViewerUniq?.val,unit:s.muxViewerUniq?.unit,onChange:p=>l("muxViewerUniq",U(s.muxViewerUniq,p)),onUnitChange:p=>l("muxViewerUniq",H(s.muxViewerUniq,p)),type:"number",compact:!0,readOnly:!h}),e.jsx(I,{label:"Smoothness Score",value:s.muxScore,onChange:p=>l("muxScore",p),type:"number",max:100,thresholdType:"lower-is-bad",thresholds:{warning:80,critical:60},readOnly:!h})]});return n?e.jsxs("div",{className:"space-y-4",children:[m.map((s,l)=>e.jsxs("div",{className:"bg-zinc-50/50 dark:bg-zinc-900/30 rounded-lg p-4 border border-zinc-100 dark:border-zinc-800",children:[e.jsx(oe,{item:s,index:l,icon:fe,onRemove:h?()=>o(s.id):null,onClear:h?()=>g(s.id):null,isRemovable:h&&m.length>1}),x(s,(p,z)=>r(s.id,p,z))]},s.id)),h&&e.jsx(de,{onClick:v})]}):e.jsx("div",{children:x(t,u)})},ht=()=>e.jsxs("div",{className:"w-full space-y-6 animate-pulse p-6",children:[e.jsx("div",{className:"h-40 rounded-lg bg-zinc-100 dark:bg-zinc-800/50"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx("div",{className:"h-64 rounded-lg bg-zinc-100 dark:bg-zinc-800/50"}),e.jsx("div",{className:"h-64 rounded-lg bg-zinc-100 dark:bg-zinc-800/50"})]})]}),J=({icon:t,title:u,iconColor:n,children:m,className:r=""})=>e.jsxs("div",{className:`bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-sm overflow-hidden ${r}`,children:[(t||u)&&e.jsx("div",{className:"px-5 py-3 border-b border-zinc-100 dark:border-zinc-800 flex items-center justify-between bg-zinc-50/50 dark:bg-zinc-900",children:e.jsxs("div",{className:"flex items-center gap-3",children:[t&&e.jsx("div",{className:`p-1.5 rounded-md ${n}`,children:e.jsx(t,{size:16})}),e.jsx("h3",{className:"text-xs font-semibold text-zinc-900 dark:text-zinc-100 uppercase tracking-wider",children:u})]})}),e.jsx("div",{className:"p-5",children:m})]});function Pt({matchData:t,onClose:u,initialStatType:n="START",canEdit:m}){const{state:r,actions:o}=ut(t,u),[v,g]=f.useState({channels:[],cdnOptions:[]});if(f.useEffect(()=>{n&&o.setStatType&&o.setStatType(n)},[n]),f.useEffect(()=>We.subscribeConfigs(g),[]),!t)return null;const h=t?.isLiveTime||t?.hasStartStat&&!t?.hasEndStat;return e.jsxs("div",{className:"h-full flex flex-col bg-zinc-50/50 dark:bg-[#0a0a0a] border-l border-zinc-200 dark:border-zinc-800 shadow-xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 left-0 z-50",children:e.jsx(Ge,{isOpen:r.confirmModal.isOpen,onClose:o.closeConfirm,...r.confirmModal})}),e.jsxs("div",{className:"shrink-0 px-6 py-4 bg-white dark:bg-zinc-900 border-b border-zinc-200 dark:border-zinc-800 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1.5",children:[h?e.jsxs("span",{className:"inline-flex items-center gap-2 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-rose-50 text-rose-700 dark:bg-rose-900/20 dark:text-rose-400 border border-rose-200 dark:border-rose-800",children:[e.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-rose-500"})]})," LIVE"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-300 border border-zinc-200 dark:border-zinc-700",children:[e.jsx(ge,{size:12})," ",t?.startTime||"--:--"]}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider border ${r.statType==="START"?"bg-[#eff6fc] text-[#0b5c9e] border-[#c7e0f4] dark:bg-[#0078D4]/20 dark:text-[#4ba0e8] dark:border-[#0078D4]/30":"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800/30"}`,children:[r.statType==="START"?"Start":"End"," Phase"]})]}),e.jsx("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight truncate",title:t?.teamA&&t?.teamB?`${t.teamA} vs ${t.teamB}`:t?.title,children:t?.teamA&&t?.teamB?e.jsxs("span",{className:"flex items-center gap-2",children:[t.teamA," ",e.jsx("span",{className:"text-zinc-500 dark:text-zinc-500 font-medium text-sm",children:"vs"})," ",t.teamB]}):t?.title||"Match Operational Record"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:u,className:"h-8 px-3 hidden sm:flex items-center gap-2 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-600 hover:text-zinc-900 transition-colors text-xs font-medium",children:[e.jsx("span",{children:"Close"}),e.jsx(ne,{size:16})]}),e.jsx("button",{onClick:u,className:"h-8 w-8 flex sm:hidden items-center justify-center rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-600 hover:text-zinc-900 transition-colors",children:e.jsx(ne,{size:20})})]})]}),m&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:o.toggleCdnMode,className:"flex-1 h-8 px-3 flex items-center justify-center gap-2 bg-white dark:bg-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-700 border border-zinc-200 dark:border-zinc-700 rounded-md text-[10px] font-bold uppercase tracking-wider text-zinc-700 dark:text-zinc-200 transition-all active:scale-95",children:[e.jsx(Ke,{size:14,className:r.isMultiCdnMode?"text-[#0078D4]":"text-zinc-500"}),e.jsx("span",{children:r.isMultiCdnMode?"Multi-CDN":"Single"})]}),e.jsxs("button",{onClick:()=>o.setStatType(r.statType==="START"?"END":"START"),className:"flex-1 h-8 px-3 flex items-center justify-center gap-2 bg-white dark:bg-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-700 border border-zinc-200 dark:border-zinc-700 rounded-md text-[10px] font-bold uppercase tracking-wider text-zinc-700 dark:text-zinc-200 transition-all active:scale-95",children:[e.jsx(Ye,{size:14})," ",e.jsx("span",{children:"Switch"})]})]})]}),e.jsx("div",{className:`flex-1 overflow-y-auto p-6 space-y-6 ${r.isMultiCdnMode,""}`,children:r.fetching?e.jsx(ht,{}):e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsx(J,{className:"shadow-sm border border-zinc-200 dark:border-zinc-800",children:e.jsx(lt,{form:r.form,setForm:o.setForm,isMultiCdnMode:r.isMultiCdnMode,toggleCdnMode:o.toggleCdnMode,cdnList:r.cdnList,onAdd:o.handleAddCdn,onRemove:o.handleRemoveCdn,onUpdate:o.handleUpdateCdnRow,onAutoFix:o.handleAutoFixTime,statType:r.statType,masterConfigs:v,canEdit:m})}),e.jsx(J,{title:"System Health",icon:ke,iconColor:"text-[#0078D4] bg-[#eff6fc] dark:bg-[#0078D4]/20 dark:text-[#0078D4]",children:e.jsx(xt,{data:r.form,onChange:(x,s)=>o.setForm({...r.form,[x]:s}),isMulti:r.isMultiCdnMode,cdnList:r.cdnList,onUpdateCdn:o.handleUpdateCdnRow,onAddCdn:o.handleAddCdn,onRemoveCdn:o.handleRemoveCdn,canEdit:m})}),e.jsx(J,{title:"Traffic & Bandwidth",icon:je,iconColor:"text-[#0078D4] bg-[#eff6fc] dark:bg-[#0078D4]/20 dark:text-[#0078D4]",children:e.jsx(pt,{data:r.form,onChange:(x,s)=>o.setForm({...r.form,[x]:s}),isMulti:r.isMultiCdnMode,cdnList:r.cdnList,onUpdateCdn:o.handleUpdateCdnRow,onAddCdn:o.handleAddCdn,onRemoveCdn:o.handleRemoveCdn,canEdit:m})}),e.jsx(J,{title:"Audience & Engagement",icon:fe,iconColor:"text-[#0078D4] bg-[#eff6fc] dark:bg-[#0078D4]/20 dark:text-[#0078D4]",children:e.jsx(bt,{data:r.form,onChange:(x,s)=>o.setForm({...r.form,[x]:s}),isMulti:r.isMultiCdnMode,cdnList:r.cdnList,onUpdateCdn:o.handleUpdateCdnRow,onAddCdn:o.handleAddCdn,onRemoveCdn:o.handleRemoveCdn,canEdit:m})})]})}),e.jsxs("div",{className:"shrink-0 p-4 bg-white dark:bg-zinc-900 border-t border-zinc-200 dark:border-zinc-800 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:o.requestDelete,disabled:r.loading,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-[10px] font-bold uppercase tracking-wider text-rose-600 bg-rose-50 hover:bg-rose-100 dark:bg-rose-900/10 dark:hover:bg-rose-900/20 transition-all disabled:opacity-30",children:[e.jsx(le,{size:16}),e.jsx("span",{className:"",children:"Flush"})]}),e.jsxs("button",{onClick:o.handlePreview,disabled:r.loading,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-[10px] font-bold uppercase tracking-wider text-[#0078D4] bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/10 dark:hover:bg-blue-900/20 transition-all disabled:opacity-30",children:[e.jsx(se,{size:16}),e.jsx("span",{className:"",children:"Preview"})]})]}),m&&e.jsxs("button",{onClick:()=>o.handleSmartSave(),disabled:r.loading||r.isSuccess,className:`w-full h-10 px-6 rounded-md text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-2 shadow-sm transition-all active:scale-95 ${r.isSuccess?"bg-emerald-600 text-white":"bg-[#0078D4] hover:bg-[#106EBE] text-white"} ${r.loading?"opacity-50 cursor-not-allowed":""}`,children:[r.loading?e.jsx(De,{size:14,className:"animate-spin"}):r.isSuccess?e.jsx(ie,{size:14,strokeWidth:2.5}):e.jsx(Qe,{size:14}),e.jsx("span",{children:r.loading?"Saving...":r.isSuccess?"Saved":"Save Record"})]})]}),e.jsx(ot,{isOpen:r.preview.show,onClose:o.closePreview,data:r.preview.data,headers:["#","League","Match","Time","ECS Sport","ECS Entitlement","API Huawei","WWW & API Request","CDN","Key","Req Peak","Req Total","BW Peak","BW Total","Viewers","Score","Start","End"]})]})}export{Pt as default};
